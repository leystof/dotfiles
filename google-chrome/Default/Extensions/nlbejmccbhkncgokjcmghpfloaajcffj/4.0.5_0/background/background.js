!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=231)}([,function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")()}).call(this,r(66))},function(t,e,r){var n=r(1),i=r(44),s=r(5),o=r(45),a=r(47),u=r(94),l=i("wks"),c=n.Symbol,h=u?c:c&&c.withoutSetter||o;t.exports=function(t){return s(l,t)||(a&&s(c,t)?l[t]=c[t]:l[t]=h("Symbol."+t)),l[t]}},function(t,e,r){var n=r(7);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(8),i=r(10),s=r(25);t.exports=n?function(t,e,r){return i.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(4);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(8),i=r(42),s=r(3),o=r(38),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(s(t),e=o(e,!0),s(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(1),i=r(6),s=r(5),o=r(30),a=r(31),u=r(24),l=u.get,c=u.enforce,h=String(String).split("String");(t.exports=function(t,e,r,a){var u=!!a&&!!a.unsafe,l=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof e||s(r,"name")||i(r,"name",e),c(r).source=h.join("string"==typeof e?e:"")),t!==n?(u?!f&&t[e]&&(l=!0):delete t[e],l?t[e]=r:i(t,e,r)):l?t[e]=r:o(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var n=r(91),i=r(1),s=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?s(n[t])||s(i[t]):n[t]&&n[t][e]||i[t]&&i[t][e]}},function(t,e){t.exports={}},,,function(t,e,r){"use strict";var n,i,s,o,a=r(23),u=r(19),l=r(1),c=r(13),h=r(95),f=r(11),d=r(72),p=r(26),g=r(73),v=r(7),y=r(21),m=r(65),b=r(9),w=r(31),E=r(96),k=r(98),S=r(77),T=r(48).set,x=r(99),I=r(100),P=r(101),R=r(52),L=r(102),_=r(24),O=r(39),A=r(2),C=r(103),U=A("species"),B="Promise",N=_.get,D=_.set,M=_.getterFor(B),q=h,j=l.TypeError,F=l.document,Y=l.process,V=c("fetch"),$=R.f,W=$,z="process"==b(Y),H=!!(F&&F.createEvent&&l.dispatchEvent),Z=O(B,(function(){if(!(w(q)!==String(q))){if(66===C)return!0;if(!z&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!q.prototype.finally)return!0;if(C>=51&&/native code/.test(q))return!1;var t=q.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[U]=e,!(t.then((function(){}))instanceof e)})),G=Z||!k((function(t){q.all(t).catch((function(){}))})),X=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},J=function(t,e,r){if(!e.notified){e.notified=!0;var n=e.reactions;x((function(){for(var i=e.value,s=1==e.state,o=0;n.length>o;){var a,u,l,c=n[o++],h=s?c.ok:c.fail,f=c.resolve,d=c.reject,p=c.domain;try{h?(s||(2===e.rejection&&et(t,e),e.rejection=1),!0===h?a=i:(p&&p.enter(),a=h(i),p&&(p.exit(),l=!0)),a===c.promise?d(j("Promise-chain cycle")):(u=X(a))?u.call(a,f,d):f(a)):d(i)}catch(t){p&&!l&&p.exit(),d(t)}}e.reactions=[],e.notified=!1,r&&!e.rejection&&Q(t,e)}))}},K=function(t,e,r){var n,i;H?((n=F.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),l.dispatchEvent(n)):n={promise:e,reason:r},(i=l["on"+t])?i(n):"unhandledrejection"===t&&P("Unhandled promise rejection",r)},Q=function(t,e){T.call(l,(function(){var r,n=e.value;if(tt(e)&&(r=L((function(){z?Y.emit("unhandledRejection",n,t):K("unhandledrejection",t,n)})),e.rejection=z||tt(e)?2:1,r.error))throw r.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){T.call(l,(function(){z?Y.emit("rejectionHandled",t):K("rejectionhandled",t,e.value)}))},rt=function(t,e,r,n){return function(i){t(e,r,i,n)}},nt=function(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=2,J(t,e,!0))},it=function(t,e,r,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===r)throw j("Promise can't be resolved itself");var i=X(r);i?x((function(){var n={done:!1};try{i.call(r,rt(it,t,n,e),rt(nt,t,n,e))}catch(r){nt(t,n,r,e)}})):(e.value=r,e.state=1,J(t,e,!1))}catch(r){nt(t,{done:!1},r,e)}}};Z&&(q=function(t){m(this,q,B),y(t),n.call(this);var e=N(this);try{t(rt(it,this,e),rt(nt,this,e))}catch(t){nt(this,e,t)}},(n=function(t){D(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(q.prototype,{then:function(t,e){var r=M(this),n=$(S(this,q));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=z?Y.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&J(this,r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new n,e=N(t);this.promise=t,this.resolve=rt(it,t,e),this.reject=rt(nt,t,e)},R.f=$=function(t){return t===q||t===s?new i(t):W(t)},u||"function"!=typeof h||(o=h.prototype.then,f(h.prototype,"then",(function(t,e){var r=this;return new q((function(t,e){o.call(r,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof V&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return I(q,V.apply(l,arguments))}}))),a({global:!0,wrap:!0,forced:Z},{Promise:q}),p(q,B,!1,!0),g(B),s=c(B),a({target:B,stat:!0,forced:Z},{reject:function(t){var e=$(this);return e.reject.call(void 0,t),e.promise}}),a({target:B,stat:!0,forced:u||Z},{resolve:function(t){return I(u&&this===s?q:this,t)}}),a({target:B,stat:!0,forced:G},{all:function(t){var e=this,r=$(e),n=r.resolve,i=r.reject,s=L((function(){var r=y(e.resolve),s=[],o=0,a=1;E(t,(function(t){var u=o++,l=!1;s.push(void 0),a++,r.call(e,t).then((function(t){l||(l=!0,s[u]=t,--a||n(s))}),i)})),--a||n(s)}));return s.error&&i(s.value),r.promise},race:function(t){var e=this,r=$(e),n=r.reject,i=L((function(){var i=y(e.resolve);E(t,(function(t){i.call(e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){t.exports=!1},function(t,e,r){var n=r(68),i=r(12);t.exports=function(t){return n(i(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(18),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(1),i=r(28).f,s=r(6),o=r(11),a=r(30),u=r(89),l=r(39);t.exports=function(t,e){var r,c,h,f,d,p=t.target,g=t.global,v=t.stat;if(r=g?n:v?n[p]||a(p,{}):(n[p]||{}).prototype)for(c in e){if(f=e[c],h=t.noTargetGet?(d=i(r,c))&&d.value:r[c],!l(g?c:p+(v?".":"#")+c,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(t.sham||h&&h.sham)&&s(f,"sham",!0),o(r,c,f,t)}}},function(t,e,r){var n,i,s,o=r(88),a=r(1),u=r(7),l=r(6),c=r(5),h=r(32),f=r(33),d=a.WeakMap;if(o){var p=new d,g=p.get,v=p.has,y=p.set;n=function(t,e){return y.call(p,t,e),e},i=function(t){return g.call(p,t)||{}},s=function(t){return v.call(p,t)}}else{var m=h("state");f[m]=!0,n=function(t,e){return l(t,m,e),e},i=function(t){return c(t,m)?t[m]:{}},s=function(t){return c(t,m)}}t.exports={set:n,get:i,has:s,enforce:function(t){return s(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(10).f,i=r(5),s=r(2)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,s)&&n(t,s,{configurable:!0,value:e})}},function(t,e,r){"use strict";var n,i,s=r(60),o=r(71),a=RegExp.prototype.exec,u=String.prototype.replace,l=a,c=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),h=o.UNSUPPORTED_Y||o.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(c||f||h)&&(l=function(t){var e,r,n,i,o=this,l=h&&o.sticky,d=s.call(o),p=o.source,g=0,v=t;return l&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),v=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,g++),r=new RegExp("^(?:"+p+")",d)),f&&(r=new RegExp("^"+p+"$(?!\\s)",d)),c&&(e=o.lastIndex),n=a.call(l?r:o,v),l?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=o.lastIndex,o.lastIndex+=n[0].length):o.lastIndex=0:c&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),f&&n&&n.length>1&&u.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),t.exports=l},function(t,e,r){var n=r(8),i=r(67),s=r(25),o=r(20),a=r(38),u=r(5),l=r(42),c=Object.getOwnPropertyDescriptor;e.f=n?c:function(t,e){if(t=o(t),e=a(e,!0),l)try{return c(t,e)}catch(t){}if(u(t,e))return s(!i.f.call(t,e),t[e])}},function(t,e,r){var n=r(1),i=r(7),s=n.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},function(t,e,r){var n=r(1),i=r(6);t.exports=function(t,e){try{i(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n=r(43),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return i.call(t)}),t.exports=n.inspectSource},function(t,e,r){var n=r(44),i=r(45),s=n("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},function(t,e){t.exports={}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){"use strict";var n=r(56),i=r(3),s=r(36),o=r(22),a=r(18),u=r(12),l=r(58),c=r(57),h=Math.max,f=Math.min,d=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(t,e,r,n){var v=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=n.REPLACE_KEEPS_$0,m=v?"$":"$0";return[function(r,n){var i=u(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,i,n):e.call(String(i),r,n)},function(t,n){if(!v&&y||"string"==typeof n&&-1===n.indexOf(m)){var s=r(e,t,this,n);if(s.done)return s.value}var u=i(t),d=String(this),p="function"==typeof n;p||(n=String(n));var g=u.global;if(g){var w=u.unicode;u.lastIndex=0}for(var E=[];;){var k=c(u,d);if(null===k)break;if(E.push(k),!g)break;""===String(k[0])&&(u.lastIndex=l(d,o(u.lastIndex),w))}for(var S,T="",x=0,I=0;I<E.length;I++){k=E[I];for(var P=String(k[0]),R=h(f(a(k.index),d.length),0),L=[],_=1;_<k.length;_++)L.push(void 0===(S=k[_])?S:String(S));var O=k.groups;if(p){var A=[P].concat(L,R,d);void 0!==O&&A.push(O);var C=String(n.apply(void 0,A))}else C=b(P,d,R,L,O,n);R>=x&&(T+=d.slice(x,R)+C,x=R+P.length)}return T+d.slice(x)}];function b(t,r,n,i,o,a){var u=n+t.length,l=i.length,c=g;return void 0!==o&&(o=s(o),c=p),e.call(a,c,(function(e,s){var a;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(u);case"<":a=o[s.slice(1,-1)];break;default:var c=+s;if(0===c)return e;if(c>l){var h=d(c/10);return 0===h?e:h<=l?void 0===i[h-1]?s.charAt(1):i[h-1]+s.charAt(1):e}a=i[c-1]}return void 0===a?"":a}))}}))},function(t,e,r){var n=r(12);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(21);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(7);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(4),i=/#|\.prototype\./,s=function(t,e){var r=a[o(t)];return r==l||r!=u&&("function"==typeof e?n(e):!!e)},o=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},function(t,e,r){var n=r(1),i=r(104),s=r(78),o=r(6),a=r(2),u=a("iterator"),l=a("toStringTag"),c=s.values;for(var h in i){var f=n[h],d=f&&f.prototype;if(d){if(d[u]!==c)try{o(d,u,c)}catch(t){d[u]=c}if(d[l]||o(d,l,h),i[h])for(var p in s)if(d[p]!==s[p])try{o(d,p,s[p])}catch(t){d[p]=s[p]}}}},function(t,e,r){var n,i=r(3),s=r(79),o=r(34),a=r(33),u=r(49),l=r(29),c=r(32),h=c("IE_PROTO"),f=function(){},d=function(t){return"<script>"+t+"<\/script>"},p=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=n?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=l("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var r=o.length;r--;)delete p.prototype[o[r]];return p()};a[h]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f.prototype=i(t),r=new f,f.prototype=null,r[h]=t):r=p(),void 0===e?r:s(r,e)}},function(t,e,r){var n=r(8),i=r(4),s=r(29);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(1),i=r(30),s=n["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=s},function(t,e,r){var n=r(19),i=r(43);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e,r){var n=r(5),i=r(20),s=r(92).indexOf,o=r(33);t.exports=function(t,e){var r,a=i(t),u=0,l=[];for(r in a)!n(o,r)&&n(a,r)&&l.push(r);for(;e.length>u;)n(a,r=e[u++])&&(~s(l,r)||l.push(r));return l}},function(t,e,r){var n=r(4);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(t,e,r){var n,i,s,o=r(1),a=r(4),u=r(9),l=r(37),c=r(49),h=r(29),f=r(50),d=o.location,p=o.setImmediate,g=o.clearImmediate,v=o.process,y=o.MessageChannel,m=o.Dispatch,b=0,w={},E=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},k=function(t){return function(){E(t)}},S=function(t){E(t.data)},T=function(t){o.postMessage(t+"",d.protocol+"//"+d.host)};p&&g||(p=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},n(b),b},g=function(t){delete w[t]},"process"==u(v)?n=function(t){v.nextTick(k(t))}:m&&m.now?n=function(t){m.now(k(t))}:y&&!f?(s=(i=new y).port2,i.port1.onmessage=S,n=l(s.postMessage,s,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||a(T)?n="onreadystatechange"in h("script")?function(t){c.appendChild(h("script")).onreadystatechange=function(){c.removeChild(this),E(t)}}:function(t){setTimeout(k(t),0)}:(n=T,o.addEventListener("message",S,!1))),t.exports={set:p,clear:g}},function(t,e,r){var n=r(13);t.exports=n("document","documentElement")},function(t,e,r){var n=r(51);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(t,e,r){var n=r(13);t.exports=n("navigator","userAgent")||""},function(t,e,r){"use strict";var n=r(21),i=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},function(t,e,r){"use strict";var n,i,s,o=r(54),a=r(6),u=r(5),l=r(2),c=r(19),h=l("iterator"),f=!1;[].keys&&("next"in(s=[].keys())?(i=o(o(s)))!==Object.prototype&&(n=i):f=!0),null==n&&(n={}),c||u(n,h)||a(n,h,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},function(t,e,r){var n=r(5),i=r(36),s=r(32),o=r(106),a=s("IE_PROTO"),u=Object.prototype;t.exports=o?Object.getPrototypeOf:function(t){return t=i(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,r){"use strict";var n=r(56),i=r(3),s=r(22),o=r(12),a=r(58),u=r(57);n("match",1,(function(t,e,r){return[function(e){var r=o(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var o=i(t),l=String(this);if(!o.global)return u(o,l);var c=o.unicode;o.lastIndex=0;for(var h,f=[],d=0;null!==(h=u(o,l));){var p=String(h[0]);f[d]=p,""===p&&(o.lastIndex=a(l,s(o.lastIndex),c)),d++}return 0===d?null:f}]}))},function(t,e,r){"use strict";r(87);var n=r(11),i=r(4),s=r(2),o=r(27),a=r(6),u=s("species"),l=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c="$0"==="a".replace(/./,"$0"),h=s("replace"),f=!!/./[h]&&""===/./[h]("a","$0"),d=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,h){var p=s(t),g=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),v=g&&!i((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!g||!v||"replace"===t&&(!l||!c||f)||"split"===t&&!d){var y=/./[p],m=r(p,""[t],(function(t,e,r,n,i){return e.exec===o?g&&!i?{done:!0,value:y.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=m[0],w=m[1];n(String.prototype,t,b),n(RegExp.prototype,p,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}h&&a(RegExp.prototype[p],"sham",!0)}},function(t,e,r){var n=r(9),i=r(27);t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var s=r.call(t,e);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,r){"use strict";var n=r(64).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){"use strict";e.a=class{constructor(){window.log=()=>{},window.debug=()=>{},window.error=()=>{},sdk.config.debug&&(window.log=console.log,window.debug=console.debug,window.error=console.error)}}},function(t,e,r){"use strict";var n=r(3);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){var n=r(75),i=r(14),s=r(2)("iterator");t.exports=function(t){if(null!=t)return t[s]||t["@@iterator"]||i[n(t)]}},,function(t,e,r){"use strict";e.a=class{constructor(){this.callbacks=[]}add(t){if("function"!=typeof t)return!1;return this.callbacks.push(t),{detach:this.detach.bind(this,this.callbacks.length-1)}}dispatch(t){for(const e in this.callbacks)try{this.callbacks[e](t)}catch(t){}return!0}detach(t){return this.callbacks.splice(t,1),!0}}},function(t,e,r){var n=r(18),i=r(12),s=function(t){return function(e,r){var s,o,a=String(i(e)),u=n(r),l=a.length;return u<0||u>=l?t?"":void 0:(s=a.charCodeAt(u))<55296||s>56319||u+1===l||(o=a.charCodeAt(u+1))<56320||o>57343?t?a.charAt(u):s:t?a.slice(u,u+2):o-56320+(s-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);e.f=s?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(4),i=r(9),s="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?s.call(t,""):Object(t)}:Object},function(t,e,r){var n=r(46),i=r(34).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";var n=r(4);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,r){var n=r(11);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){"use strict";var n=r(13),i=r(10),s=r(2),o=r(8),a=s("species");t.exports=function(t){var e=n(t),r=i.f;o&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(2),i=r(14),s=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},function(t,e,r){var n=r(97),i=r(9),s=r(2)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?r:o?i(e):"Object"==(n=i(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,r){var n=r(3);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var s=t.return;throw void 0!==s&&n(s.call(t)),e}}},function(t,e,r){var n=r(3),i=r(21),s=r(2)("species");t.exports=function(t,e){var r,o=n(t).constructor;return void 0===o||null==(r=n(o)[s])?e:i(r)}},function(t,e,r){"use strict";var n=r(20),i=r(105),s=r(14),o=r(24),a=r(81),u=o.set,l=o.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:n(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(t,e,r){var n=r(8),i=r(10),s=r(3),o=r(80);t.exports=n?Object.defineProperties:function(t,e){s(t);for(var r,n=o(e),a=n.length,u=0;a>u;)i.f(t,r=n[u++],e[r]);return t}},function(t,e,r){var n=r(46),i=r(34);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){"use strict";var n=r(23),i=r(82),s=r(54),o=r(83),a=r(26),u=r(6),l=r(11),c=r(2),h=r(19),f=r(14),d=r(53),p=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,v=c("iterator"),y=function(){return this};t.exports=function(t,e,r,c,d,m,b){i(r,e,c);var w,E,k,S=function(t){if(t===d&&R)return R;if(!g&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},T=e+" Iterator",x=!1,I=t.prototype,P=I[v]||I["@@iterator"]||d&&I[d],R=!g&&P||S(d),L="Array"==e&&I.entries||P;if(L&&(w=s(L.call(new t)),p!==Object.prototype&&w.next&&(h||s(w)===p||(o?o(w,p):"function"!=typeof w[v]&&u(w,v,y)),a(w,T,!0,!0),h&&(f[T]=y))),"values"==d&&P&&"values"!==P.name&&(x=!0,R=function(){return P.call(this)}),h&&!b||I[v]===R||u(I,v,R),f[e]=R,d)if(E={values:S("values"),keys:m?R:S("keys"),entries:S("entries")},b)for(k in E)!g&&!x&&k in I||l(I,k,E[k]);else n({target:e,proto:!0,forced:g||x},E);return E}},function(t,e,r){"use strict";var n=r(53).IteratorPrototype,i=r(41),s=r(25),o=r(26),a=r(14),u=function(){return this};t.exports=function(t,e,r){var l=e+" Iterator";return t.prototype=i(n,{next:s(1,r)}),o(t,l,!1,!0),a[l]=u,t}},function(t,e,r){var n=r(3),i=r(107);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,s){return n(r),i(s),e?t.call(r,s):r.__proto__=s,r}}():void 0)},,,function(t,e){window.chrome?window.browser||(window.browser=window.chrome):window.chrome=window.browser?window.browser:{}},function(t,e,r){"use strict";var n=r(23),i=r(27);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,r){var n=r(1),i=r(31),s=n.WeakMap;t.exports="function"==typeof s&&/native code/.test(i(s))},function(t,e,r){var n=r(5),i=r(90),s=r(28),o=r(10);t.exports=function(t,e){for(var r=i(e),a=o.f,u=s.f,l=0;l<r.length;l++){var c=r[l];n(t,c)||a(t,c,u(e,c))}}},function(t,e,r){var n=r(13),i=r(69),s=r(70),o=r(3);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(o(t)),r=s.f;return r?e.concat(r(t)):e}},function(t,e,r){var n=r(1);t.exports=n},function(t,e,r){var n=r(20),i=r(22),s=r(93),o=function(t){return function(e,r,o){var a,u=n(e),l=i(u.length),c=s(o,l);if(t&&r!=r){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},function(t,e,r){var n=r(18),i=Math.max,s=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):s(r,e)}},function(t,e,r){var n=r(47);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,r){var n=r(1);t.exports=n.Promise},function(t,e,r){var n=r(3),i=r(74),s=r(22),o=r(37),a=r(61),u=r(76),l=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,r,c,h){var f,d,p,g,v,y,m,b=o(e,r,c?2:1);if(h)f=t;else{if("function"!=typeof(d=a(t)))throw TypeError("Target is not iterable");if(i(d)){for(p=0,g=s(t.length);g>p;p++)if((v=c?b(n(m=t[p])[0],m[1]):b(t[p]))&&v instanceof l)return v;return new l(!1)}f=d.call(t)}for(y=f.next;!(m=y.call(f)).done;)if("object"==typeof(v=u(f,b,m.value,c))&&v&&v instanceof l)return v;return new l(!1)}).stop=function(t){return new l(!0,t)}},function(t,e,r){var n={};n[r(2)("toStringTag")]="z",t.exports="[object z]"===String(n)},function(t,e,r){var n=r(2)("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[n]=function(){return this},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var s={};s[n]=function(){return{next:function(){return{done:r=!0}}}},t(s)}catch(t){}return r}},function(t,e,r){var n,i,s,o,a,u,l,c,h=r(1),f=r(28).f,d=r(9),p=r(48).set,g=r(50),v=h.MutationObserver||h.WebKitMutationObserver,y=h.process,m=h.Promise,b="process"==d(y),w=f(h,"queueMicrotask"),E=w&&w.value;E||(n=function(){var t,e;for(b&&(t=y.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?o():s=void 0,t}}s=void 0,t&&t.enter()},b?o=function(){y.nextTick(n)}:v&&!g?(a=!0,u=document.createTextNode(""),new v(n).observe(u,{characterData:!0}),o=function(){u.data=a=!a}):m&&m.resolve?(l=m.resolve(void 0),c=l.then,o=function(){c.call(l,n)}):o=function(){p.call(h,n)}),t.exports=E||function(t){var e={fn:t,next:void 0};s&&(s.next=e),i||(i=e,o()),s=e}},function(t,e,r){var n=r(3),i=r(7),s=r(52);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=s.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var n=r(1);t.exports=function(t,e){var r=n.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){var n,i,s=r(1),o=r(51),a=s.process,u=a&&a.versions,l=u&&u.v8;l?i=(n=l.split("."))[0]+n[1]:o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(i=n[1]),t.exports=i&&+i},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){var n=r(2),i=r(41),s=r(10),o=n("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),t.exports=function(t){a[o][t]=!0}},function(t,e,r){var n=r(4);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,r){var n=r(7);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},,,,,function(t,e,r){"use strict";var n=r(11),i=r(3),s=r(4),o=r(60),a=RegExp.prototype,u=a.toString,l=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),c="toString"!=u.name;(l||c)&&n(RegExp.prototype,"toString",(function(){var t=i(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in a)?o.call(t):r)}),{unsafe:!0})},,function(t,e){},function(t,e,r){"use strict";var n=r(56),i=r(116),s=r(3),o=r(12),a=r(77),u=r(58),l=r(22),c=r(57),h=r(27),f=r(4),d=[].push,p=Math.min,g=!f((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(o(this)),s=void 0===r?4294967295:r>>>0;if(0===s)return[];if(void 0===t)return[n];if(!i(t))return e.call(n,t,s);for(var a,u,l,c=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,g=new RegExp(t.source,f+"g");(a=h.call(g,n))&&!((u=g.lastIndex)>p&&(c.push(n.slice(p,a.index)),a.length>1&&a.index<n.length&&d.apply(c,a.slice(1)),l=a[0].length,p=u,c.length>=s));)g.lastIndex===a.index&&g.lastIndex++;return p===n.length?!l&&g.test("")||c.push(""):c.push(n.slice(p)),c.length>s?c.slice(0,s):c}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var i=o(this),s=null==e?void 0:e[t];return void 0!==s?s.call(e,i,r):n.call(String(i),e,r)},function(t,i){var o=r(n,t,this,i,n!==e);if(o.done)return o.value;var h=s(t),f=String(this),d=a(h,RegExp),v=h.unicode,y=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(g?"y":"g"),m=new d(g?h:"^(?:"+h.source+")",y),b=void 0===i?4294967295:i>>>0;if(0===b)return[];if(0===f.length)return null===c(m,f)?[f]:[];for(var w=0,E=0,k=[];E<f.length;){m.lastIndex=g?E:0;var S,T=c(m,g?f:f.slice(E));if(null===T||(S=p(l(m.lastIndex+(g?0:E)),f.length))===w)E=u(f,E,v);else{if(k.push(f.slice(w,E)),k.length===b)return k;for(var x=1;x<=T.length-1;x++)if(k.push(T[x]),k.length===b)return k;E=w=S}}return k.push(f.slice(w)),k}]}),!g)},function(t,e,r){var n=r(7),i=r(9),s=r(2)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},function(t,e,r){"use strict";var n=r(23),i=r(18),s=r(118),o=r(119),a=r(4),u=1..toFixed,l=Math.floor,c=function(t,e,r){return 0===e?r:e%2==1?c(t,e-1,r*t):c(t*t,e/2,r)};n({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){u.call({})}))},{toFixed:function(t){var e,r,n,a,u=s(this),h=i(t),f=[0,0,0,0,0,0],d="",p="0",g=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*f[r],f[r]=n%1e7,n=l(n/1e7)},v=function(t){for(var e=6,r=0;--e>=0;)r+=f[e],f[e]=l(r/t),r=r%t*1e7},y=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==f[t]){var r=String(f[t]);e=""===e?r:e+o.call("0",7-r.length)+r}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(u*c(2,69,1))-69)<0?u*c(2,-e,1):u/c(2,e,1),r*=4503599627370496,(e=52-e)>0){for(g(0,r),n=h;n>=7;)g(1e7,0),n-=7;for(g(c(10,n,1),0),n=e-1;n>=23;)v(1<<23),n-=23;v(1<<n),g(1,1),v(2),p=y()}else g(0,r),g(1<<-e,0),p=y()+o.call("0",h);return p=h>0?d+((a=p.length)<=h?"0."+o.call("0",h-a)+p:p.slice(0,a-h)+"."+p.slice(a-h)):d+p}})},function(t,e,r){var n=r(9);t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,r){"use strict";var n=r(18),i=r(12);t.exports="".repeat||function(t){var e=String(i(this)),r="",s=n(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(r+=e);return r}},,function(t,e,r){(function(n){var i,s,o;
/**
 * @license protobuf.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/protobuf.js for details
 */s=[r(133)],void 0===(o="function"==typeof(i=function(t,e){"use strict";var i,s={};return s.ByteBuffer=t,s.Long=t.Long||null,s.VERSION="5.0.3",s.WIRE_TYPES={},s.WIRE_TYPES.VARINT=0,s.WIRE_TYPES.BITS64=1,s.WIRE_TYPES.LDELIM=2,s.WIRE_TYPES.STARTGROUP=3,s.WIRE_TYPES.ENDGROUP=4,s.WIRE_TYPES.BITS32=5,s.PACKABLE_WIRE_TYPES=[s.WIRE_TYPES.VARINT,s.WIRE_TYPES.BITS64,s.WIRE_TYPES.BITS32],s.TYPES={int32:{name:"int32",wireType:s.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:s.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:s.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:s.WIRE_TYPES.VARINT,defaultValue:s.Long?s.Long.ZERO:void 0},uint64:{name:"uint64",wireType:s.WIRE_TYPES.VARINT,defaultValue:s.Long?s.Long.UZERO:void 0},sint64:{name:"sint64",wireType:s.WIRE_TYPES.VARINT,defaultValue:s.Long?s.Long.ZERO:void 0},bool:{name:"bool",wireType:s.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:s.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:s.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:s.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:s.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:s.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:s.WIRE_TYPES.BITS64,defaultValue:s.Long?s.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:s.WIRE_TYPES.BITS64,defaultValue:s.Long?s.Long.ZERO:void 0},float:{name:"float",wireType:s.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:s.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:s.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:s.WIRE_TYPES.STARTGROUP,defaultValue:null}},s.MAP_KEY_TYPES=[s.TYPES.int32,s.TYPES.sint32,s.TYPES.sfixed32,s.TYPES.uint32,s.TYPES.fixed32,s.TYPES.int64,s.TYPES.sint64,s.TYPES.sfixed64,s.TYPES.uint64,s.TYPES.fixed64,s.TYPES.bool,s.TYPES.string,s.TYPES.bytes],s.ID_MIN=1,s.ID_MAX=536870911,s.convertFieldsToCamelCase=!1,s.populateAccessors=!0,s.populateDefaults=!0,s.Util=((i={}).IS_NODE=!("object"!=typeof n||n+""!="[object process]"||n.browser),i.XHR=function(){for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=null,r=0;r<t.length;r++){try{e=t[r]()}catch(t){continue}break}if(!e)throw Error("XMLHttpRequest is not supported");return e},i.fetch=function(t,e){if(e&&"function"!=typeof e&&(e=null),i.IS_NODE){var n=r(135);if(e)n.readFile(t,(function(t,r){e(t?null:""+r)}));else try{return n.readFileSync(t)}catch(t){return null}}else{var s=i.XHR();if(s.open("GET",t,!!e),s.setRequestHeader("Accept","text/plain"),"function"==typeof s.overrideMimeType&&s.overrideMimeType("text/plain"),!e)return s.send(null),200==s.status||0==s.status&&"string"==typeof s.responseText?s.responseText:null;if(s.onreadystatechange=function(){4==s.readyState&&(200==s.status||0==s.status&&"string"==typeof s.responseText?e(s.responseText):e(null))},4==s.readyState)return;s.send(null)}},i.toCamelCase=function(t){return t.replace(/_([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}))},i),s.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,FQTYPEREF:/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},s.DotProto=function(t,e){var r={},n=function(t){this.source=t+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},i=n.prototype;i._readString=function(){var t='"'===this._stringOpen?e.STRING_DQ:e.STRING_SQ;t.lastIndex=this.index-1;var r=t.exec(this.source);if(!r)throw Error("unterminated string");return this.index=t.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,r[1]},i.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var t,r,n;do{for(t=!1;e.WHITESPACE.test(n=this.source.charAt(this.index));)if("\n"===n&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,t=!0}else{if("*"!==(n=this.source.charAt(this.index)))return"/";do{if("\n"===n&&++this.line,++this.index===this.source.length)return null;r=n,n=this.source.charAt(this.index)}while("*"!==r||"/"!==n);++this.index,t=!0}}while(t);if(this.index===this.source.length)return null;var i=this.index;if(e.DELIM.lastIndex=0,!e.DELIM.test(this.source.charAt(i++)))for(;i<this.source.length&&!e.DELIM.test(this.source.charAt(i));)++i;var s=this.source.substring(this.index,this.index=i);return'"'!==s&&"'"!==s||(this._stringOpen=s),s},i.peek=function(){if(0===this.stack.length){var t=this.next();if(null===t)return null;this.stack.push(t)}return this.stack[0]},i.skip=function(t){var e=this.next();if(e!==t)throw Error("illegal '"+e+"', '"+t+"' expected")},i.omit=function(t){return this.peek()===t&&(this.next(),!0)},i.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},r.Tokenizer=n;var s=function(t){this.tn=new n(t),this.proto3=!1},o=s.prototype;function a(t,r){var n=-1,i=1;if("-"==t.charAt(0)&&(i=-1,t=t.substring(1)),e.NUMBER_DEC.test(t))n=parseInt(t);else if(e.NUMBER_HEX.test(t))n=parseInt(t.substring(2),16);else{if(!e.NUMBER_OCT.test(t))throw Error("illegal id value: "+(i<0?"-":"")+t);n=parseInt(t.substring(1),8)}if(n=i*n|0,!r&&n<0)throw Error("illegal id value: "+(i<0?"-":"")+t);return n}function u(t){var r=1;if("-"==t.charAt(0)&&(r=-1,t=t.substring(1)),e.NUMBER_DEC.test(t))return r*parseInt(t,10);if(e.NUMBER_HEX.test(t))return r*parseInt(t.substring(2),16);if(e.NUMBER_OCT.test(t))return r*parseInt(t.substring(1),8);if("inf"===t)return r*(1/0);if("nan"===t)return NaN;if(e.NUMBER_FLT.test(t))return r*parseFloat(t);throw Error("illegal number value: "+(r<0?"-":"")+t)}function l(t,e,r){void 0===t[e]?t[e]=r:(Array.isArray(t[e])||(t[e]=[t[e]]),t[e].push(r))}return o.parse=function(){var t,r,n={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;t=this.tn.next();)switch(t){case"package":if(!i||null!==n.package)throw Error("unexpected 'package'");if(t=this.tn.next(),!e.TYPEREF.test(t))throw Error("illegal package name: "+t);this.tn.skip(";"),n.package=t;break;case"import":if(!i)throw Error("unexpected 'import'");("public"===(t=this.tn.peek())||(r="weak"===t))&&this.tn.next(),t=this._readString(),this.tn.skip(";"),r||n.imports.push(t);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(n,null),i=!1;break;case"enum":this._parseEnum(n),i=!1;break;case"option":this._parseOption(n);break;case"service":this._parseService(n);break;case"extend":this._parseExtend(n);break;default:throw Error("unexpected '"+t+"'")}}catch(t){throw t.message="Parse error at line "+this.tn.line+": "+t.message,t}return delete n.name,n},s.parse=function(t){return new s(t).parse()},o._readString=function(){var t,e,r="";do{if("'"!==(e=this.tn.next())&&'"'!==e)throw Error("illegal string delimiter: "+e);r+=this.tn.next(),this.tn.skip(e),t=this.tn.peek()}while('"'===t||'"'===t);return r},o._readValue=function(t){var r=this.tn.peek();if('"'===r||"'"===r)return this._readString();if(this.tn.next(),e.NUMBER.test(r))return u(r);if(e.BOOL.test(r))return"true"===r.toLowerCase();if(t&&e.TYPEREF.test(r))return r;throw Error("illegal value: "+r)},o._parseOption=function(t,r){var n=this.tn.next(),i=!1;if("("===n&&(i=!0,n=this.tn.next()),!e.TYPEREF.test(n))throw Error("illegal option name: "+n);var s=n;i&&(this.tn.skip(")"),s="("+s+")",n=this.tn.peek(),e.FQTYPEREF.test(n)&&(s+=n,this.tn.next())),this.tn.skip("="),this._parseOptionValue(t,s),r||this.tn.skip(";")},o._parseOptionValue=function(t,r){var n=this.tn.peek();if("{"!==n)l(t.options,r,this._readValue(!0));else for(this.tn.skip("{");"}"!==(n=this.tn.next());){if(!e.NAME.test(n))throw Error("illegal option name: "+r+"."+n);this.tn.omit(":")?l(t.options,r+"."+n,this._readValue(!0)):this._parseOptionValue(t,r+"."+n)}},o._parseService=function(t){var r=this.tn.next();if(!e.NAME.test(r))throw Error("illegal service name at line "+this.tn.line+": "+r);var n={name:r,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(r=this.tn.next());)if("option"===r)this._parseOption(n);else{if("rpc"!==r)throw Error("illegal service token: "+r);this._parseServiceRPC(n)}this.tn.omit(";"),t.services.push(n)},o._parseServiceRPC=function(t){var r=this.tn.next();if(!e.NAME.test(r))throw Error("illegal rpc service method name: "+r);var n=r,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(r=this.tn.next()).toLowerCase()&&(i.request_stream=!0,r=this.tn.next()),!e.TYPEREF.test(r))throw Error("illegal rpc service request type: "+r);if(i.request=r,this.tn.skip(")"),"returns"!==(r=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+r);if(this.tn.skip("("),"stream"===(r=this.tn.next()).toLowerCase()&&(i.response_stream=!0,r=this.tn.next()),i.response=r,this.tn.skip(")"),"{"===(r=this.tn.peek())){for(this.tn.next();"}"!==(r=this.tn.next());){if("option"!==r)throw Error("illegal rpc service token: "+r);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===t.rpc&&(t.rpc={}),t.rpc[n]=i},o._parseMessage=function(t,r){var n=!!r,i=this.tn.next(),s={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!e.NAME.test(i))throw Error("illegal "+(n?"group":"message")+" name: "+i);for(s.name=i,n&&(this.tn.skip("="),r.id=a(this.tn.next()),s.isGroup=!0),"["===(i=this.tn.peek())&&r&&this._parseFieldOptions(r),this.tn.skip("{");"}"!==(i=this.tn.next());)if(e.RULE.test(i))this._parseMessageField(s,i);else if("oneof"===i)this._parseMessageOneOf(s);else if("enum"===i)this._parseEnum(s);else if("message"===i)this._parseMessage(s);else if("option"===i)this._parseOption(s);else if("service"===i)this._parseService(s);else if("extensions"===i)s.hasOwnProperty("extensions")?s.extensions=s.extensions.concat(this._parseExtensionRanges()):s.extensions=this._parseExtensionRanges();else if("reserved"===i)this._parseIgnored();else if("extend"===i)this._parseExtend(s);else{if(!e.TYPEREF.test(i))throw Error("illegal message token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(s,"optional",i)}return this.tn.omit(";"),t.messages.push(s),s},o._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},o._parseMessageField=function(t,r,n){if(!e.RULE.test(r))throw Error("illegal message field rule: "+r);var i,s={rule:r,type:"",name:"",options:{},id:0};if("map"===r){if(n)throw Error("illegal type: "+n);if(this.tn.skip("<"),i=this.tn.next(),!e.TYPE.test(i)&&!e.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(s.keytype=i,this.tn.skip(","),i=this.tn.next(),!e.TYPE.test(i)&&!e.TYPEREF.test(i))throw Error("illegal message field: "+i);if(s.type=i,this.tn.skip(">"),i=this.tn.next(),!e.NAME.test(i))throw Error("illegal message field name: "+i);s.name=i,this.tn.skip("="),s.id=a(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(";")}else if("group"===(n=void 0!==n?n:this.tn.next())){var o=this._parseMessage(t,s);if(!/^[A-Z]/.test(o.name))throw Error("illegal group name: "+o.name);s.type=o.name,s.name=o.name.toLowerCase(),this.tn.omit(";")}else{if(!e.TYPE.test(n)&&!e.TYPEREF.test(n))throw Error("illegal message field type: "+n);if(s.type=n,i=this.tn.next(),!e.NAME.test(i))throw Error("illegal message field name: "+i);s.name=i,this.tn.skip("="),s.id=a(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(";")}return t.fields.push(s),s},o._parseMessageOneOf=function(t){var r=this.tn.next();if(!e.NAME.test(r))throw Error("illegal oneof name: "+r);var n,i=r,s=[];for(this.tn.skip("{");"}"!==(r=this.tn.next());)(n=this._parseMessageField(t,"optional",r)).oneof=i,s.push(n.id);this.tn.omit(";"),t.oneofs[i]=s},o._parseFieldOptions=function(t){this.tn.skip("[");for(var e=!0;"]"!==this.tn.peek();)e||this.tn.skip(","),this._parseOption(t,!0),e=!1;this.tn.next()},o._parseEnum=function(t){var r={name:"",values:[],options:{}},n=this.tn.next();if(!e.NAME.test(n))throw Error("illegal name: "+n);for(r.name=n,this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(r);else{if(!e.NAME.test(n))throw Error("illegal name: "+n);this.tn.skip("=");var i={name:n,id:a(this.tn.next(),!0)};"["===(n=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),r.values.push(i)}this.tn.omit(";"),t.enums.push(r)},o._parseExtensionRanges=function(){var e,r,n,i=[];do{for(r=[];;){switch(e=this.tn.next()){case"min":n=t.ID_MIN;break;case"max":n=t.ID_MAX;break;default:n=u(e)}if(r.push(n),2===r.length)break;if("to"!==this.tn.peek()){r.push(n);break}this.tn.next()}i.push(r)}while(this.tn.omit(","));return this.tn.skip(";"),i},o._parseExtend=function(t){var r=this.tn.next();if(!e.TYPEREF.test(r))throw Error("illegal extend reference: "+r);var n={ref:r,fields:[]};for(this.tn.skip("{");"}"!==(r=this.tn.next());)if(e.RULE.test(r))this._parseMessageField(n,r);else{if(!e.TYPEREF.test(r))throw Error("illegal extend token: "+r);if(!this.proto3)throw Error("illegal field rule: "+r);this._parseMessageField(n,"optional",r)}return this.tn.omit(";"),t.messages.push(n),n},o.toString=function(){return"Parser at line "+this.tn.line},r.Parser=s,r}(s,s.Lang),s.Reflect=function(e){var r={},n=function(t,e,r){this.builder=t,this.parent=e,this.name=r,this.className},i=n.prototype;i.fqn=function(){for(var t=this.name,e=this;null!=(e=e.parent);)t=e.name+"."+t;return t},i.toString=function(t){return(t?this.className+" ":"")+this.fqn()},i.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},r.T=n;var s=function(t,e,r,i,s){n.call(this,t,e,r),this.className="Namespace",this.children=[],this.options=i||{},this.syntax=s||"proto2"},o=s.prototype=Object.create(n.prototype);o.getChildren=function(t){if(null==(t=t||null))return this.children.slice();for(var e=[],r=0,n=this.children.length;r<n;++r)this.children[r]instanceof t&&e.push(this.children[r]);return e},o.addChild=function(t){var e;if(e=this.getChild(t.name))if(e instanceof c.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName))e.name=e.originalName;else{if(!(t instanceof c.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+t.name);t.name=t.originalName}this.children.push(t)},o.getChild=function(t){for(var e="number"==typeof t?"id":"name",r=0,n=this.children.length;r<n;++r)if(this.children[r][e]===t)return this.children[r];return null},o.resolve=function(t,e){var n,i="string"==typeof t?t.split("."):t,s=this,o=0;if(""===i[o]){for(;null!==s.parent;)s=s.parent;o++}do{do{if(!(s instanceof r.Namespace)){s=null;break}if(!(n=s.getChild(i[o]))||!(n instanceof r.T)||e&&!(n instanceof r.Namespace)){s=null;break}s=n,o++}while(o<i.length);if(null!=s)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=s);return s},o.qn=function(t){var e=[],n=t;do{e.unshift(n.name),n=n.parent}while(null!==n);for(var i=1;i<=e.length;i++){var s=e.slice(e.length-i);if(t===this.resolve(s,t instanceof r.Namespace))return s.join(".")}return t.fqn()},o.build=function(){for(var t,e={},r=this.children,n=0,i=r.length;n<i;++n)(t=r[n])instanceof s&&(e[t.name]=t.build());return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt()}),e},o.buildOpt=function(){for(var t={},e=Object.keys(this.options),r=0,n=e.length;r<n;++r){var i=e[r],s=this.options[e[r]];t[i]=s}return t},o.getOption=function(t){return void 0===t?this.options:void 0!==this.options[t]?this.options[t]:null},r.Namespace=s;var a=function(t,r,n,i,s){if(this.type=t,this.resolvedType=r,this.isMapKey=n,this.syntax=i,this.name=s,n&&e.MAP_KEY_TYPES.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},u=a.prototype;function l(t,r){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new e.Long(t.low,t.high,void 0===r?t.unsigned:r);if("string"==typeof t)return e.Long.fromString(t,r||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,r||!1);throw Error("not convertible to Long")}a.defaultFieldValue=function(r){if("string"==typeof r&&(r=e.TYPES[r]),void 0===r.defaultValue)throw Error("default value for type "+r.name+" is not supported");return r==e.TYPES.bytes?new t(0):r.defaultValue},u.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},u.verifyValue=function(r){var n=this;function i(t,e){throw Error("Illegal value for "+n.toString(!0)+" of type "+n.type.name+": "+t+" ("+e+")")}switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof r||r==r&&r%1!=0)&&i(typeof r,"not an integer"),r>4294967295?0|r:r;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof r||r==r&&r%1!=0)&&i(typeof r,"not an integer"),r<0?r>>>0:r;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return l(r,!1)}catch(t){i(typeof r,t.message)}else i(typeof r,"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return l(r,!0)}catch(t){i(typeof r,t.message)}else i(typeof r,"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof r&&i(typeof r,"not a boolean"),r;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof r&&i(typeof r,"not a number"),r;case e.TYPES.string:return"string"==typeof r||r&&r instanceof String||i(typeof r,"not a string"),""+r;case e.TYPES.bytes:return t.isByteBuffer(r)?r:t.wrap(r,"base64");case e.TYPES.enum:var s=this.resolvedType.getChildren(e.Reflect.Enum.Value);for(a=0;a<s.length;a++){if(s[a].name==r)return s[a].id;if(s[a].id==r)return s[a].id}if("proto3"===this.syntax)return("number"!=typeof r||r==r&&r%1!=0)&&i(typeof r,"not an integer"),(r>4294967295||r<0)&&i(typeof r,"not in range for uint32"),r;i(r,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(r&&"object"==typeof r||i(typeof r,"object expected"),r instanceof this.resolvedType.clazz)return r;if(r instanceof e.Builder.Message){var o={};for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);r=o}return new this.resolvedType.clazz(r)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+r+" (undefined type "+this.type+")")},u.calculateLength=function(r,n){if(null===n)return 0;var i;switch(this.type){case e.TYPES.int32:return n<0?t.calculateVarint64(n):t.calculateVarint32(n);case e.TYPES.uint32:return t.calculateVarint32(n);case e.TYPES.sint32:return t.calculateVarint32(t.zigZagEncode32(n));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return t.calculateVarint64(n);case e.TYPES.sint64:return t.calculateVarint64(t.zigZagEncode64(n));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return t.calculateVarint32(n);case e.TYPES.double:return 8;case e.TYPES.string:return i=t.calculateUTF8Bytes(n),t.calculateVarint32(i)+i;case e.TYPES.bytes:if(n.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.remaining()+" bytes remaining");return t.calculateVarint32(n.remaining())+n.remaining();case e.TYPES.message:return i=this.resolvedType.calculate(n),t.calculateVarint32(i)+i;case e.TYPES.group:return(i=this.resolvedType.calculate(n))+t.calculateVarint32(r<<3|e.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")},u.encodeValue=function(r,n,i){if(null===n)return i;switch(this.type){case e.TYPES.int32:n<0?i.writeVarint64(n):i.writeVarint32(n);break;case e.TYPES.uint32:i.writeVarint32(n);break;case e.TYPES.sint32:i.writeVarint32ZigZag(n);break;case e.TYPES.fixed32:i.writeUint32(n);break;case e.TYPES.sfixed32:i.writeInt32(n);break;case e.TYPES.int64:case e.TYPES.uint64:i.writeVarint64(n);break;case e.TYPES.sint64:i.writeVarint64ZigZag(n);break;case e.TYPES.fixed64:i.writeUint64(n);break;case e.TYPES.sfixed64:i.writeInt64(n);break;case e.TYPES.bool:"string"==typeof n?i.writeVarint32("false"===n.toLowerCase()?0:!!n):i.writeVarint32(n?1:0);break;case e.TYPES.enum:i.writeVarint32(n);break;case e.TYPES.float:i.writeFloat32(n);break;case e.TYPES.double:i.writeFloat64(n);break;case e.TYPES.string:i.writeVString(n);break;case e.TYPES.bytes:if(n.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.remaining()+" bytes remaining");var s=n.offset;i.writeVarint32(n.remaining()),i.append(n),n.offset=s;break;case e.TYPES.message:var o=(new t).LE();this.resolvedType.encode(n,o),i.writeVarint32(o.offset),i.append(o.flip());break;case e.TYPES.group:this.resolvedType.encode(n,i),i.writeVarint32(r<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")}return i},u.decode=function(t,r,n){if(r!=this.type.wireType)throw Error("Unexpected wire type for element");var i,s;switch(this.type){case e.TYPES.int32:return 0|t.readVarint32();case e.TYPES.uint32:return t.readVarint32()>>>0;case e.TYPES.sint32:return 0|t.readVarint32ZigZag();case e.TYPES.fixed32:return t.readUint32()>>>0;case e.TYPES.sfixed32:return 0|t.readInt32();case e.TYPES.int64:return t.readVarint64();case e.TYPES.uint64:return t.readVarint64().toUnsigned();case e.TYPES.sint64:return t.readVarint64ZigZag();case e.TYPES.fixed64:return t.readUint64();case e.TYPES.sfixed64:return t.readInt64();case e.TYPES.bool:return!!t.readVarint32();case e.TYPES.enum:return t.readVarint32();case e.TYPES.float:return t.readFloat();case e.TYPES.double:return t.readDouble();case e.TYPES.string:return t.readVString();case e.TYPES.bytes:if(s=t.readVarint32(),t.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+t.remaining());return(i=t.clone()).limit=i.offset+s,t.offset+=s,i;case e.TYPES.message:return s=t.readVarint32(),this.resolvedType.decode(t,s);case e.TYPES.group:return this.resolvedType.decode(t,-1,n)}throw Error("[INTERNAL] Illegal decode type")},u.valueFromString=function(r){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return this.verifyValue(parseInt(r));case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return this.verifyValue(r);case e.TYPES.bool:return"true"===r;case e.TYPES.string:return this.verifyValue(r);case e.TYPES.bytes:return t.fromBinary(r)}},u.valueToString=function(t){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===e.TYPES.bytes?t.toString("binary"):t.toString()},r.Element=a;var c=function(t,e,r,n,i,o){s.call(this,t,e,r,n,o),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},h=c.prototype=Object.create(s.prototype);function f(t,r){var n=r.readVarint32(),i=7&n,s=n>>>3;switch(i){case e.WIRE_TYPES.VARINT:do{n=r.readUint8()}while(128==(128&n));break;case e.WIRE_TYPES.BITS64:r.offset+=8;break;case e.WIRE_TYPES.LDELIM:n=r.readVarint32(),r.offset+=n;break;case e.WIRE_TYPES.STARTGROUP:f(s,r);break;case e.WIRE_TYPES.ENDGROUP:if(s===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+s+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:r.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+i)}return!0}h.build=function(r){if(this.clazz&&!r)return this.clazz;var n=function(e,r){var n=r.getChildren(e.Reflect.Message.Field),i=r.getChildren(e.Reflect.Message.OneOf),s=function(o,a){e.Builder.Message.call(this);for(var u=0,l=i.length;u<l;++u)this[i[u].name]=null;for(u=0,l=n.length;u<l;++u){var c=n[u];this[c.name]=c.repeated?[]:c.map?new e.Map(c):null,!c.required&&"proto3"!==r.syntax||null===c.defaultValue||(this[c.name]=c.defaultValue)}var h;if(arguments.length>0)if(1!==arguments.length||null===o||"object"!=typeof o||!("function"!=typeof o.encode||o instanceof s)||Array.isArray(o)||o instanceof e.Map||t.isByteBuffer(o)||o instanceof ArrayBuffer||e.Long&&o instanceof e.Long)for(u=0,l=arguments.length;u<l;++u)void 0!==(h=arguments[u])&&this.$set(n[u].name,h);else this.$set(o)},o=s.prototype=Object.create(e.Builder.Message.prototype);o.add=function(t,n,i){var s=r._fieldsByName[t];if(!i){if(!s)throw Error(this+"#"+t+" is undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+t+" is not a repeated field");n=s.verifyValue(n,!0)}return null===this[t]&&(this[t]=[]),this[t].push(n),this},o.$add=o.add,o.set=function(t,n,i){if(t&&"object"==typeof t){for(var s in i=n,t)t.hasOwnProperty(s)&&void 0!==(n=t[s])&&void 0===r._oneofsByName[s]&&this.$set(s,n,i);return this}var o=r._fieldsByName[t];if(i)this[t]=n;else{if(!o)throw Error(this+"#"+t+" is not a field: undefined");if(!(o instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));this[o.name]=n=o.verifyValue(n)}if(o&&o.oneof){var a=this[o.oneof.name];null!==n?(null!==a&&a!==o.name&&(this[a]=null),this[o.oneof.name]=o.name):a===t&&(this[o.oneof.name]=null)}return this},o.$set=o.set,o.get=function(t,n){if(n)return this[t];var i=r._fieldsByName[t];if(!(i&&i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+i.toString(!0));return this[i.name]},o.$get=o.get;for(var a=0;a<n.length;a++){var u=n[a];u instanceof e.Reflect.Message.ExtensionField||r.builder.options.populateAccessors&&function(t){var e=t.originalName.replace(/(_[a-zA-Z])/g,(function(t){return t.toUpperCase().replace("_","")}));e=e.substring(0,1).toUpperCase()+e.substring(1);var n=t.originalName.replace(/([A-Z])/g,(function(t){return"_"+t})),i=function(e,r){return this[t.name]=r?e:t.verifyValue(e),this},s=function(){return this[t.name]};null===r.getChild("set"+e)&&(o["set"+e]=i),null===r.getChild("set_"+n)&&(o["set_"+n]=i),null===r.getChild("get"+e)&&(o["get"+e]=s),null===r.getChild("get_"+n)&&(o["get_"+n]=s)}(u)}function l(r,n,i,s){if(null===r||"object"!=typeof r){if(s&&s instanceof e.Reflect.Enum){var o=e.Reflect.Enum.getName(s.object,r);if(null!==o)return o}return r}if(t.isByteBuffer(r))return n?r.toBase64():r.toBuffer();if(e.Long.isLong(r))return i?r.toString():e.Long.fromValue(r);var a;if(Array.isArray(r))return a=[],r.forEach((function(t,e){a[e]=l(t,n,i,s)})),a;if(a={},r instanceof e.Map){for(var u=r.entries(),c=u.next();!c.done;c=u.next())a[r.keyElem.valueToString(c.value[0])]=l(c.value[1],n,i,r.valueElem.resolvedType);return a}var h=r.$type,f=void 0;for(var d in r)r.hasOwnProperty(d)&&(h&&(f=h.getChild(d))?a[d]=l(r[d],n,i,f.resolvedType):a[d]=l(r[d],n,i));return a}return o.encode=function(e,n){"boolean"==typeof e&&(n=e,e=void 0);var i=!1;e||(e=new t,i=!0);var s=e.littleEndian;try{return r.encode(this,e.LE(),n),(i?e.flip():e).LE(s)}catch(t){throw e.LE(s),t}},s.encode=function(t,e,r){return new s(t).encode(e,r)},o.calculate=function(){return r.calculate(this)},o.encodeDelimited=function(e,n){var i=!1;e||(e=new t,i=!0);var s=(new t).LE();return r.encode(this,s,n).flip(),e.writeVarint32(s.remaining()),e.append(s),i?e.flip():e},o.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toArrayBuffer()),t}},o.toArrayBuffer=o.encodeAB,o.encodeNB=function(){try{return this.encode().toBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBuffer()),t}},o.toBuffer=o.encodeNB,o.encode64=function(){try{return this.encode().toBase64()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBase64()),t}},o.toBase64=o.encode64,o.encodeHex=function(){try{return this.encode().toHex()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toHex()),t}},o.toHex=o.encodeHex,o.toRaw=function(t,e){return l(this,!!t,!!e,this.$type)},o.encodeJSON=function(){return JSON.stringify(l(this,!0,!0,this.$type))},s.decode=function(e,n,i){"string"==typeof n&&(i=n,n=-1),"string"==typeof e?e=t.wrap(e,i||"base64"):t.isByteBuffer(e)||(e=t.wrap(e));var s=e.littleEndian;try{var o=r.decode(e.LE(),n);return e.LE(s),o}catch(t){throw e.LE(s),t}},s.decodeDelimited=function(e,n){if("string"==typeof e?e=t.wrap(e,n||"base64"):t.isByteBuffer(e)||(e=t.wrap(e)),e.remaining()<1)return null;var i=e.offset,s=e.readVarint32();if(e.remaining()<s)return e.offset=i,null;try{var o=r.decode(e.slice(e.offset,e.offset+s).LE());return e.offset+=s,o}catch(t){throw e.offset+=s,t}},s.decode64=function(t){return s.decode(t,"base64")},s.decodeHex=function(t){return s.decode(t,"hex")},s.decodeJSON=function(t){return new s(JSON.parse(t))},o.toString=function(){return r.toString()},Object.defineProperty&&(Object.defineProperty(s,"$options",{value:r.buildOpt()}),Object.defineProperty(o,"$options",{value:s.$options}),Object.defineProperty(s,"$type",{value:r}),Object.defineProperty(o,"$type",{value:r})),s}(e,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var i,s=0,o=this.children.length;s<o;s++)if((i=this.children[s])instanceof v||i instanceof c||i instanceof b){if(n.hasOwnProperty(i.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i.toString(!0)+" cannot override static property '"+i.name+"'");n[i.name]=i.build()}else if(i instanceof c.Field)i.build(),this._fields.push(i),this._fieldsById[i.id]=i,this._fieldsByName[i.name]=i;else if(i instanceof c.OneOf)this._oneofsByName[i.name]=i;else if(!(i instanceof c.OneOf||i instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[s].toString(!0));return this.clazz=n},h.encode=function(t,e,r){for(var n,i,s=null,o=0,a=this._fields.length;o<a;++o)i=t[(n=this._fields[o]).name],n.required&&null===i?null===s&&(s=n):n.encode(r?i:n.verifyValue(i),e,t);if(null!==s){var u=Error("Missing at least one required field for "+this.toString(!0)+": "+s);throw u.encoded=e,u}return e},h.calculate=function(t){for(var e,r,n=0,i=0,s=this._fields.length;i<s;++i){if(r=t[(e=this._fields[i]).name],e.required&&null===r)throw Error("Missing at least one required field for "+this.toString(!0)+": "+e);n+=e.calculate(r,t)}return n},h.decode=function(t,r,n){"number"!=typeof r&&(r=-1);for(var i,s,o,a,u=t.offset,l=new this.clazz;t.offset<u+r||-1===r&&t.remaining()>0;){if(o=(i=t.readVarint32())>>>3,(s=7&i)===e.WIRE_TYPES.ENDGROUP){if(o!==n)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+o+" ("+(n?n+" expected":"not a group")+")");break}if(a=this._fieldsById[o]){if(a.repeated&&!a.options.packed)l[a.name].push(a.decode(s,t));else if(a.map){var c=a.decode(s,t);l[a.name].set(c[0],c[1])}else if(l[a.name]=a.decode(s,t),a.oneof){var h=l[a.oneof.name];null!==h&&h!==a.name&&(l[h]=null),l[a.oneof.name]=a.name}}else switch(s){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:var d=t.readVarint32();t.offset+=d;break;case e.WIRE_TYPES.STARTGROUP:for(;f(o,t););break;default:throw Error("Illegal wire type for unknown field "+o+" in "+this.toString(!0)+"#decode: "+s)}}for(var p=0,g=this._fields.length;p<g;++p)if(null===l[(a=this._fields[p]).name])if("proto3"===this.syntax)l[a.name]=a.defaultValue;else{if(a.required){var v=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw v.decoded=l,v}e.populateDefaults&&null!==a.defaultValue&&(l[a.name]=a.defaultValue)}return l},r.Message=c;var d=function(t,r,i,s,o,a,u,l,h,f){n.call(this,t,r,a),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=s||null,this.type=o,this.resolvedType=null,this.id=u,this.options=l||{},this.defaultValue=null,this.oneof=h||null,this.syntax=f||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof c.ExtensionField||(this.name=e.Util.toCamelCase(this.name))},p=d.prototype=Object.create(n.prototype);p.build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},p.verifyValue=function(t,r){r=r||!1;var n,i=this;function s(t,e){throw Error("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+t+" ("+e+")")}if(null===t)return this.required&&s(typeof t,"required"),"proto3"===this.syntax&&this.type!==e.TYPES.message&&s(typeof t,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!r){Array.isArray(t)||(t=[t]);var o=[];for(n=0;n<t.length;n++)o.push(this.element.verifyValue(t[n]));return o}return this.map&&!r?t instanceof e.Map?t:(t instanceof Object||s(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&s(typeof t,"no array expected"),this.element.verifyValue(t))},p.hasWirePresence=function(t,r){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&r[this.oneof.name]===this.name)return!0;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return 0!==t;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return 0!==t.low||0!==t.high;case e.TYPES.bool:return t;case e.TYPES.float:case e.TYPES.double:return 0!==t;case e.TYPES.string:return t.length>0;case e.TYPES.bytes:return t.remaining()>0;case e.TYPES.enum:return 0!==t;case e.TYPES.message:return null!==t;default:return!0}},p.encode=function(r,n,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return n;try{var s;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){n.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),n.ensureCapacity(n.offset+=1);var o=n.offset;for(s=0;s<r.length;s++)this.element.encodeValue(this.id,r[s],n);var a=n.offset-o,u=t.calculateVarint32(a);if(u>1){var l=n.slice(o,n.offset);o+=u-1,n.offset=o,n.append(l)}n.writeVarint32(a,o-u)}else for(s=0;s<r.length;s++)n.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,r[s],n);else this.map?r.forEach((function(r,i,s){var o=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,r);n.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),n.writeVarint32(o),n.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,i,n),n.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,r,n)}),this):this.hasWirePresence(r,i)&&(n.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,r,n))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+t+")")}return n},p.calculate=function(r,n){if(r=this.verifyValue(r),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return 0;var i=0;try{var s,o;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),o=0,s=0;s<r.length;s++)o+=this.element.calculateLength(this.id,r[s]);i+=t.calculateVarint32(o),i+=o}else for(s=0;s<r.length;s++)i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,r[s]);else this.map?r.forEach((function(r,n,s){var o=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,n)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,r);i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),i+=t.calculateVarint32(o),i+=o}),this):this.hasWirePresence(r,n)&&(i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,r))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+t+")")}return i},p.decode=function(t,r,n){var i,s;if(!(!this.map&&t==this.type.wireType||!n&&this.repeated&&this.options.packed&&t==e.WIRE_TYPES.LDELIM||this.map&&t==e.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!n){s=r.readVarint32(),s=r.offset+s;for(var o=[];r.offset<s;)o.push(this.decode(this.type.wireType,r,!0));return o}if(this.map){var u=a.defaultFieldValue(this.keyType);if(i=a.defaultFieldValue(this.type),s=r.readVarint32(),r.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+r.remaining());var l=r.clone();for(l.limit=l.offset+s,r.offset+=s;l.remaining()>0;){var c=l.readVarint32();t=7&c;var h=c>>>3;if(1===h)u=this.keyElement.decode(l,t,h);else{if(2!==h)throw Error("Unexpected tag in map field key/value submessage");i=this.element.decode(l,t,h)}}return[u,i]}return this.element.decode(r,t,this.id)},r.Message.Field=d;var g=function(t,e,r,n,i,s,o){d.call(this,t,e,r,null,n,i,s,o),this.extension};g.prototype=Object.create(d.prototype),r.Message.ExtensionField=g,r.Message.OneOf=function(t,e,r){n.call(this,t,e,r),this.fields=[]};var v=function(t,e,r,n,i){s.call(this,t,e,r,n,i),this.className="Enum",this.object=null};v.getName=function(t,e){for(var r,n=Object.keys(t),i=0;i<n.length;++i)if(t[r=n[i]]===e)return r;return null},(v.prototype=Object.create(s.prototype)).build=function(t){if(this.object&&!t)return this.object;for(var r=new e.Builder.Enum,n=this.getChildren(v.Value),i=0,s=n.length;i<s;++i)r[n[i].name]=n[i].id;return Object.defineProperty&&Object.defineProperty(r,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=r},r.Enum=v;var y=function(t,e,r,i){n.call(this,t,e,r),this.className="Enum.Value",this.id=i};y.prototype=Object.create(n.prototype),r.Enum.Value=y;var m=function(t,e,r,i){n.call(this,t,e,r),this.field=i};m.prototype=Object.create(n.prototype),r.Extension=m;var b=function(t,e,r,n){s.call(this,t,e,r,n),this.className="Service",this.clazz=null};(b.prototype=Object.create(s.prototype)).build=function(r){return this.clazz&&!r?this.clazz:this.clazz=function(e,r){for(var n=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(t,e,r){setTimeout(r.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},i=n.prototype=Object.create(e.Builder.Service.prototype),s=r.getChildren(e.Reflect.Service.RPCMethod),o=0;o<s.length;o++)!function(e){i[e.name]=function(n,i){try{try{n=e.resolvedRequestType.clazz.decode(t.wrap(n))}catch(t){if(!(t instanceof TypeError))throw t}if(null===n||"object"!=typeof n)throw Error("Illegal arguments");n instanceof e.resolvedRequestType.clazz||(n=new e.resolvedRequestType.clazz(n)),this.rpcImpl(e.fqn(),n,(function(t,n){if(t)i(t);else{null===n&&(n="");try{n=e.resolvedResponseType.clazz.decode(n)}catch(t){}n&&n instanceof e.resolvedResponseType.clazz?i(null,n):i(Error("Illegal response type received in service method "+r.name+"#"+e.name))}}))}catch(t){setTimeout(i.bind(this,t),0)}},n[e.name]=function(t,r,i){new n(t)[e.name](r,i)},Object.defineProperty&&(Object.defineProperty(n[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(i[e.name],"$options",{value:n[e.name].$options}))}(s[o]);return Object.defineProperty&&(Object.defineProperty(n,"$options",{value:r.buildOpt()}),Object.defineProperty(i,"$options",{value:n.$options}),Object.defineProperty(n,"$type",{value:r}),Object.defineProperty(i,"$type",{value:r})),n}(e,this)},r.Service=b;var w=function(t,e,r,i){n.call(this,t,e,r),this.className="Service.Method",this.options=i||{}};(w.prototype=Object.create(n.prototype)).buildOpt=o.buildOpt,r.Service.Method=w;var E=function(t,e,r,n,i,s,o,a){w.call(this,t,e,r,a),this.className="Service.RPCMethod",this.requestName=n,this.responseName=i,this.requestStream=s,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null};return E.prototype=Object.create(w.prototype),r.Service.RPCMethod=E,r}(s),s.Builder=function(t,e,n){var i=function(t){this.ns=new n.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=t||{}},s=i.prototype;return i.isMessage=function(t){return"string"==typeof t.name&&void 0===t.values&&void 0===t.rpc},i.isMessageField=function(t){return"string"==typeof t.rule&&"string"==typeof t.name&&"string"==typeof t.type&&void 0!==t.id},i.isEnum=function(t){return"string"==typeof t.name&&!(void 0===t.values||!Array.isArray(t.values)||0===t.values.length)},i.isService=function(t){return!("string"!=typeof t.name||"object"!=typeof t.rpc||!t.rpc)},i.isExtend=function(t){return"string"==typeof t.ref},s.reset=function(){return this.ptr=this.ns,this},s.define=function(t){if("string"!=typeof t||!e.TYPEREF.test(t))throw Error("illegal namespace: "+t);return t.split(".").forEach((function(t){var e=this.ptr.getChild(t);null===e&&this.ptr.addChild(e=new n.Namespace(this,this.ptr,t)),this.ptr=e}),this),this},s.create=function(e){if(!e)return this;if(Array.isArray(e)){if(0===e.length)return this;e=e.slice()}else e=[e];for(var r=[e];r.length>0;){if(e=r.pop(),!Array.isArray(e))throw Error("not a valid namespace: "+JSON.stringify(e));for(;e.length>0;){var s=e.shift();if(i.isMessage(s)){var o=new n.Message(this,this.ptr,s.name,s.options,s.isGroup,s.syntax),a={};s.oneofs&&Object.keys(s.oneofs).forEach((function(t){o.addChild(a[t]=new n.Message.OneOf(this,o,t))}),this),s.fields&&s.fields.forEach((function(t){if(null!==o.getChild(0|t.id))throw Error("duplicate or invalid field id in "+o.name+": "+t.id);if(t.options&&"object"!=typeof t.options)throw Error("illegal field options in "+o.name+"#"+t.name);var e=null;if("string"==typeof t.oneof&&!(e=a[t.oneof]))throw Error("illegal oneof in "+o.name+"#"+t.name+": "+t.oneof);t=new n.Message.Field(this,o,t.rule,t.keytype,t.type,t.name,t.id,t.options,e,s.syntax),e&&e.fields.push(t),o.addChild(t)}),this);var u=[];if(s.enums&&s.enums.forEach((function(t){u.push(t)})),s.messages&&s.messages.forEach((function(t){u.push(t)})),s.services&&s.services.forEach((function(t){u.push(t)})),s.extensions&&("number"==typeof s.extensions[0]?o.extensions=[s.extensions]:o.extensions=s.extensions),this.ptr.addChild(o),u.length>0){r.push(e),e=u,u=null,this.ptr=o,o=null;continue}u=null}else if(i.isEnum(s))o=new n.Enum(this,this.ptr,s.name,s.options,s.syntax),s.values.forEach((function(t){o.addChild(new n.Enum.Value(this,o,t.name,t.id))}),this),this.ptr.addChild(o);else if(i.isService(s))o=new n.Service(this,this.ptr,s.name,s.options),Object.keys(s.rpc).forEach((function(t){var e=s.rpc[t];o.addChild(new n.Service.RPCMethod(this,o,t,e.request,e.response,!!e.request_stream,!!e.response_stream,e.options))}),this),this.ptr.addChild(o);else{if(!i.isExtend(s))throw Error("not a valid definition: "+JSON.stringify(s));if(o=this.ptr.resolve(s.ref,!0))s.fields.forEach((function(e){if(null!==o.getChild(0|e.id))throw Error("duplicate extended field id in "+o.name+": "+e.id);if(o.extensions){var r=!1;if(o.extensions.forEach((function(t){e.id>=t[0]&&e.id<=t[1]&&(r=!0)})),!r)throw Error("illegal extended field id in "+o.name+": "+e.id+" (not within valid ranges)")}var i=e.name;this.options.convertFieldsToCamelCase&&(i=t.Util.toCamelCase(i));var s=new n.Message.ExtensionField(this,o,e.rule,e.type,this.ptr.fqn()+"."+i,e.id,e.options),a=new n.Extension(this,this.ptr,e.name,s);s.extension=a,this.ptr.addChild(a),o.addChild(s)}),this);else if(!/\.?google\.protobuf\./.test(s.ref))throw Error("extended message "+s.ref+" is not defined")}s=null,o=null}e=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},s.import=function(e,n){var i="/";if("string"==typeof n){if(t.Util.IS_NODE&&(n=r(114).resolve(n)),!0===this.files[n])return this.reset();this.files[n]=!0}else if("object"==typeof n){var s,o=n.root;if(t.Util.IS_NODE&&(o=r(114).resolve(o)),(o.indexOf("\\")>=0||n.file.indexOf("\\")>=0)&&(i="\\"),s=t.Util.IS_NODE?r(114).join(o,n.file):o+i+n.file,!0===this.files[s])return this.reset();this.files[s]=!0}if(e.imports&&e.imports.length>0){var a,u=!1;"object"==typeof n?(this.importRoot=n.root,u=!0,a=this.importRoot,n=n.file,(a.indexOf("\\")>=0||n.indexOf("\\")>=0)&&(i="\\")):"string"==typeof n?this.importRoot?a=this.importRoot:n.indexOf("/")>=0?""===(a=n.replace(/\/[^\/]*$/,""))&&(a="/"):n.indexOf("\\")>=0?(a=n.replace(/\\[^\\]*$/,""),i="\\"):a=".":a=null;for(var l=0;l<e.imports.length;l++)if("string"==typeof e.imports[l]){if(!a)throw Error("cannot determine import root");var c=e.imports[l];if("google/protobuf/descriptor.proto"===c)continue;if(c=t.Util.IS_NODE?r(114).join(a,c):a+i+c,!0===this.files[c])continue;/\.proto$/i.test(c)&&!t.DotProto&&(c=c.replace(/\.proto$/,".json"));var h=t.Util.fetch(c);if(null===h)throw Error("failed to import '"+c+"' in '"+n+"': file not found");/\.json$/i.test(c)?this.import(JSON.parse(h+""),c):this.import(t.DotProto.Parser.parse(h),c)}else n?/\.(\w+)$/.test(n)?this.import(e.imports[l],n.replace(/^(.+)\.(\w+)$/,(function(t,e,r){return e+"_import"+l+"."+r}))):this.import(e.imports[l],n+"_import"+l):this.import(e.imports[l]);u&&(this.importRoot=null)}e.package&&this.define(e.package),e.syntax&&function t(e){e.messages&&e.messages.forEach((function(r){r.syntax=e.syntax,t(r)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}(e);var f=this.ptr;return e.options&&Object.keys(e.options).forEach((function(t){f.options[t]=e.options[t]})),e.messages&&(this.create(e.messages),this.ptr=f),e.enums&&(this.create(e.enums),this.ptr=f),e.services&&(this.create(e.services),this.ptr=f),e.extends&&this.create(e.extends),this.reset()},s.resolveAll=function(){var r;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof n.Namespace)this.ptr.children.forEach((function(t){this.ptr=t,this.resolveAll()}),this);else if(this.ptr instanceof n.Message.Field){if(e.TYPE.test(this.ptr.type))this.ptr.type=t.TYPES[this.ptr.type];else{if(!e.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(r=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=r,r instanceof n.Enum){if(this.ptr.type=t.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==r.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(r instanceof n.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=r.isGroup?t.TYPES.group:t.TYPES.message}}if(this.ptr.map){if(!e.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=t.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==t.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(this.ptr instanceof t.Reflect.Service.Method){if(!(this.ptr instanceof t.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((r=this.ptr.parent.resolve(this.ptr.requestName,!0))&&r instanceof t.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=r,!((r=this.ptr.parent.resolve(this.ptr.responseName,!0))&&r instanceof t.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=r}else if(!(this.ptr instanceof t.Reflect.Message.OneOf||this.ptr instanceof t.Reflect.Extension||this.ptr instanceof t.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},s.build=function(t){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!t)return this.result;for(var e="string"==typeof t?t.split("."):t,r=this.result,n=0;n<e.length;n++){if(!r[e[n]]){r=null;break}r=r[e[n]]}return r},s.lookup=function(t,e){return t?this.ns.resolve(t,e):this.ns},s.toString=function(){return"Builder"},i.Message=function(){},i.Enum=function(){},i.Service=function(){},i}(s,s.Lang,s.Reflect),s.Map=function(t,e){var r=function(t,r){if(!t.map)throw Error("field is not a map");if(this.field=t,this.keyElem=new e.Element(t.keyType,null,!0,t.syntax),this.valueElem=new e.Element(t.type,t.resolvedType,!1,t.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),r)for(var n=Object.keys(r),i=0;i<n.length;i++){var s=this.keyElem.valueFromString(n[i]),o=this.valueElem.verifyValue(r[n[i]]);this.map[this.keyElem.valueToString(s)]={key:s,value:o}}},n=r.prototype;function i(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}return n.clear=function(){this.map={}},n.delete=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t)),r=e in this.map;return delete this.map[e],r},n.entries=function(){for(var t,e=[],r=Object.keys(this.map),n=0;n<r.length;n++)e.push([(t=this.map[r[n]]).key,t.value]);return i(e)},n.keys=function(){for(var t=[],e=Object.keys(this.map),r=0;r<e.length;r++)t.push(this.map[e[r]].key);return i(t)},n.values=function(){for(var t=[],e=Object.keys(this.map),r=0;r<e.length;r++)t.push(this.map[e[r]].value);return i(t)},n.forEach=function(t,e){for(var r,n=Object.keys(this.map),i=0;i<n.length;i++)t.call(e,(r=this.map[n[i]]).value,r.key,this)},n.set=function(t,e){var r=this.keyElem.verifyValue(t),n=this.valueElem.verifyValue(e);return this.map[this.keyElem.valueToString(r)]={key:r,value:n},this},n.get=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t));if(e in this.map)return this.map[e].value},n.has=function(t){return this.keyElem.valueToString(this.keyElem.verifyValue(t))in this.map},r}(0,s.Reflect),s.loadProto=function(t,e,r){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(r=e,e=void 0),s.loadJson(s.DotProto.Parser.parse(t),e,r)},s.protoFromString=s.loadProto,s.loadProtoFile=function(t,e,r){if(e&&"object"==typeof e?(r=e,e=null):e&&"function"==typeof e||(e=null),e)return s.Util.fetch("string"==typeof t?t:t.root+"/"+t.file,(function(n){if(null!==n)try{e(null,s.loadProto(n,r,t))}catch(t){e(t)}else e(Error("Failed to fetch file"))}));var n=s.Util.fetch("object"==typeof t?t.root+"/"+t.file:t);return null===n?null:s.loadProto(n,r,t)},s.protoFromFile=s.loadProtoFile,s.newBuilder=function(t){return void 0===(t=t||{}).convertFieldsToCamelCase&&(t.convertFieldsToCamelCase=s.convertFieldsToCamelCase),void 0===t.populateAccessors&&(t.populateAccessors=s.populateAccessors),new s.Builder(t)},s.loadJson=function(t,e,r){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(r=e,e=null),e&&"object"==typeof e||(e=s.newBuilder()),"string"==typeof t&&(t=JSON.parse(t)),e.import(t,r),e.resolveAll(),e},s.loadJsonFile=function(t,e,r){if(e&&"object"==typeof e?(r=e,e=null):e&&"function"==typeof e||(e=null),e)return s.Util.fetch("string"==typeof t?t:t.root+"/"+t.file,(function(n){if(null!==n)try{e(null,s.loadJson(JSON.parse(n),r,t))}catch(t){e(t)}else e(Error("Failed to fetch file"))}));var n=s.Util.fetch("object"==typeof t?t.root+"/"+t.file:t);return null===n?null:s.loadJson(JSON.parse(n),r,t)},s})?i.apply(e,s):i)||(t.exports=o)}).call(this,r(125))},function(t,e,r){function n(t){"use strict";t=t||{},this.depth=t.depth||!1,this.throwOnCircularRef=!("throwOnCircularRef"in t&&!1===t.throwOnCircularRef)}function i(t){"use strict";var e=Array.prototype.slice.call(arguments,0);e.unshift(null);var r=n.bind.apply(n,e);return new r}function s(t){"use strict";var e=r(147),s=r(148),o=[],a={};function u(t){return t.reduce((function(t,e){return e instanceof Object?t.push(e):t=[],t}),[])}function l(t){var e,r=t[t.length-1];if(r instanceof Array)e=[];else if(r instanceof Function)try{e=s(r)}catch(t){throw new Error(t.message)}else e=r instanceof Object?{}:r;return e}function c(t){t.forEach((function(t){if(t instanceof Object&&o.indexOf(t)>-1)throw new Error("Circular reference error")})),o=o.concat(t)}function h(t,r){r=!1!==a.depth?r?r+1:1:0,!0===a.throwOnCircularRef&&c(t);var n=l(t);function i(t,e,i){n[e]?n[e]=h([n[e],i[e]],r):n[e]=h([i[e]],r)}n instanceof Object&&r<=a.depth&&u(t).forEach((function(t){e(t,i)}));return n}return arguments[0]instanceof n?(a=arguments[0],t=Array.prototype.slice.call(arguments,1)):(a=i(),t=Array.prototype.slice.call(arguments,0)),h(t)}s.createOptions=i,t.exports=s},,,function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n=r(4),i=r(2),s=r(19),o=i("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),s&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},function(t,e,r){var n=r(8),i=r(1),s=r(39),o=r(149),a=r(10).f,u=r(69).f,l=r(116),c=r(60),h=r(71),f=r(11),d=r(4),p=r(24).set,g=r(73),v=r(2)("match"),y=i.RegExp,m=y.prototype,b=/a/g,w=/a/g,E=new y(b)!==b,k=h.UNSUPPORTED_Y;if(n&&s("RegExp",!E||k||d((function(){return w[v]=!1,y(b)!=b||y(w)==w||"/a/i"!=y(b,"i")})))){for(var S=function(t,e){var r,n=this instanceof S,i=l(t),s=void 0===e;if(!n&&i&&t.constructor===S&&s)return t;E?i&&!s&&(t=t.source):t instanceof S&&(s&&(e=c.call(t)),t=t.source),k&&(r=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=o(E?new y(t,e):y(t,e),n?this:m,S);return k&&r&&p(a,{sticky:r}),a},T=function(t){t in S||a(S,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},x=u(y),I=0;x.length>I;)T(x[I++]);m.constructor=S,S.prototype=m,f(i,"RegExp",S)}g("RegExp")},,,function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return h}));var n=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n},i=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"},s=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform},o=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"},a=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return e?d(e):"undefined"!=typeof navigator?d(navigator.userAgent):void 0!==t&&t.version?new s(t.version.slice(1)):null}function f(t){return""!==t&&l.reduce((function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]}),!1)}function d(t){var e=f(t);if(!e)return null;var r=e[0],s=e[1];if("searchbot"===r)return new a;var l=s[1]&&s[1].split(/[._]/).slice(0,3);l?l.length<3&&(l=n(l,function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(3-l.length))):l=[];var h=l.join("."),d=function(t){for(var e=0,r=c.length;e<r;e++){var n=c[e],i=n[0];if(n[1].exec(t))return i}return null}(t),p=u.exec(t);return p&&p[1]?new o(r,h,d,p[1]):new i(r,l.join("."),d)}}).call(this,r(125))},function(t,e){t.exports=function(t,e,r,n,i){var s,o;if(void 0===n)n=0;else if((n|=0)<0||n>=t.length)throw new RangeError("invalid lower bound");if(void 0===i)i=t.length-1;else if((i|=0)<n||i>=t.length)throw new RangeError("invalid upper bound");for(;n<=i;)if((o=+r(t[s=n+(i-n>>>1)],e,s,t))<0)n=s+1;else{if(!(o>0))return s;i=s-1}return~n}},,function(t,e,r){var n,i,s;
/**
 * @license bytebuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
 * Backing buffer: ArrayBuffer, Accessor: Uint8Array
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bytebuffer.js for details
 */i=[r(134)],void 0===(s="function"==typeof(n=function(t){"use strict";var e=function(t,r,i){if(void 0===t&&(t=e.DEFAULT_CAPACITY),void 0===r&&(r=e.DEFAULT_ENDIAN),void 0===i&&(i=e.DEFAULT_NOASSERT),!i){if((t|=0)<0)throw RangeError("Illegal capacity");r=!!r,i=!!i}this.buffer=0===t?n:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=r,this.noAssert=i};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var r=e.prototype;r.__isByteBuffer__,Object.defineProperty(r,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var n=new ArrayBuffer(0),i=String.fromCharCode;function s(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function o(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+i.apply(String,t);t.length+arguments.length>1024&&(e.push(i.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function a(t,e,r,n,i){var s,o,a=8*i-n-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=256*s+t[e+h],h+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===s)s=1-l;else{if(s===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=l}return(d?-1:1)*o*Math.pow(2,s-n)}function u(t,e,r,n,i,s){var o,a,u,l=8*s-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*u-1)*Math.pow(2,i),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+d]=255&o,d+=p,o/=256,l-=8);t[r+d-p]|=128*g}e.accessor=function(){return Uint8Array},e.allocate=function(t,r,n){return new e(t,r,n)},e.concat=function(t,r,n,i){"boolean"!=typeof r&&"string"==typeof r||(i=n,n=r,r=void 0);for(var s,o=0,a=0,u=t.length;a<u;++a)e.isByteBuffer(t[a])||(t[a]=e.wrap(t[a],r)),(s=t[a].limit-t[a].offset)>0&&(o+=s);if(0===o)return new e(0,n,i);var l,c=new e(o,n,i);for(a=0;a<u;)(s=(l=t[a++]).limit-l.offset)<=0||(c.view.set(l.view.subarray(l.offset,l.limit),c.offset),c.offset+=s);return c.limit=c.offset,c.offset=0,c},e.isByteBuffer=function(t){return!0===(t&&t.__isByteBuffer__)},e.type=function(){return ArrayBuffer},e.wrap=function(t,n,i,s){if("string"!=typeof n&&(s=i,i=n,n=void 0),"string"==typeof t)switch(void 0===n&&(n="utf8"),n){case"base64":return e.fromBase64(t,i);case"hex":return e.fromHex(t,i);case"binary":return e.fromBinary(t,i);case"utf8":return e.fromUTF8(t,i);case"debug":return e.fromDebug(t,i);default:throw Error("Unsupported encoding: "+n)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var o;if(e.isByteBuffer(t))return(o=r.clone.call(t)).markedOffset=-1,o;if(t instanceof Uint8Array)o=new e(0,i,s),t.length>0&&(o.buffer=t.buffer,o.offset=t.byteOffset,o.limit=t.byteOffset+t.byteLength,o.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)o=new e(0,i,s),t.byteLength>0&&(o.buffer=t,o.offset=0,o.limit=t.byteLength,o.view=t.byteLength>0?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");(o=new e(t.length,i,s)).limit=t.length;for(var a=0;a<t.length;++a)o.view[a]=t[a]}return o},r.writeBitSet=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,i=e,s=t.length,o=s>>3,a=0;for(e+=this.writeVarint32(s,e);o--;)n=1&!!t[a++]|(1&!!t[a++])<<1|(1&!!t[a++])<<2|(1&!!t[a++])<<3|(1&!!t[a++])<<4|(1&!!t[a++])<<5|(1&!!t[a++])<<6|(1&!!t[a++])<<7,this.writeByte(n,e++);if(a<s){var u=0;for(n=0;a<s;)n|=(1&!!t[a++])<<u++;this.writeByte(n,e++)}return r?(this.offset=e,this):e-i},r.readBitSet=function(t){var e=void 0===t;e&&(t=this.offset);var r,n=this.readVarint32(t),i=n.value,s=i>>3,o=0,a=[];for(t+=n.length;s--;)r=this.readByte(t++),a[o++]=!!(1&r),a[o++]=!!(2&r),a[o++]=!!(4&r),a[o++]=!!(8&r),a[o++]=!!(16&r),a[o++]=!!(32&r),a[o++]=!!(64&r),a[o++]=!!(128&r);if(o<i){var u=0;for(r=this.readByte(t++);o<i;)a[o++]=!!(r>>u++&1)}return e&&(this.offset=t),a},r.readBytes=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var n=this.slice(e,e+t);return r&&(this.offset+=t),n},r.writeBytes=r.append,r.writeInt8=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,r&&(this.offset+=1),this},r.writeByte=r.writeInt8,r.readInt8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=this.view[t];return 128==(128&r)&&(r=-(255-r+1)),e&&(this.offset+=1),r},r.readByte=r.readInt8,r.writeUint8=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,r&&(this.offset+=1),this},r.writeUInt8=r.writeUint8,r.readUint8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=this.view[t];return e&&(this.offset+=1),r},r.readUInt8=r.readUint8,r.writeInt16=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),r&&(this.offset+=2),this},r.writeShort=r.writeInt16,r.readInt16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[t],r|=this.view[t+1]<<8):(r=this.view[t]<<8,r|=this.view[t+1]),32768==(32768&r)&&(r=-(65535-r+1)),e&&(this.offset+=2),r},r.readShort=r.readInt16,r.writeUint16=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),r&&(this.offset+=2),this},r.writeUInt16=r.writeUint16,r.readUint16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[t],r|=this.view[t+1]<<8):(r=this.view[t]<<8,r|=this.view[t+1]),e&&(this.offset+=2),r},r.readUInt16=r.readUint16,r.writeInt32=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),r&&(this.offset+=4),this},r.writeInt=r.writeInt32,r.readInt32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0),r|=0,e&&(this.offset+=4),r},r.readInt=r.readInt32,r.writeUint32=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),r&&(this.offset+=4),this},r.writeUInt32=r.writeUint32,r.readUint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0),e&&(this.offset+=4),r},r.readUInt32=r.readUint32,t&&(r.writeInt64=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),r+=8;var i=this.buffer.byteLength;r>i&&this.resize((i*=2)>r?i:r),r-=8;var s=e.low,o=e.high;return this.littleEndian?(this.view[r+3]=s>>>24&255,this.view[r+2]=s>>>16&255,this.view[r+1]=s>>>8&255,this.view[r]=255&s,r+=4,this.view[r+3]=o>>>24&255,this.view[r+2]=o>>>16&255,this.view[r+1]=o>>>8&255,this.view[r]=255&o):(this.view[r]=o>>>24&255,this.view[r+1]=o>>>16&255,this.view[r+2]=o>>>8&255,this.view[r+3]=255&o,r+=4,this.view[r]=s>>>24&255,this.view[r+1]=s>>>16&255,this.view[r+2]=s>>>8&255,this.view[r+3]=255&s),n&&(this.offset+=8),this},r.writeLong=r.writeInt64,r.readInt64=function(e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,i=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var s=new t(n,i,!1);return r&&(this.offset+=8),s},r.readLong=r.readInt64,r.writeUint64=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),r+=8;var i=this.buffer.byteLength;r>i&&this.resize((i*=2)>r?i:r),r-=8;var s=e.low,o=e.high;return this.littleEndian?(this.view[r+3]=s>>>24&255,this.view[r+2]=s>>>16&255,this.view[r+1]=s>>>8&255,this.view[r]=255&s,r+=4,this.view[r+3]=o>>>24&255,this.view[r+2]=o>>>16&255,this.view[r+1]=o>>>8&255,this.view[r]=255&o):(this.view[r]=o>>>24&255,this.view[r+1]=o>>>16&255,this.view[r+2]=o>>>8&255,this.view[r+3]=255&o,r+=4,this.view[r]=s>>>24&255,this.view[r+1]=s>>>16&255,this.view[r+2]=s>>>8&255,this.view[r+3]=255&s),n&&(this.offset+=8),this},r.writeUInt64=r.writeUint64,r.readUint64=function(e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,i=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var s=new t(n,i,!0);return r&&(this.offset+=8),s},r.readUInt64=r.readUint64),r.writeFloat32=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,u(this.view,t,e,this.littleEndian,23,4),r&&(this.offset+=4),this},r.writeFloat=r.writeFloat32,r.readFloat32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=a(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),r},r.readFloat=r.readFloat32,r.writeFloat64=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,u(this.view,t,e,this.littleEndian,52,8),r&&(this.offset+=8),this},r.writeDouble=r.writeFloat64,r.readFloat64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=a(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),r},r.readDouble=r.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},e.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},e.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},r.writeVarint32=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,s=e.calculateVarint32(t);r+=s;var o=this.buffer.byteLength;for(r>o&&this.resize((o*=2)>r?o:r),r-=s,t>>>=0;t>=128;)i=127&t|128,this.view[r++]=i,t>>>=7;return this.view[r++]=t,n?(this.offset=r,this):s},r.writeVarint32ZigZag=function(t,r){return this.writeVarint32(e.zigZagEncode32(t),r)},r.readVarint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r,n=0,i=0;do{if(!this.noAssert&&t>this.limit){var s=Error("Truncated");throw s.truncated=!0,s}r=this.view[t++],n<5&&(i|=(127&r)<<7*n),++n}while(0!=(128&r));return i|=0,e?(this.offset=t,i):{value:i,length:n}},r.readVarint32ZigZag=function(t){var r=this.readVarint32(t);return"object"==typeof r?r.value=e.zigZagDecode32(r.value):r=e.zigZagDecode32(r),r},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(e){"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e));var r=e.toInt()>>>0,n=e.shiftRightUnsigned(28).toInt()>>>0,i=e.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==n?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10},e.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},r.writeVarint64=function(r,n){var i=void 0===n;if(i&&(n=this.offset),!this.noAssert){if("number"==typeof r)r=t.fromNumber(r);else if("string"==typeof r)r=t.fromString(r);else if(!(r&&r instanceof t))throw TypeError("Illegal value: "+r+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof r?r=t.fromNumber(r,!1):"string"==typeof r?r=t.fromString(r,!1):!1!==r.unsigned&&(r=r.toSigned());var s=e.calculateVarint64(r),o=r.toInt()>>>0,a=r.shiftRightUnsigned(28).toInt()>>>0,u=r.shiftRightUnsigned(56).toInt()>>>0;n+=s;var l=this.buffer.byteLength;switch(n>l&&this.resize((l*=2)>n?l:n),n-=s,s){case 10:this.view[n+9]=u>>>7&1;case 9:this.view[n+8]=9!==s?128|u:127&u;case 8:this.view[n+7]=8!==s?a>>>21|128:a>>>21&127;case 7:this.view[n+6]=7!==s?a>>>14|128:a>>>14&127;case 6:this.view[n+5]=6!==s?a>>>7|128:a>>>7&127;case 5:this.view[n+4]=5!==s?128|a:127&a;case 4:this.view[n+3]=4!==s?o>>>21|128:o>>>21&127;case 3:this.view[n+2]=3!==s?o>>>14|128:o>>>14&127;case 2:this.view[n+1]=2!==s?o>>>7|128:o>>>7&127;case 1:this.view[n]=1!==s?128|o:127&o}return i?(this.offset+=s,this):s},r.writeVarint64ZigZag=function(t,r){return this.writeVarint64(e.zigZagEncode64(t),r)},r.readVarint64=function(e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,i=0,s=0,o=0,a=0;if(i=127&(a=this.view[e++]),128&a&&(i|=(127&(a=this.view[e++]))<<7,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[e++]))<<14,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[e++]))<<21,(128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[e++]),(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<7,(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<14,(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<21,(128&a||this.noAssert&&void 0===a)&&(o=127&(a=this.view[e++]),(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[e++]))<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var u=t.fromBits(i|s<<28,s>>>4|o<<24,!1);return r?(this.offset=e,u):{value:u,length:e-n}},r.readVarint64ZigZag=function(r){var n=this.readVarint64(r);return n&&n.value instanceof t?n.value=e.zigZagDecode64(n.value):n=e.zigZagDecode64(n),n}),r.writeCString=function(t,e){var r=void 0===e;r&&(e=this.offset);var n,i=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(n=0;n<i;++n)if(0===t.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}i=c.calculateUTF16asUTF8(s(t))[1],e+=i+1;var o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=i+1,c.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,r?(this.offset=e,this):i},r.readCString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r,n=t,i=-1;return c.decodeUTF8toUTF16(function(){if(0===i)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return 0===(i=this.view[t++])?null:i}.bind(this),r=o(),!0),e?(this.offset=t,r()):{string:r(),length:t-n}},r.writeIString=function(t,e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,i=e;n=c.calculateUTF16asUTF8(s(t),this.noAssert)[1],e+=4+n;var o=this.buffer.byteLength;if(e>o&&this.resize((o*=2)>e?o:e),e-=4+n,this.littleEndian?(this.view[e+3]=n>>>24&255,this.view[e+2]=n>>>16&255,this.view[e+1]=n>>>8&255,this.view[e]=255&n):(this.view[e]=n>>>24&255,this.view[e+1]=n>>>16&255,this.view[e+2]=n>>>8&255,this.view[e+3]=255&n),e+=4,c.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),e!==i+4+n)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+n));return r?(this.offset=e,this):e-i},r.readIString=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=t,i=this.readUint32(t),s=this.readUTF8String(i,e.METRICS_BYTES,t+=4);return t+=s.length,r?(this.offset=t,s.string):{string:s.string,length:t-n}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",r.writeUTF8String=function(t,e){var r,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var i=e;r=c.calculateUTF16asUTF8(s(t))[1],e+=r;var o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=r,c.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),n?(this.offset=e,this):e-i},r.writeString=r.writeUTF8String,e.calculateUTF8Chars=function(t){return c.calculateUTF16asUTF8(s(t))[0]},e.calculateUTF8Bytes=function(t){return c.calculateUTF16asUTF8(s(t))[1]},e.calculateString=e.calculateUTF8Bytes,r.readUTF8String=function(t,r,n){"number"==typeof r&&(n=r,r=void 0);var i=void 0===n;if(i&&(n=this.offset),void 0===r&&(r=e.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var s,a=0,u=n;if(r===e.METRICS_CHARS){if(s=o(),c.decodeUTF8(function(){return a<t&&n<this.limit?this.view[n++]:null}.bind(this),(function(t){++a,c.UTF8toUTF16(t,s)})),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return i?(this.offset=n,s()):{string:s(),length:n-u}}if(r===e.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+t+") <= "+this.buffer.byteLength)}var l=n+t;if(c.decodeUTF8toUTF16(function(){return n<l?this.view[n++]:null}.bind(this),s=o(),this.noAssert),n!==l)throw RangeError("Illegal range: Truncated data, "+n+" == "+l);return i?(this.offset=n,s()):{string:s(),length:n-u}}throw TypeError("Unsupported metrics: "+r)},r.readString=r.readUTF8String,r.writeVString=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,o,a=r;i=c.calculateUTF16asUTF8(s(t),this.noAssert)[1],o=e.calculateVarint32(i),r+=o+i;var u=this.buffer.byteLength;if(r>u&&this.resize((u*=2)>r?u:r),r-=o+i,r+=this.writeVarint32(i,r),c.encodeUTF16toUTF8(s(t),function(t){this.view[r++]=t}.bind(this)),r!==a+i+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+i+o));return n?(this.offset=r,this):r-a},r.readVString=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,i=this.readVarint32(t),s=this.readUTF8String(i.value,e.METRICS_BYTES,t+=i.length);return t+=s.length,r?(this.offset=t,s.string):{string:s.string,length:t-n}},r.append=function(t,r,n){"number"!=typeof r&&"string"==typeof r||(n=r,r=void 0);var i=void 0===n;if(i&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,r));var s=t.limit-t.offset;if(s<=0)return this;n+=s;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=s,this.view.set(t.view.subarray(t.offset,t.limit),n),t.offset+=s,i&&(this.offset+=s),this},r.appendTo=function(t,e){return t.append(this,e),this},r.assert=function(t){return this.noAssert=!t,this},r.capacity=function(){return this.buffer.byteLength},r.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},r.clone=function(t){var r=new e(0,this.littleEndian,this.noAssert);return t?(r.buffer=new ArrayBuffer(this.buffer.byteLength),r.view=new Uint8Array(r.buffer)):(r.buffer=this.buffer,r.view=this.view),r.offset=this.offset,r.markedOffset=this.markedOffset,r.limit=this.limit,r},r.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var r=e-t;if(0===r)return this.buffer=n,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(r),s=new Uint8Array(i);return s.set(this.view.subarray(t,e)),this.buffer=i,this.view=s,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=r,this},r.copy=function(t,r){if(void 0===t&&(t=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t===r)return new e(0,this.littleEndian,this.noAssert);var n=r-t,i=new e(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=t),this.copyTo(i,0,t,r),i},r.copyTo=function(t,r,n,i){var s,o;if(!this.noAssert&&!e.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(r=(o=void 0===r)?t.offset:0|r,n=(s=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,r<0||r>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+r+" <= "+t.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var a=i-n;return 0===a?t:(t.ensureCapacity(r+a),t.view.set(this.view.subarray(n,i),r),s&&(this.offset+=a),o&&(t.offset+=a),this)},r.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},r.fill=function(t,e,r){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,e<0||e>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+r+" <= "+this.buffer.byteLength)}if(e>=r)return this;for(;e<r;)this.view[e++]=t;return n&&(this.offset=e),this},r.flip=function(){return this.limit=this.offset,this.offset=0,this},r.mark=function(t){if(t=void 0===t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},r.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},r.LE=function(t){return this.littleEndian=void 0===t||!!t,this},r.BE=function(t){return this.littleEndian=void 0!==t&&!t,this},r.prepend=function(t,r,n){"number"!=typeof r&&"string"==typeof r||(n=r,r=void 0);var i=void 0===n;if(i&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,r));var s=t.limit-t.offset;if(s<=0)return this;var o=s-n;if(o>0){var a=new ArrayBuffer(this.buffer.byteLength+o),u=new Uint8Array(a);u.set(this.view.subarray(n,this.buffer.byteLength),s),this.buffer=a,this.view=u,this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,n+=o}else new Uint8Array(this.buffer);return this.view.set(t.view.subarray(t.offset,t.limit),n-s),t.offset=t.limit,i&&(this.offset-=s),this},r.prependTo=function(t,e){return t.prepend(this,e),this},r.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},r.remaining=function(){return this.limit-this.offset},r.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},r.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),r=new Uint8Array(e);r.set(this.view),this.buffer=e,this.view=r}return this},r.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e||Array.prototype.reverse.call(this.view.subarray(t,e)),this},r.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},r.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=t,r.limit=e,r},r.toBuffer=function(t){var e=this.offset,r=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,e<0||e>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+r+" <= "+this.buffer.byteLength)}if(!t&&0===e&&r===this.buffer.byteLength)return this.buffer;if(e===r)return n;var i=new ArrayBuffer(r-e);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,r),0),i},r.toArrayBuffer=r.toBuffer,r.toString=function(t,e,r){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(r=e=t="utf8"),t){case"utf8":return this.toUTF8(e,r);case"base64":return this.toBase64(e,r);case"hex":return this.toHex(e,r);case"binary":return this.toBinary(e,r);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var l=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],n=0,i=e.length;n<i;++n)r[e[n]]=n;return t.encode=function(t,r){for(var n,i;null!==(n=t());)r(e[n>>2&63]),i=(3&n)<<4,null!==(n=t())?(r(e[63&((i|=n>>4&15)|n>>4&15)]),i=(15&n)<<2,null!==(n=t())?(r(e[63&(i|n>>6&3)]),r(e[63&n])):(r(e[63&i]),r(61))):(r(e[63&i]),r(61),r(61))},t.decode=function(t,e){var n,i,s;function o(t){throw Error("Illegal character code: "+t)}for(;null!==(n=t());)if(void 0===(i=r[n])&&o(n),null!==(n=t())&&(void 0===(s=r[n])&&o(n),e(i<<2>>>0|(48&s)>>4),null!==(n=t()))){if(void 0===(i=r[n])){if(61===n)break;o(n)}if(e((15&s)<<4>>>0|(60&i)>>2),null!==(n=t())){if(void 0===(s=r[n])){if(61===n)break;o(n)}e((3&i)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();r.toBase64=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity||t>e)throw RangeError("begin, end");var r;return l.encode(function(){return t<e?this.view[t++]:null}.bind(this),r=o()),r()},e.fromBase64=function(t,r){if("string"!=typeof t)throw TypeError("str");var n=new e(t.length/4*3,r),i=0;return l.decode(s(t),(function(t){n.view[i++]=t})),n.limit=i,n},e.btoa=function(t){return e.fromBinary(t).toBase64()},e.atob=function(t){return e.fromBase64(t).toBinary()},r.toBinary=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity()||t>e)throw RangeError("begin, end");if(t===e)return"";for(var r=[],n=[];t<e;)r.push(this.view[t++]),r.length>=1024&&(n.push(String.fromCharCode.apply(String,r)),r=[]);return n.join("")+String.fromCharCode.apply(String,r)},e.fromBinary=function(t,r){if("string"!=typeof t)throw TypeError("str");for(var n,i=0,s=t.length,o=new e(s,r);i<s;){if((n=t.charCodeAt(i))>255)throw RangeError("illegal char code: "+n);o.view[i++]=n}return o.limit=s,o},r.toDebug=function(t){for(var e,r=-1,n=this.buffer.byteLength,i="",s="",o="";r<n;){if(-1!==r&&(i+=(e=this.view[r])<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(s+=e>32&&e<127?String.fromCharCode(e):".")),++r,t&&r>0&&r%16==0&&r!==n){for(;i.length<51;)i+=" ";o+=i+s+"\n",i=s=""}r===this.offset&&r===this.limit?i+=r===this.markedOffset?"!":"|":r===this.offset?i+=r===this.markedOffset?"[":"<":r===this.limit?i+=r===this.markedOffset?"]":">":i+=r===this.markedOffset?"'":t||0!==r&&r!==n?" ":""}if(t&&" "!==i){for(;i.length<51;)i+=" ";o+=i+s+"\n"}return t?o:i},e.fromDebug=function(t,r,n){for(var i,s,o=t.length,a=new e((o+1)/3|0,r,n),u=0,l=0,c=!1,h=!1,f=!1,d=!1,p=!1;u<o;){switch(i=t.charAt(u++)){case"!":if(!n){if(h||f||d){p=!0;break}h=f=d=!0}a.offset=a.markedOffset=a.limit=l,c=!1;break;case"|":if(!n){if(h||d){p=!0;break}h=d=!0}a.offset=a.limit=l,c=!1;break;case"[":if(!n){if(h||f){p=!0;break}h=f=!0}a.offset=a.markedOffset=l,c=!1;break;case"<":if(!n){if(h){p=!0;break}h=!0}a.offset=l,c=!1;break;case"]":if(!n){if(d||f){p=!0;break}d=f=!0}a.limit=a.markedOffset=l,c=!1;break;case">":if(!n){if(d){p=!0;break}d=!0}a.limit=l,c=!1;break;case"'":if(!n){if(f){p=!0;break}f=!0}a.markedOffset=l,c=!1;break;case" ":c=!1;break;default:if(!n&&c){p=!0;break}if(s=parseInt(i+t.charAt(u++),16),!n&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[l++]=s,c=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+u)}if(!n){if(!h||!d)throw TypeError("Illegal str: Missing offset or limit");if(l<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+l+" < "+o)}return a},r.toHex=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var r,n=new Array(e-t);t<e;)(r=this.view[t++])<16?n.push("0",r.toString(16)):n.push(r.toString(16));return n.join("")},e.fromHex=function(t,r,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,s=t.length,o=new e(s/2|0,r),a=0,u=0;a<s;a+=2){if(i=parseInt(t.substring(a,a+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view[u++]=i}return o.limit=u,o};var c=function(){var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var r=null;for("number"==typeof t&&(r=t,t=function(){return null});null!==r||null!==(r=t());)r<128?e(127&r):r<2048?(e(r>>6&31|192),e(63&r|128)):r<65536?(e(r>>12&15|224),e(r>>6&63|128),e(63&r|128)):(e(r>>18&7|240),e(r>>12&63|128),e(r>>6&63|128),e(63&r|128)),r=null},decodeUTF8:function(t,e){for(var r,n,i,s,o=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(r=t());)if(0==(128&r))e(r);else if(192==(224&r))null===(n=t())&&o([r,n]),e((31&r)<<6|63&n);else if(224==(240&r))(null===(n=t())||null===(i=t()))&&o([r,n,i]),e((15&r)<<12|(63&n)<<6|63&i);else{if(240!=(248&r))throw RangeError("Illegal starting byte: "+r);(null===(n=t())||null===(i=t())||null===(s=t()))&&o([r,n,i,s]),e((7&r)<<18|(63&n)<<12|(63&i)<<6|63&s)}},UTF16toUTF8:function(t,e){for(var r,n=null;null!==(r=null!==n?n:t());)r>=55296&&r<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(r-55296)+n-56320+65536),n=null):e(r);null!==n&&e(n)},UTF8toUTF16:function(t,e){var r=null;for("number"==typeof t&&(r=t,t=function(){return null});null!==r||null!==(r=t());)r<=65535?e(r):(e(55296+((r-=65536)>>10)),e(r%1024+56320)),r=null},encodeUTF16toUTF8:function(e,r){t.UTF16toUTF8(e,(function(e){t.encodeUTF8(e,r)}))},decodeUTF8toUTF16:function(e,r){t.decodeUTF8(e,(function(e){t.UTF8toUTF16(e,r)}))},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,r=0;null!==(e=t());)r+=e<128?1:e<2048?2:e<65536?3:4;return r},calculateUTF16asUTF8:function(e){var r=0,n=0;return t.UTF16toUTF8(e,(function(t){++r,n+=t<128?1:t<2048?2:t<65536?3:4})),[r,n]}};return t}();return r.toUTF8=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var r;try{c.decodeUTF8toUTF16(function(){return t<e?this.view[t++]:null}.bind(this),r=o())}catch(r){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return r()},e.fromUTF8=function(t,r,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var i=new e(c.calculateUTF16asUTF8(s(t),!0)[1],r,n),o=0;return c.encodeUTF16toUTF8(s(t),(function(t){i.view[o++]=t})),i.limit=o,i},e})?n.apply(e,i):n)||(t.exports=s)},function(t,e,r){var n,i,s;
/**
 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/long.js for details
 */i=[],void 0===(s="function"==typeof(n=function(){"use strict";function t(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var r={},n={};function i(t,e){var i,s,a;return e?(a=0<=(t>>>=0)&&t<256)&&(s=n[t])?s:(i=o(t,(0|t)<0?-1:0,!0),a&&(n[t]=i),i):(a=-128<=(t|=0)&&t<128)&&(s=r[t])?s:(i=o(t,t<0?-1:0,!1),a&&(r[t]=i),i)}function s(t,e){if(isNaN(t)||!isFinite(t))return e?g:p;if(e){if(t<0)return g;if(t>=h)return w}else{if(t<=-f)return E;if(t+1>=f)return b}return t<0?s(-t,e).neg():o(t%c|0,t/c|0,e)}function o(e,r,n){return new t(e,r,n)}t.fromInt=i,t.fromNumber=s,t.fromBits=o;var a=Math.pow;function u(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return p;if("number"==typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return u(t.substring(1),e,r).neg();for(var i=s(a(r,8)),o=p,l=0;l<t.length;l+=8){var c=Math.min(8,t.length-l),h=parseInt(t.substring(l,l+c),r);if(c<8){var f=s(a(r,c));o=o.mul(f).add(s(h))}else o=(o=o.mul(i)).add(s(h))}return o.unsigned=e,o}function l(e){return e instanceof t?e:"number"==typeof e?s(e):"string"==typeof e?u(e):o(e.low,e.high,e.unsigned)}t.fromString=u,t.fromValue=l;var c=4294967296,h=c*c,f=h/2,d=i(1<<24),p=i(0);t.ZERO=p;var g=i(0,!0);t.UZERO=g;var v=i(1);t.ONE=v;var y=i(1,!0);t.UONE=y;var m=i(-1);t.NEG_ONE=m;var b=o(-1,2147483647,!1);t.MAX_VALUE=b;var w=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=w;var E=o(0,-2147483648,!1);t.MIN_VALUE=E;var k=t.prototype;return k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},k.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var e=s(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=s(a(t,6),this.unsigned),o=this,u="";;){var l=o.div(i),c=(o.sub(l.mul(i)).toInt()>>>0).toString(t);if((o=l).isZero())return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},k.isZero=function(){return 0===this.high&&0===this.low},k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(t){return e(t)||(t=l(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},k.eq=k.equals,k.notEquals=function(t){return!this.eq(t)},k.neq=k.notEquals,k.lessThan=function(t){return this.comp(t)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(t){return this.comp(t)<=0},k.lte=k.lessThanOrEqual,k.greaterThan=function(t){return this.comp(t)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(t){return this.comp(t)>=0},k.gte=k.greaterThanOrEqual,k.compare=function(t){if(e(t)||(t=l(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(v)},k.neg=k.negate,k.add=function(t){e(t)||(t=l(t));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=t.high>>>16,u=65535&t.high,c=t.low>>>16,h=0,f=0,d=0,p=0;return d+=(p+=s+(65535&t.low))>>>16,f+=(d+=i+c)>>>16,h+=(f+=n+u)>>>16,h+=r+a,o((d&=65535)<<16|(p&=65535),(h&=65535)<<16|(f&=65535),this.unsigned)},k.subtract=function(t){return e(t)||(t=l(t)),this.add(t.neg())},k.sub=k.subtract,k.multiply=function(t){if(this.isZero())return p;if(e(t)||(t=l(t)),t.isZero())return p;if(this.eq(E))return t.isOdd()?E:p;if(t.eq(E))return this.isOdd()?E:p;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(d)&&t.lt(d))return s(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,u=t.high>>>16,c=65535&t.high,h=t.low>>>16,f=65535&t.low,g=0,v=0,y=0,m=0;return y+=(m+=a*f)>>>16,v+=(y+=i*f)>>>16,y&=65535,v+=(y+=a*h)>>>16,g+=(v+=n*f)>>>16,v&=65535,g+=(v+=i*h)>>>16,v&=65535,g+=(v+=a*c)>>>16,g+=r*f+n*h+i*c+a*u,o((y&=65535)<<16|(m&=65535),(g&=65535)<<16|(v&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(t){if(e(t)||(t=l(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:p;var r,n,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return g;if(t.gt(this.shru(1)))return y;i=g}else{if(this.eq(E))return t.eq(v)||t.eq(m)?E:t.eq(E)?v:(r=this.shr(1).div(t).shl(1)).eq(p)?t.isNegative()?v:m:(n=this.sub(t.mul(r)),i=r.add(n.div(t)));if(t.eq(E))return this.unsigned?g:p;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=p}for(n=this;n.gte(t);){r=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),u=o<=48?1:a(2,o-48),c=s(r),h=c.mul(t);h.isNegative()||h.gt(n);)h=(c=s(r-=u,this.unsigned)).mul(t);c.isZero()&&(c=v),i=i.add(c),n=n.sub(h)}return i},k.div=k.divide,k.modulo=function(t){return e(t)||(t=l(t)),this.sub(this.div(t).mul(t))},k.mod=k.modulo,k.not=function(){return o(~this.low,~this.high,this.unsigned)},k.and=function(t){return e(t)||(t=l(t)),o(this.low&t.low,this.high&t.high,this.unsigned)},k.or=function(t){return e(t)||(t=l(t)),o(this.low|t.low,this.high|t.high,this.unsigned)},k.xor=function(t){return e(t)||(t=l(t)),o(this.low^t.low,this.high^t.high,this.unsigned)},k.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?o(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):o(0,this.low<<t-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?o(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):o(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0==(t&=63))return this;var r=this.high;return t<32?o(this.low>>>t|r<<32-t,r>>>t,this.unsigned):o(32===t?r:r>>>t-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},k.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},k.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})?n.apply(e,i):n)||(t.exports=s)},function(t,e){},function(t,e,r){"use strict";var n=r(23),i=r(137),s=r(12);n({target:"String",proto:!0,forced:!r(138)("includes")},{includes:function(t){return!!~String(s(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(116);t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,r){var n=r(2)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,r){"use strict";r(140);var n,i=r(23),s=r(8),o=r(126),a=r(1),u=r(79),l=r(11),c=r(65),h=r(5),f=r(141),d=r(142),p=r(64).codeAt,g=r(144),v=r(26),y=r(145),m=r(24),b=a.URL,w=y.URLSearchParams,E=y.getState,k=m.set,S=m.getterFor("URL"),T=Math.floor,x=Math.pow,I=/[A-Za-z]/,P=/[\d+\-.A-Za-z]/,R=/\d/,L=/^(0x|0X)/,_=/^[0-7]+$/,O=/^\d+$/,A=/^[\dA-Fa-f]+$/,C=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,U=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,B=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,N=/[\u0009\u000A\u000D]/g,D=function(t,e){var r,n,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(r=q(e.slice(1,-1))))return"Invalid host";t.host=r}else if(H(t)){if(e=g(e),C.test(e))return"Invalid host";if(null===(r=M(e)))return"Invalid host";t.host=r}else{if(U.test(e))return"Invalid host";for(r="",n=d(e),i=0;i<n.length;i++)r+=W(n[i],F);t.host=r}},M=function(t){var e,r,n,i,s,o,a,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(e=u.length)>4)return t;for(r=[],n=0;n<e;n++){if(""==(i=u[n]))return t;if(s=10,i.length>1&&"0"==i.charAt(0)&&(s=L.test(i)?16:8,i=i.slice(8==s?1:2)),""===i)o=0;else{if(!(10==s?O:8==s?_:A).test(i))return t;o=parseInt(i,s)}r.push(o)}for(n=0;n<e;n++)if(o=r[n],n==e-1){if(o>=x(256,5-e))return null}else if(o>255)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*x(256,3-n);return a},q=function(t){var e,r,n,i,s,o,a,u=[0,0,0,0,0,0,0,0],l=0,c=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,c=++l}for(;f();){if(8==l)return;if(":"!=f()){for(e=r=0;r<4&&A.test(f());)e=16*e+parseInt(f(),16),h++,r++;if("."==f()){if(0==r)return;if(h-=r,l>6)return;for(n=0;f();){if(i=null,n>0){if(!("."==f()&&n<4))return;h++}if(!R.test(f()))return;for(;R.test(f());){if(s=parseInt(f(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;h++}u[l]=256*u[l]+i,2!=++n&&4!=n||l++}if(4!=n)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[l++]=e}else{if(null!==c)return;h++,c=++l}}if(null!==c)for(o=l-c,l=7;0!=l&&o>0;)a=u[l],u[l--]=u[c+o-1],u[c+--o]=a;else if(8!=l)return;return u},j=function(t){var e,r,n,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)e.unshift(t%256),t=T(t/256);return e.join(".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,r=1,n=null,i=0,s=0;s<8;s++)0!==t[s]?(i>r&&(e=n,r=i),n=null,i=0):(null===n&&(n=s),++i);return i>r&&(e=n,r=i),e}(t),r=0;r<8;r++)i&&0===t[r]||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=t[r].toString(16),r<7&&(e+=":")));return"["+e+"]"}return t},F={},Y=f({},F,{" ":1,'"':1,"<":1,">":1,"`":1}),V=f({},Y,{"#":1,"?":1,"{":1,"}":1}),$=f({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(t,e){var r=p(t,0);return r>32&&r<127&&!h(e,t)?t:encodeURIComponent(t)},z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},H=function(t){return h(z,t.scheme)},Z=function(t){return""!=t.username||""!=t.password},G=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},X=function(t,e){var r;return 2==t.length&&I.test(t.charAt(0))&&(":"==(r=t.charAt(1))||!e&&"|"==r)},J=function(t){var e;return t.length>1&&X(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},K=function(t){var e=t.path,r=e.length;!r||"file"==t.scheme&&1==r&&X(e[0],!0)||e.pop()},Q=function(t){return"."===t||"%2e"===t.toLowerCase()},tt={},et={},rt={},nt={},it={},st={},ot={},at={},ut={},lt={},ct={},ht={},ft={},dt={},pt={},gt={},vt={},yt={},mt={},bt={},wt={},Et=function(t,e,r,i){var s,o,a,u,l,c=r||tt,f=0,p="",g=!1,v=!1,y=!1;for(r||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(B,"")),e=e.replace(N,""),s=d(e);f<=s.length;){switch(o=s[f],c){case tt:if(!o||!I.test(o)){if(r)return"Invalid scheme";c=rt;continue}p+=o.toLowerCase(),c=et;break;case et:if(o&&(P.test(o)||"+"==o||"-"==o||"."==o))p+=o.toLowerCase();else{if(":"!=o){if(r)return"Invalid scheme";p="",c=rt,f=0;continue}if(r&&(H(t)!=h(z,p)||"file"==p&&(Z(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=p,r)return void(H(t)&&z[t.scheme]==t.port&&(t.port=null));p="","file"==t.scheme?c=dt:H(t)&&i&&i.scheme==t.scheme?c=nt:H(t)?c=at:"/"==s[f+1]?(c=it,f++):(t.cannotBeABaseURL=!0,t.path.push(""),c=mt)}break;case rt:if(!i||i.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==o){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,c=wt;break}c="file"==i.scheme?dt:st;continue;case nt:if("/"!=o||"/"!=s[f+1]){c=st;continue}c=ut,f++;break;case it:if("/"==o){c=lt;break}c=yt;continue;case st:if(t.scheme=i.scheme,o==n)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==o||"\\"==o&&H(t))c=ot;else if("?"==o)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",c=bt;else{if("#"!=o){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),c=yt;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=wt}break;case ot:if(!H(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,c=yt;continue}c=lt}else c=ut;break;case at:if(c=ut,"/"!=o||"/"!=p.charAt(f+1))continue;f++;break;case ut:if("/"!=o&&"\\"!=o){c=lt;continue}break;case lt:if("@"==o){g&&(p="%40"+p),g=!0,a=d(p);for(var m=0;m<a.length;m++){var b=a[m];if(":"!=b||y){var w=W(b,$);y?t.password+=w:t.username+=w}else y=!0}p=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&H(t)){if(g&&""==p)return"Invalid authority";f-=d(p).length+1,p="",c=ct}else p+=o;break;case ct:case ht:if(r&&"file"==t.scheme){c=gt;continue}if(":"!=o||v){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&H(t)){if(H(t)&&""==p)return"Invalid host";if(r&&""==p&&(Z(t)||null!==t.port))return;if(u=D(t,p))return u;if(p="",c=vt,r)return;continue}"["==o?v=!0:"]"==o&&(v=!1),p+=o}else{if(""==p)return"Invalid host";if(u=D(t,p))return u;if(p="",c=ft,r==ht)return}break;case ft:if(!R.test(o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&H(t)||r){if(""!=p){var E=parseInt(p,10);if(E>65535)return"Invalid port";t.port=H(t)&&E===z[t.scheme]?null:E,p=""}if(r)return;c=vt;continue}return"Invalid port"}p+=o;break;case dt:if(t.scheme="file","/"==o||"\\"==o)c=pt;else{if(!i||"file"!=i.scheme){c=yt;continue}if(o==n)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==o)t.host=i.host,t.path=i.path.slice(),t.query="",c=bt;else{if("#"!=o){J(s.slice(f).join(""))||(t.host=i.host,t.path=i.path.slice(),K(t)),c=yt;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=wt}}break;case pt:if("/"==o||"\\"==o){c=gt;break}i&&"file"==i.scheme&&!J(s.slice(f).join(""))&&(X(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),c=yt;continue;case gt:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&X(p))c=yt;else if(""==p){if(t.host="",r)return;c=vt}else{if(u=D(t,p))return u;if("localhost"==t.host&&(t.host=""),r)return;p="",c=vt}continue}p+=o;break;case vt:if(H(t)){if(c=yt,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=n&&(c=yt,"/"!=o))continue}else t.fragment="",c=wt;else t.query="",c=bt;break;case yt:if(o==n||"/"==o||"\\"==o&&H(t)||!r&&("?"==o||"#"==o)){if(".."===(l=(l=p).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(K(t),"/"==o||"\\"==o&&H(t)||t.path.push("")):Q(p)?"/"==o||"\\"==o&&H(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&X(p)&&(t.host&&(t.host=""),p=p.charAt(0)+":"),t.path.push(p)),p="","file"==t.scheme&&(o==n||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",c=bt):"#"==o&&(t.fragment="",c=wt)}else p+=W(o,V);break;case mt:"?"==o?(t.query="",c=bt):"#"==o?(t.fragment="",c=wt):o!=n&&(t.path[0]+=W(o,F));break;case bt:r||"#"!=o?o!=n&&("'"==o&&H(t)?t.query+="%27":t.query+="#"==o?"%23":W(o,F)):(t.fragment="",c=wt);break;case wt:o!=n&&(t.fragment+=W(o,Y))}f++}},kt=function(t){var e,r,n=c(this,kt,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),a=k(n,{type:"URL"});if(void 0!==i)if(i instanceof kt)e=S(i);else if(r=Et(e={},String(i)))throw TypeError(r);if(r=Et(a,o,null,e))throw TypeError(r);var u=a.searchParams=new w,l=E(u);l.updateSearchParams(a.query),l.updateURL=function(){a.query=String(u)||null},s||(n.href=Tt.call(n),n.origin=xt.call(n),n.protocol=It.call(n),n.username=Pt.call(n),n.password=Rt.call(n),n.host=Lt.call(n),n.hostname=_t.call(n),n.port=Ot.call(n),n.pathname=At.call(n),n.search=Ct.call(n),n.searchParams=Ut.call(n),n.hash=Bt.call(n))},St=kt.prototype,Tt=function(){var t=S(this),e=t.scheme,r=t.username,n=t.password,i=t.host,s=t.port,o=t.path,a=t.query,u=t.fragment,l=e+":";return null!==i?(l+="//",Z(t)&&(l+=r+(n?":"+n:"")+"@"),l+=j(i),null!==s&&(l+=":"+s)):"file"==e&&(l+="//"),l+=t.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==a&&(l+="?"+a),null!==u&&(l+="#"+u),l},xt=function(){var t=S(this),e=t.scheme,r=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&H(t)?e+"://"+j(t.host)+(null!==r?":"+r:""):"null"},It=function(){return S(this).scheme+":"},Pt=function(){return S(this).username},Rt=function(){return S(this).password},Lt=function(){var t=S(this),e=t.host,r=t.port;return null===e?"":null===r?j(e):j(e)+":"+r},_t=function(){var t=S(this).host;return null===t?"":j(t)},Ot=function(){var t=S(this).port;return null===t?"":String(t)},At=function(){var t=S(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ct=function(){var t=S(this).query;return t?"?"+t:""},Ut=function(){return S(this).searchParams},Bt=function(){var t=S(this).fragment;return t?"#"+t:""},Nt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(s&&u(St,{href:Nt(Tt,(function(t){var e=S(this),r=String(t),n=Et(e,r);if(n)throw TypeError(n);E(e.searchParams).updateSearchParams(e.query)})),origin:Nt(xt),protocol:Nt(It,(function(t){var e=S(this);Et(e,String(t)+":",tt)})),username:Nt(Pt,(function(t){var e=S(this),r=d(String(t));if(!G(e)){e.username="";for(var n=0;n<r.length;n++)e.username+=W(r[n],$)}})),password:Nt(Rt,(function(t){var e=S(this),r=d(String(t));if(!G(e)){e.password="";for(var n=0;n<r.length;n++)e.password+=W(r[n],$)}})),host:Nt(Lt,(function(t){var e=S(this);e.cannotBeABaseURL||Et(e,String(t),ct)})),hostname:Nt(_t,(function(t){var e=S(this);e.cannotBeABaseURL||Et(e,String(t),ht)})),port:Nt(Ot,(function(t){var e=S(this);G(e)||(""==(t=String(t))?e.port=null:Et(e,t,ft))})),pathname:Nt(At,(function(t){var e=S(this);e.cannotBeABaseURL||(e.path=[],Et(e,t+"",vt))})),search:Nt(Ct,(function(t){var e=S(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Et(e,t,bt)),E(e.searchParams).updateSearchParams(e.query)})),searchParams:Nt(Ut),hash:Nt(Bt,(function(t){var e=S(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Et(e,t,wt)):e.fragment=null}))}),l(St,"toJSON",(function(){return Tt.call(this)}),{enumerable:!0}),l(St,"toString",(function(){return Tt.call(this)}),{enumerable:!0}),b){var Dt=b.createObjectURL,Mt=b.revokeObjectURL;Dt&&l(kt,"createObjectURL",(function(t){return Dt.apply(b,arguments)})),Mt&&l(kt,"revokeObjectURL",(function(t){return Mt.apply(b,arguments)}))}v(kt,"URL"),i({global:!0,forced:!o,sham:!s},{URL:kt})},function(t,e,r){"use strict";var n=r(64).charAt,i=r(24),s=r(81),o=i.set,a=i.getterFor("String Iterator");s(String,"String",(function(t){o(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=a(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=n(r,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,r){"use strict";var n=r(8),i=r(4),s=r(80),o=r(70),a=r(67),u=r(36),l=r(68),c=Object.assign,h=Object.defineProperty;t.exports=!c||i((function(){if(n&&1!==c({b:1},c(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=c({},t)[r]||"abcdefghijklmnopqrst"!=s(c({},e)).join("")}))?function(t,e){for(var r=u(t),i=arguments.length,c=1,h=o.f,f=a.f;i>c;)for(var d,p=l(arguments[c++]),g=h?s(p).concat(h(p)):s(p),v=g.length,y=0;v>y;)d=g[y++],n&&!f.call(p,d)||(r[d]=p[d]);return r}:c},function(t,e,r){"use strict";var n=r(37),i=r(36),s=r(76),o=r(74),a=r(22),u=r(143),l=r(61);t.exports=function(t){var e,r,c,h,f,d,p=i(t),g="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=void 0!==y,b=l(p),w=0;if(m&&(y=n(y,v>2?arguments[2]:void 0,2)),null==b||g==Array&&o(b))for(r=new g(e=a(p.length));e>w;w++)d=m?y(p[w],w):p[w],u(r,w,d);else for(f=(h=b.call(p)).next,r=new g;!(c=f.call(h)).done;w++)d=m?s(h,y,[c.value,w],!0):c.value,u(r,w,d);return r.length=w,r}},function(t,e,r){"use strict";var n=r(38),i=r(10),s=r(25);t.exports=function(t,e,r){var o=n(e);o in t?i.f(t,o,s(0,r)):t[o]=r}},function(t,e,r){"use strict";var n=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",o=Math.floor,a=String.fromCharCode,u=function(t){return t+22+75*(t<26)},l=function(t,e,r){var n=0;for(t=r?o(t/700):t>>1,t+=o(t/e);t>455;n+=36)t=o(t/35);return o(n+36*t/(t+38))},c=function(t){var e,r,n=[],i=(t=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);56320==(64512&s)?e.push(((1023&i)<<10)+(1023&s)+65536):(e.push(i),r--)}else e.push(i)}return e}(t)).length,c=128,h=0,f=72;for(e=0;e<t.length;e++)(r=t[e])<128&&n.push(a(r));var d=n.length,p=d;for(d&&n.push("-");p<i;){var g=2147483647;for(e=0;e<t.length;e++)(r=t[e])>=c&&r<g&&(g=r);var v=p+1;if(g-c>o((2147483647-h)/v))throw RangeError(s);for(h+=(g-c)*v,c=g,e=0;e<t.length;e++){if((r=t[e])<c&&++h>2147483647)throw RangeError(s);if(r==c){for(var y=h,m=36;;m+=36){var b=m<=f?1:m>=f+26?26:m-f;if(y<b)break;var w=y-b,E=36-b;n.push(a(u(b+w%E))),y=o(w/E)}n.push(a(u(y))),f=l(h,v,p==d),h=0,++p}}++h,++c}return n.join("")};t.exports=function(t){var e,r,s=[],o=t.toLowerCase().replace(i,".").split(".");for(e=0;e<o.length;e++)r=o[e],s.push(n.test(r)?"xn--"+c(r):r);return s.join(".")}},function(t,e,r){"use strict";r(78);var n=r(23),i=r(13),s=r(126),o=r(11),a=r(72),u=r(26),l=r(82),c=r(24),h=r(65),f=r(5),d=r(37),p=r(75),g=r(3),v=r(7),y=r(41),m=r(25),b=r(146),w=r(61),E=r(2),k=i("fetch"),S=i("Headers"),T=E("iterator"),x=c.set,I=c.getterFor("URLSearchParams"),P=c.getterFor("URLSearchParamsIterator"),R=/\+/g,L=Array(4),_=function(t){return L[t-1]||(L[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},O=function(t){try{return decodeURIComponent(t)}catch(e){return t}},A=function(t){var e=t.replace(R," "),r=4;try{return decodeURIComponent(e)}catch(t){for(;r;)e=e.replace(_(r--),O);return e}},C=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(t){return U[t]},N=function(t){return encodeURIComponent(t).replace(C,B)},D=function(t,e){if(e)for(var r,n,i=e.split("&"),s=0;s<i.length;)(r=i[s++]).length&&(n=r.split("="),t.push({key:A(n.shift()),value:A(n.join("="))}))},M=function(t){this.entries.length=0,D(this.entries,t)},q=function(t,e){if(t<e)throw TypeError("Not enough arguments")},j=l((function(t,e){x(this,{type:"URLSearchParamsIterator",iterator:b(I(t).entries),kind:e})}),"Iterator",(function(){var t=P(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r})),F=function(){h(this,F,"URLSearchParams");var t,e,r,n,i,s,o,a,u,l=arguments.length>0?arguments[0]:void 0,c=this,d=[];if(x(c,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:M}),void 0!==l)if(v(l))if("function"==typeof(t=w(l)))for(r=(e=t.call(l)).next;!(n=r.call(e)).done;){if((o=(s=(i=b(g(n.value))).next).call(i)).done||(a=s.call(i)).done||!s.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:o.value+"",value:a.value+""})}else for(u in l)f(l,u)&&d.push({key:u,value:l[u]+""});else D(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},Y=F.prototype;a(Y,{append:function(t,e){q(arguments.length,2);var r=I(this);r.entries.push({key:t+"",value:e+""}),r.updateURL()},delete:function(t){q(arguments.length,1);for(var e=I(this),r=e.entries,n=t+"",i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;e.updateURL()},get:function(t){q(arguments.length,1);for(var e=I(this).entries,r=t+"",n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){q(arguments.length,1);for(var e=I(this).entries,r=t+"",n=[],i=0;i<e.length;i++)e[i].key===r&&n.push(e[i].value);return n},has:function(t){q(arguments.length,1);for(var e=I(this).entries,r=t+"",n=0;n<e.length;)if(e[n++].key===r)return!0;return!1},set:function(t,e){q(arguments.length,1);for(var r,n=I(this),i=n.entries,s=!1,o=t+"",a=e+"",u=0;u<i.length;u++)(r=i[u]).key===o&&(s?i.splice(u--,1):(s=!0,r.value=a));s||i.push({key:o,value:a}),n.updateURL()},sort:function(){var t,e,r,n=I(this),i=n.entries,s=i.slice();for(i.length=0,r=0;r<s.length;r++){for(t=s[r],e=0;e<r;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===r&&i.push(t)}n.updateURL()},forEach:function(t){for(var e,r=I(this).entries,n=d(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),o(Y,T,Y.entries),o(Y,"toString",(function(){for(var t,e=I(this).entries,r=[],n=0;n<e.length;)t=e[n++],r.push(N(t.key)+"="+N(t.value));return r.join("&")}),{enumerable:!0}),u(F,"URLSearchParams"),n({global:!0,forced:!s},{URLSearchParams:F}),s||"function"!=typeof k||"function"!=typeof S||n({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,r,n,i=[t];return arguments.length>1&&(e=arguments[1],v(e)&&(r=e.body,"URLSearchParams"===p(r)&&((n=e.headers?new S(e.headers):new S).has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:m(0,String(r)),headers:m(0,n)}))),i.push(e)),k.apply(this,i)}}),t.exports={URLSearchParams:F,getState:I}},function(t,e,r){var n=r(3),i=r(61);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return n(e.call(t))}},function(t,e){t.exports=function(t,e){"use strict";return Object.keys(t).forEach((function(r){e(t[r],r,t)})),t}},function(module,exports,__webpack_require__){"use strict";function cloneFunction(func){var out,str;try{str=func.toString(),out=/\[native code\]/.test(str)?func:eval("(function(){return "+str+"}());")}catch(t){throw new Error(t.message+"\r\n\r\n"+str)}return out}module.exports=cloneFunction},function(t,e,r){var n=r(7),i=r(83);t.exports=function(t,e,r){var s,o;return i&&"function"==typeof(s=e.constructor)&&s!==r&&n(o=s.prototype)&&o!==r.prototype&&i(t,o),t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e);r(86);window.sdk={loading:{loaded:!1,started:Date.now(),restart:()=>{location.reload()}}};r(55),r(35);sdk.config={browser:"Chrome",debug:!1,application:{id:"hotspot-shield-chrome",name:"hotspot-shield",version:browser.runtime.getManifest().version,dotVersion:Number(browser.runtime.getManifest().version.replace(/\.([0-9]+)$/,"$1")),applicationId:browser.runtime.id},authorization:{carrier:"hss",platform:"chrome"},protocolPrefix:"chrome-extension",configs:{free:"https://s3-us-west-2.amazonaws.com/hssext/hss-free.json",elite:"https://s3-us-west-2.amazonaws.com/hssext/hss-elite.json"},countryCheckUrl:"https://www.hsselite.com/ipinfo",elite:{api:"https://api.hsselite.com/1/plain/",enabled:!0,prefix:"HC",popupUtm:"hss_ChromeExtension",deviceInfo:{make:navigator.userAgent.match(/Chrom(e|ium)/g)?navigator.userAgent.match(/Chrom(e|ium)/g)[0]:"undefined",model:"Chrome",platform:5,package_name:"com.anchorfree.extchrome"}},proxy:{connecting:{enabled:!0,delay:3.5},disconnecting:{enabled:!0,delay:1.8}},reporting:{analytics:{id:"UA-114461737-1",sampling:{elite:100,click:100,bypass:100,secured:100,malware:100,connection:100,application:100,contentWall:100,SpeedMonitoring:100,default:10},interval:72e6,noPrefix:!0}},promo:{rateUs:{delay:12e5,interval:6048e5},trial:{delay:0,interval:864e5,limit:10}},uninstallUrl:"https://www.hotspotshield.com/vpn/vpn-for-chrome/uninstall/"},sdk.config.installUrl=`chrome-extension://${sdk.config.application.applicationId}/pages/welcome.html`,sdk.config.promo.rateUs.url=`https://chrome.google.com/webstore/detail/hotspot-shield-vpn-free-p/${sdk.config.application.applicationId}?hl=en-US`;var n=r(59);r(17),r(112);class i{static get(t,e){return i.request(t,"GET",!1,e)}static post(t,e,r){return i.request(t,"POST",e,r)}static request(t,e,r,n){return n=n||6e4,new Promise((i,s)=>{const o=new XMLHttpRequest;o.open(e,t),"POST"===e&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){o.status>=200&&o.status<300?i(o.responseText):s()},o.onerror=function(t){s(t)},o.timeout=n,o.ontimeout=function(t){s(t)},o.send(r)})}}var s=i,o=r(121),a=r.n(o);const u={content:"package proto.api.request;\nmessage DeviceInfo {\n\tenum Platform {\n\t\tIOS              = 1;\n\t\tANDROID          = 2;\n\t\tWINDOWS          = 3;\n\t\tMAC              = 4;\n\t\tEXTENSION_CHROME = 5;\n\t\tOPEN_WRT         = 6;\n\t\tEXTENSION_FFOX   = 7;\n\t}\n\n\trequired Platform platform           = 1;\n\trequired string   hash               = 2;\n\trequired string   package_name       = 3; // ex: com.example.myapp\n\trequired int32    app_version        = 4;\n\trequired string   model              = 5; // ex: iPhone 6/Galaxy S3\n\trequired string   make               = 6; // ex: Samsung/Apple/HP/etc\n\trequired string   os_name            = 7; // ex: Windows 7 build 12324\n\trequired string   language           = 8;\n\toptional string   signature          = 9;\n\toptional string   token              = 10; // authorization token. If user not authorized, must be left empty\n\toptional string   channel            = 11; // installation channel\n\toptional string   bn_proxy_device_id = 12;\n\t//optional string flavour\n}\n\nmessage Config {\n\trequired DeviceInfo DeviceInfo = 1;\n}\n\nmessage SD {\n\trequired DeviceInfo DeviceInfo = 1;\n\trequired string requested_country = 2;\n  optional string additional_data   = 3;\n}\n\nmessage RestorePassword {\n\trequired DeviceInfo DeviceInfo = 1;\n\trequired string     email      = 2;\n}\n\nmessage Signin {\n\trequired DeviceInfo DeviceInfo = 1;\n\trequired string     login      = 2;\n\trequired string     password   = 3;\n}\n\nmessage Signout {\n\trequired DeviceInfo DeviceInfo = 1;\n}\n\nmessage Signup {\n\trequired DeviceInfo DeviceInfo = 1;\n\trequired string     email      = 2;\n\trequired string     password   = 3;\n}\n\nmessage Status {\n\trequired DeviceInfo DeviceInfo = 1;\n}\n\nmessage BNLink {\n    required DeviceInfo DeviceInfo = 1;\n    required string     email      = 2;\n}"};var l=u;const c={content:"package proto.api.response;\nmessage ResponseStatus {\n\tenum Errno {\n\t\tPLATFORM_NOT_SUPPORTED  = 10;\n\t\tOPERATION_NOT_SUPPORTED = 11;\n\t\tUNAUTHORIZED            = 12;\n\t\tINVALID_INPUT           = 13;\n\t\tSERVER_INTERNAL         = 14;\n\t}\n\n\trequired bool   success       = 1;\n\toptional uint32 error_code    = 2;\n\toptional string error_message = 3;\n\toptional string debug         = 4;\n}\n\nmessage Package {\n\tenum Id {\n\t\tELITE              = 1;\n\t\tDEDICATED          = 10;\n\t\tTURBO              = 11;\n\t\tTRIAL              = 15;\n\t\tADS                = 13;\n\t\tVIRTUAL_LOCATION   = 12;\n\t\tFIVE_EXTRA_DEVICES = 18;\n\t\tTRIALWARE          = 19;\n\t}\n\n\trequired Id      id              = 1;\n\toptional bool    is_active       = 2;\n\toptional uint64  expiration_date = 3;\n\toptional bool    is_lifetime     = 4;\n}\n\nmessage Timestamp {\n  optional int64 seconds = 1;\n  optional int32 nanos = 2;\n}\n\nmessage TimeRange {\n\toptional Timestamp start = 1;\n\toptional Timestamp end   = 2;\n}\n\nmessage UserStatus {\n\trepeated Package.Id packages_list = 1;\n\trepeated Package    packages      = 2;\n\n\toptional string login        = 3;\n\toptional uint32 devices_max  = 4;\n\toptional uint32 devices_used = 5;\n\toptional bool   is_anonymous = 6;\n\toptional TimeRange trial_period = 7;\n}\n\nmessage PaymentPopup {\n\tenum Type {\n\t\tPOPUP = 1;\n\t\tPAGE  = 2;\n\t}\n\n\trequired string url            = 1;\n\trequired uint32 width          = 2;\n\trequired uint32 height         = 3;\n\trequired uint32 corners_radius = 4;\n  required Type   type           = 5;\n}\n\nmessage Config {\n\trequired ResponseStatus ResponseStatus    = 1;\n\toptional PaymentPopup   PaymentPopup      = 2;\n\toptional PaymentPopup   PaymentOptinTrial = 3;\n}\n\nmessage SD {\n\trequired ResponseStatus ResponseStatus = 1;\n  optional string raw_data = 2;\n}\n\nmessage Error {\n\trequired ResponseStatus ResponseStatus = 1;\n}\n\nmessage RestorePassword {\n\trequired ResponseStatus ResponseStatus = 1;\n}\n\nmessage Signin {\n\trequired ResponseStatus ResponseStatus = 1;\n\toptional UserStatus     UserStatus     = 2;\n\toptional string         token          = 3;\n}\n\nmessage Signout {\n\trequired ResponseStatus ResponseStatus = 1;\n\toptional UserStatus     UserStatus     = 2;\n\toptional string         token          = 3;\n}\n\nmessage Signup {\n\trequired ResponseStatus ResponseStatus = 1;\n\toptional UserStatus     UserStatus     = 2;\n\toptional string         token          = 3;\n}\n\nmessage Status {\n\trequired ResponseStatus ResponseStatus = 1;\n\toptional UserStatus     UserStatus     = 2;\n\toptional string         token          = 3;\n\toptional string         client_cache   = 4;\n}\n\nmessage BNLink {\n    enum LinkStatus {\n        ACCEPTED    = 202;\n        NO_CONTENT  = 204;\n        BAD_REQUEST = 400;\n        CONFLICT    = 409;\n        LOCKED      = 423;\n    }\n\n    required ResponseStatus ResponseStatus = 1;\n    optional LinkStatus link_status = 2;\n}"};var h=c;var f=class{constructor(){this.protoRequest=a.a.loadProto(l.content).build("proto.api.request"),this.protoResponse=a.a.loadProto(h.content).build("proto.api.response")}getBase64DeviceInfo(t){return new Promise((e,r)=>{let n=new(0,this.protoRequest.DeviceInfo)(t).encode().toBase64();n=n.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,""),e(n)})}request(t,e,r){return new Promise((n,i)=>{debug(`Proto request: ${e}`),debug(JSON.stringify(r)),debug("-------------------------------------");const s=new(0,this.protoRequest[t])(r).encode().toArrayBuffer();this.sendRequest(t,e,s).then(t=>{try{return t.ResponseStatus.success?n(t):i(t)}catch(e){return i(t)}}).catch(t=>{i({ResponseStatus:{success:!1,error_code:t,error_message:null}})})})}response(t,e){return new Promise((r,n)=>{let i=this.protoResponse[t].decode(e);i=this.transformToObject(i),debug("Proto response:"),debug(JSON.stringify(i)),debug("-------------------------------------"),r(i)})}sendRequest(t,e,r){return new Promise((n,i)=>{const s=new XMLHttpRequest;s.open("POST",sdk.config.elite.api+e),s.overrideMimeType("application/octet-stream"),s.responseType="arraybuffer",s.onload=function(){s.status>=200&&s.status<300&&s.response?this.response(t,s.response).then(t=>{n(t)}).catch(t=>{i(200)}):i(s.status)}.bind(this),s.onerror=function(){i(s.status)},s.send(r)})}transformToObject(t){const e={};for(const r in t)"function"!=typeof t[r]&&(null===t[r]?e[r]=t[r]:"object"==typeof t[r]?e[r]=this.transformToObject(t[r]):e[r]=t[r]);return e}};var d=class{constructor(){this.popUp={deviceInfo:"",trial:"https://www.hsselite.com/payment/cc/week2month?chrome_ext=1",payment:"https://www.hsselite.com/pre_purchase?chrome_ext=1"},this.proto=new f,sdk.getSD=this.getSD.bind(this)}init(){return new Promise(t=>{this.getStatus().then(()=>(this.getPopUp(),this.showToPublic(),t()))})}getStatus(){return new Promise(t=>{this.proto.request("Status","status",{DeviceInfo:this.deviceInfo()}).then(e=>{this.statusCallback(e).then(()=>t())}).catch(e=>{this.statusCallback(e).then(()=>t())})})}getSD(){return new Promise(t=>{this.proto.request("SD","config/sd",{DeviceInfo:this.deviceInfo(),requested_country:"US"}).then(e=>{let r;if(e&&e.raw_data){try{let t=JSON.parse(e.raw_data);t.servers&&(r=t.servers)}catch(t){}t(r)}}).catch(()=>{t(void 0)})})}async signIn(t,e){try{this.eliteEvent({category:"signin"});const r=await this.proto.request("Signin","signin",{DeviceInfo:this.deviceInfo(),login:t,password:e}),n=await this.statusCallback(r);return this.eliteEvent({category:"signedin",touchpoint:sdk.user.status.elite?"elite":"free"}),sdk.user.status.elite&&sdk.forceLoadSD(),n}catch(t){throw(null==t?void 0:t.ResponseStatus)||t}}async signUp(t,e){try{this.eliteEvent({category:"signup"});await this.proto.request("Signup","signup",{DeviceInfo:this.deviceInfo(),email:t,password:e});return await this.signIn(t,e)}catch(t){throw(null==t?void 0:t.ResponseStatus)||t}}async restorePassword(t){try{return this.eliteEvent({category:"restorepassword"}),await this.proto.request("RestorePassword","restore",{DeviceInfo:this.deviceInfo(),email:t})}catch(t){throw(null==t?void 0:t.ResponseStatus)||t}}getPopUp(){this.proto.request("Config","config/payment_popup",{DeviceInfo:this.deviceInfo()}).then(t=>{t&&t.ResponseStatus&&t.ResponseStatus.success&&(t.PaymentPopup&&t.PaymentPopup.url&&(this.popUp.payment=t.PaymentPopup.url),t.PaymentOptinTrial&&t.PaymentOptinTrial.url&&(this.popUp.trial=t.PaymentOptinTrial.url),this.proto.getBase64DeviceInfo(this.deviceInfo()).then(t=>{this.popUp.deviceInfo=t}))})}openPopUp(t,e){this.domain=e,this.touchpoint=t;let r={category:"openpopup",touchpoint:this.touchpoint};this.eliteEvent(r);let n=`touchpoint=${t}&domain=${this.domain}&user_co=${sdk.user.country}${"connected"===sdk.proxy.status.status?`&proxy_co=${sdk.proxy.status.location}`:""}`,i=`${this.popUp.payment+(-1!==this.popUp.payment.indexOf("?")?"&":"?")}pbdi=${this.popUp.deviceInfo}&ct=${encodeURIComponent(n)}&utm_source=${sdk.config.elite.popupUtm}&utm_medium=Free&utm_campaign=${this.touchpoint}`;sdk.tabs.openPage(i)}openTrialPromo(t,e){this.domain=e,this.touchpoint=t;let r={category:"opentrialpromo",touchpoint:this.touchpoint};this.eliteEvent(r);let n=`touchpoint=${t}&domain=${this.domain}&user_co=${sdk.user.country}${"connected"===sdk.proxy.status.status?`&proxy_co=${sdk.proxy.status.location}`:""}`,i=`${this.popUp.trial}&pbdi=${this.popUp.deviceInfo}&ct=${encodeURIComponent(n)}&utm_source=${sdk.config.elite.popupUtm}&utm_medium=Free&utm_campaign=${this.touchpoint}`;sdk.tabs.openPage(i)}async statusCallback(t){if(sdk.user.status.token=void 0,sdk.user.status.elite=!1,sdk.user.status.login=void 0,sdk.user.status.bnLink=!1,sdk.user.status.authorized=!1,t.token&&(sdk.user.status.token=t.token),t.UserStatus&&void 0!==t.UserStatus.is_anonymous&&!t.UserStatus.is_anonymous&&t.UserStatus.login&&"_AFFREE_"!==t.UserStatus.login&&(sdk.user.status.login=t.UserStatus.login,sdk.user.status.authorized=!0,sdk.user.status.bnLink=!1),t.UserStatus&&t.UserStatus.packages)for(let e in t.UserStatus.packages){if(t.UserStatus.packages[e].is_active){sdk.user.status.elite=!0;break}}return await sdk.storage.set("User.data",sdk.user),JSON.parse(JSON.stringify(sdk.user.status))}showToPublic(){sdk.user.bnLink=this.bnLink.bind(this),sdk.user.signUp=this.signUp.bind(this),sdk.user.signIn=this.signIn.bind(this),sdk.user.signOut=this.signOut.bind(this),sdk.user.openPopUp=this.openPopUp.bind(this),sdk.user.getStatus=this.getStatus.bind(this),sdk.user.openTrialPromo=this.openTrialPromo.bind(this),sdk.user.restorePassword=this.restorePassword.bind(this)}bnLink(t){return this.eliteEvent({category:"bnLink"}),sdk.user.status.login=t,sdk.user.status.bnLink=!0,this.proto.request("BNLink","bn/link",{DeviceInfo:this.deviceInfo(),email:t}).then(t=>(t&&t.link_status&&202===t.link_status&&!this.bnLinkInterval&&this.monitoreBnLink(),t))}monitoreBnLink(){this.bnLinkInterval=setInterval(()=>{this.getStatus().then(()=>{if(sdk.user.status.authorized)return clearInterval(this.bnLinkInterval)})},1e4)}signOut(){return this.eliteEvent({category:"signout"}),this.proto.request("Signout","signout",{DeviceInfo:this.deviceInfo()}).then(t=>this.statusCallback(t))}deviceInfo(){let t={hash:sdk.user.hash,make:sdk.config.elite.deviceInfo.make,model:sdk.config.elite.deviceInfo.model,os_name:navigator.userAgent.match(/\(([^);]+)/i)?navigator.userAgent.match(/\(([^);]+)/i)[1]:"undefined",language:sdk.user.language,platform:sdk.config.elite.deviceInfo.platform,app_version:2,package_name:sdk.config.elite.deviceInfo.package_name};return sdk.user.status.token&&(t.token=sdk.user.status.token),t}eliteEvent(t){return new Promise(e=>{try{let r=sdk.proxy.status,n={event:"elite",category:t.category,touchpoint:t.touchpoint,"connection-country":r&&"connected"===r.status?r.country:null};sdk.reporting.analytics("elite",t.category,t.touchpoint),sdk.reporting.internal(n).then(()=>e())}catch(t){return e()}})}},p=r(130);const g=Object(p.a)(),v=g&&g.name,y=g&&g.version,m=(g&&g.os,"chrome"===v),b="firefox"===v,w="edge-chromium"===v||"edge"===v,E={prod:["api-prod-partner-us-west-2.northghost.com"],debug:["api-stage-partner-us-west-2.northghost.com"]};var k=class{init(){return this.onBeforeSendHeaders(),sdk.authorization={getToken:this.getToken.bind(this)},new Promise(t=>{this.getToken().then(()=>{if(!sdk.config.debug)return t();this.getToken("debug").then(()=>t())})})}getToken(t,e){return e=void 0===e?0:++e,t=t||"prod",new Promise(r=>{if(E[t].length<=e||sdk.user.credentials[t].username)return r();const n=sdk.storage.get("User.Authorization.firebaseData");let i=`https://${E[t][e]}/user/login`+`?device_id=${sdk.user.hash}&device_name=Chrome%20Extension`+`&device_type=${sdk.config.authorization.platform}_extension`+`&carrier_id=${sdk.config.authorization.carrier}&tz=${(new Date).getTimezoneOffset()}&auth_method=${n?"firebase":"anonymous"}`;n&&(i+=`&access_token=${n.token}`),this.url=E[t][e],s.post(i).then(n=>{this.url=void 0;try{n=JSON.parse(n)}catch(t){n=void 0}if(!n||!n.result||"OK"!==n.result)return r(this.getToken(t,e));try{sdk.user.credentials[t]={id:n.subscriber.id,name:n.subscriber.name,carrier_id:n.subscriber.carrier_id,username:"access_token",password:n.access_token}}catch(e){sdk.user.credentials[t]={}}sdk.storage.set("User.data",sdk.user).then(()=>r())}).catch(n=>{this.url=void 0,r(this.getToken(t,e))})})}onBeforeSendHeaders(){const t=["blocking","requestHeaders"];(m||w)&&y>="72"&&t.push("extraHeaders"),browser.webRequest.onBeforeSendHeaders.addListener(t=>{if(this.url&&-1!==t.url.indexOf(this.url)){for(const e in t.requestHeaders)if("origin"===t.requestHeaders[e].name.toLowerCase()){t.requestHeaders[e].value=`https://${this.url}`;break}return{requestHeaders:t.requestHeaders}}},{urls:["https://*/*"]},t)}};var S=class{constructor(){this.data=sdk.storage.get("User.data");const t=sdk.storage.get("User.hash")||this.data&&this.data.hash||"";this.data&&this.data.credentials&&this.data.credentials.prod&&this.data.credentials.old||(this.data={status:{},credentials:{prod:{},debug:{},old:{}}}),this.data.hash=t,this.hash(),t!==this.data.hash&&sdk.storage.set("User.hash",this.data.hash),this.percent(),this.language(),this.country(),sdk.user=this.data,sdk.user.credentials.old.username||(sdk.user.credentials.old.username=`${sdk.user.hash}.h783ohaw09jdf0`,sdk.user.credentials.old.password=`${sdk.user.hash}.h78239hd`)}init(){return new Promise(t=>{(new d).init().then(()=>{(new k).init().then(()=>t())})})}hash(){if(!this.data.hash||["HCd12b98511010b60631a7ef41e6e674f0","HCd12b98511010b60631a7ef41e6e674f1","HCd12b98511010b60631a7ef41e6e674f2","HCd12b98511010b60631a7ef41e6e674f3"].includes(this.data.hash)){this.data.hash="";for(let t=0;t<8;t++)this.data.hash+=(65536*(1+Math.random())|0).toString(16).substring(1);this.data.hash=sdk.config.elite.prefix+this.data.hash}}percent(){this.data.percent||(this.data.percent=Number(Date.now().toString().substr(-2,2)))}language(){this.data.language=navigator&&navigator.language?navigator.language.replace(/-.*/,"").toLowerCase():""}country(){return new Promise(t=>{if(this.data.country)return t(!0);s.get(sdk.config.countryCheckUrl).then(e=>{try{const r=JSON.parse(e);r&&r.country_code&&(this.data.country=r.country_code.toLowerCase(),t(!0))}catch(e){t(!0)}}).catch(()=>{t(!0)})})}},T=r(63);var x=class{constructor(){this.data={tabs:[],active:{id:void 0,domain:void 0,title:void 0}},this.favicons=sdk.storage.get("Tabs.favicons")?sdk.storage.get("Tabs.favicons"):{},this.createSignals()}init(){return this.updateList().then(()=>{this.pageView(),this.listeners(),sdk.tabs={active:this.data.active,openPage:this.openPage.bind(this),getDomain:this.getDomain.bind(this),addFavicon:this.addFavicon.bind(this),getFavicon:this.getFavicon.bind(this),getByTabId:this.getByTabId.bind(this),getActiveTab:this.getActiveTab.bind(this),getActiveWebsiteTab:this.getActiveWebsiteTab.bind(this),getByWindowId:this.getByWindowId.bind(this),onPageView:this.onPageView,onTabChanged:this.onTabChanged,onDomainChanged:this.onDomainChanged}})}listeners(){browser.tabs.onRemoved.addListener(this.updateList.bind(this)),browser.tabs.onDetached.addListener(this.updateList.bind(this)),browser.tabs.onReplaced.addListener(this.updateList.bind(this)),browser.tabs.onActivated.addListener(this.updateList.bind(this))}updateList(){return new Promise(t=>{browser.tabs.query({},e=>{this.data.tabs=[];for(const t in e){if(!e[t]||!e[t].url||!e[t].url.match(/^https?/))continue;const r=this.createRecord(e[t]);r&&this.data.tabs.push(r)}this.getActiveTab().then(e=>{const r=this.data.active.id,n=this.data.active.domain;this.data.active.title;return this.data.active.id=e.id,this.data.active.domain=e.domain,this.data.active.title=e.title,r&&r!==e.id?this.onTabChanged.dispatch(e):r&&n!==e.domain&&this.onDomainChanged.dispatch(e),t()})})})}addFavicon(t,e){this.favicons[t]||(this.favicons[t]=e),sdk.storage.set("Tabs.favicons",this.favicons)}getFavicon(t){return this.favicons[t]?this.favicons[t]:void 0}getActiveTab(){return new Promise(t=>{browser.tabs.query({active:!0,currentWindow:!0},e=>{if(e&&e[0])return t(this.createRecord(e[0]));browser.tabs.query({active:!0},e=>e&&e[0]?t(this.createRecord(e[0])):t({id:void 0,domain:void 0,title:void 0}))})})}async getActiveWebsiteTab(){const t=await this.getActiveTab();if(/^https?:\/\/.*?/.test(t.url))return t}getByTabId(t){if(!t||"number"!=typeof t)return!1;for(const e in this.data.tabs){const r=this.data.tabs[e];if(r.id===t)return r}return!1}getByWindowId(t){if(!t||"number"!=typeof t)return!1;for(const e in this.data.tabs){const r=this.data.tabs[e];if(r.windowId===t)return r}return!1}createRecord(t){if(!t)return;const e={id:t.id,url:t.url,title:t.title,domain:this.getDomain(t.url),windowId:t.windowId};return t.favIconUrl&&this.addFavicon(e.domain,t.favIconUrl),e}createSignals(){this.onPageView=new T.a,this.onTabChanged=new T.a,this.onDomainChanged=new T.a}getDomain(t){if(!t)return;const e=t.toLowerCase().match(/^[^:]+:\/\/(www\.)?([^?/\\]+)/);return e&&e[2]?e[2]:void 0}pageView(){browser.webRequest.onResponseStarted.addListener(t=>{if(!t||-1===t.tabId||"main_frame"!==t.type)return;const e=this.getDomain(t.url);e&&this.updateList().then(()=>{this.onPageView.dispatch({domain:e})})},{urls:["http://*/*","https://*/*"]},["responseHeaders"])}openPage(t,e){return new Promise(r=>{if("popup"!==(e=e||{}).mode)browser.tabs.create({url:t},t=>{r(t)});else{const n=e.width||580,i=e.height||600,s=screen.width/2-n/2,o=screen.height/2-i/2;browser.windows.create({url:t,width:Math.round(n),height:Math.round(i),left:Math.round(s),top:Math.round(o),focused:!0,type:"popup"},t=>{r(t.tabs[0])})}})}};var I=class{constructor(t){this.startTime=0,this.status=sdk.proxy.status.status,"connected"===this.status&&(this.startTime=Date.now()),sdk.proxy.onStatusChanged.add(t=>{-1!==["connected","disconnected"].indexOf(t.status)&&("connected"===this.status&&"connected"!==t.status&&(this.startTime=0),"connected"===t.status&&"connected"!==this.status&&(this.startTime=Date.now()),this.status=t.status)})}get(){return this.startTime}};var P=class{get(){return"5.00"}ping(){}test(){}},R=(r(40),r(136),r(139),["pixel.quantserve.com","event.shelljacket.us","api.hsselite.com","order.hotspotshield.com"]),L={free:[]};class _{static loadConfig(){return new Promise(t=>{sdk.getSD().then(e=>{if(!e)return;const r=_.parseConfig(e);t([e,r])})})}static parseConfig(t){const e={servers:{elite:{},regular:{}},locations:{elite:[],regular:[]}};for(const r in t){if(!t.hasOwnProperty(r))continue;const n=r.toLowerCase();for(const e in t[r])t[r].hasOwnProperty(e)&&(t[r][e].address=t[r][e].host,t[r][e].scheme="https",t[r][e].country=n);e.locations.elite.push(n),e.servers.elite[n]=t[r],t[r].length>0&&(e.locations.regular.push(n),e.servers.regular[n]=t[r])}return e}}var O=_;const A="Proxy.Config.config";var C=class{constructor(){this.config={servers:{elite:{},regular:{}},locations:{elite:[],regular:[]}},this.restoreConfig(),this.runPolling(),sdk.forceLoadSD=this.loadConfig.bind(this),sdk.config.debug&&(sdk.restoreConfig=this.restoreConfig.bind(this))}runPolling(){this.loadConfig(),setInterval(()=>{this.loadConfig()},864e5)}loadConfig(){if(sdk.storage.get("Proxy.Config.stopUpdate"))return;if(sdk.config.infra&&"hss"===sdk.config.infra)return O.loadConfig().then(t=>{t&&2===t.length&&(sdk.storage.set(A,t[0]),this.config=t[1])});const t=(e,r,n)=>(r=void 0===r?0:++r,n=void 0===n?[]:n,new Promise(i=>{if(r===e.length||!e[r])return i(n);s.get(e[r]).then(s=>{try{(s=JSON.parse(s)).servers?n.push(s.servers):s.push([])}catch(t){s.push([])}return i(t(e,r,n))}).catch(s=>(n.push([]),i(t(e,r,n))))}));t([sdk.config.configs.free,sdk.config.configs.elite]).then(t=>{const e={free:void 0,elite:void 0};t&&t[0]&&t[0].length>0?e.free=t[0]:L.free&&(e.free=L.free),t&&t[1]&&t[1].length>0?e.elite=t[1]:L.elite&&(e.elite=L.elite),this.parseConfig(e)})}restoreConfig(){let t=sdk.storage.get(A)?sdk.storage.get(A):L;"string"==typeof t&&(t=L),sdk.config.infra&&"hss"===sdk.config.infra?(t=O.parseConfig(t),this.config=t):this.parseConfig(t)}parseConfig(t){const e={servers:{elite:{},regular:{}},locations:{elite:[],regular:[]}};for(const r in t.free){const n=t.free[r];t.elite&&-1!==["us","gb","fr","in","sg"].indexOf(n.country)||(-1===e.locations.regular.indexOf(n.country)&&(e.locations.regular.push(n.country),e.servers.regular[n.country]=[]),e.servers.regular[n.country].push(n))}for(const r in t.elite){const n=t.elite[r];-1===e.locations.elite.indexOf(n.country)&&(e.locations.elite.push(n.country),e.servers.elite[n.country]=[]),e.servers.elite[n.country].push(n)}sdk.storage.set(A,t),this.config=e}getLocations(t){return"all"===(t=t||"regular")?this.config.locations:this.config.locations[t]?this.config.locations[t]:{}}disableServer(t){for(const e of Object.values(this.config.servers))if(e)for(const r of Object.values(e)){if(!r)continue;const e=r.find(e=>e.address===t);if(e)return!e.disable&&(e.disable=new Date,!0)}return!1}getServers(t,e){if("all"===(t=t||"regular"))return JSON.parse(JSON.stringify(this.config.servers));const r=JSON.parse(JSON.stringify(this.config.servers));return r[t]?e&&!r[t][e]?null:e&&r[t][e]?r[t][e].filter(t=>!t.disable):!e&&r[t]?r[t]:null:null}};const U="Proxy.Servers.active";var B=class{constructor(){this.config=new C,sdk.servers=this,this.active=sdk.storage.get(U)?sdk.storage.get(U):[]}setActive(t){return this.active=t,b&&(this.proxyConfigPool=this.active.map(t=>{let{address:e,port:r,scheme:n}=t;return{port:r,type:n,host:e,failoverTimeout:3}})),sdk.storage.set(U,t)}getActive(){return this.active}get(t,e){return t&&"optimal"!==t||(t=this.getOptimalLocation(e)),this.getServers(t,e)}getServers(t,e){const r=this.getServersByPriority(this.config.getServers(e)[t]).splice(0,5);if(r.length<5){const n=this.getBackupServers(t,e);let i=0;for(;r.length<5;)r.push(n[i]),i++}return r}getBackupServers(t,e){const r=this.config.getServers(e),n=[];for(const e in r)if(e!==t)for(const t in r[e])r[e][t].disable||n.push(r[e][t]);return this.getServersByPriority(n)}getServersByPriority(t,e){const r=[];let n=0;e=e||[];for(const e in t)n+=t[e].priority,r.push(n);const i=Math.floor(Math.random()*n);for(let n=0;n<r.length;n++)if(i<=r[n])return e.push(t[n]),t.splice(n,1),this.getServersByPriority(t,e);return e}getOptimalLocation(t){const e=this.config.getLocations(t);return e[[Math.floor(Math.random()*e.length)]]}disableServer(t){this.config.disableServer(t)&&sdk.proxy.updateProxy()}concat(t){let e="";for(const r in t){if(!t[r])continue;e+=`${"http"===t[r].scheme?"proxy":t[r].scheme} ${t[r].address}:${t[r].port};`}return e}};function N(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var D=class{constructor(){N(this,"updateProxy",async()=>{const t=this.servers.get(this.status.location,sdk.user.status.elite?"elite":"regular");return await this.servers.setActive(t),this.render()}),N(this,"firefoxProxy",t=>{browser.proxy.onRequest.hasListener(this.firefoxProxyRequestHandler)&&browser.proxy.onRequest.removeListener(this.firefoxProxyRequestHandler),browser.proxy.onRequest.addListener(this.firefoxProxyRequestHandler,{urls:["<all_urls>"]})}),N(this,"firefoxProxyRequestHandler",t=>{if(!("connected"===sdk.proxy.status.status))return{type:"direct"};const{host:e}=new URL(t.url);return R.includes(e)||sdk.proxy.bypass.isInList(e)?{type:"direct"}:this.servers.proxyConfigPool}),N(this,"renderClearProxy",()=>this.setPacScript("function FindProxyForURL(url, host) { return 'DIRECT'; }")),N(this,"render",t=>b?this.firefoxProxy(t):this.pacScriptProxy(t)),N(this,"pacScriptProxy",t=>{const e=sdk.storage.get("Proxy.proxyLocal"),r="connected"===sdk.proxy.status.status;let n="";e&&r&&(n="\n      var ip = dnsResolve(host);\n      if(\n        isPlainHostName(host) \n        || shExpMatch(host, '*.local') \n        || isInNet(ip, '10.0.0.0', '255.0.0.0') \n        || isInNet(ip, '172.16.0.0',  '255.240.0.0') \n        || isInNet(ip, '192.168.0.0',  '255.255.0.0') \n        || isInNet(ip, '173.37.0.0',  '255.255.0.0') \n        || isInNet(ip, '127.0.0.0', '255.255.255.0')\n       ) return 'DIRECT';\n      ");const i=`\n      let active  = false,\n       created = ${Date.now()},\n       started = Date.now();\n       if((started-100) < created) { active = true; }\n\n      function FindProxyForURL(url, host) {\n        if(!url.match(/^(https?)|(ftp):\\/\\//)) return 'DIRECT';\n        if(!active && (Date.now() > (started + 2000))) active = true;\n        if(!active) return 'DIRECT';\n        \n        ${n}\n        \n        ${this.whiteList()}\n        \n        ${this.bypassWebsitesRow()}\n        \n        ${this.globalRow(t,r)}\n        \n        ${this.securedWebsitesRow(t)}  \n        \n        return 'DIRECT';\n      }\n      `;return this.setPacScript(i)}),N(this,"globalRow",(t,e)=>e&&"avaliable"===this.globalStatus?`return '${this.servers.concat(this.servers.getActive())+(t?"DIRECT;":"")}';\n`:""),N(this,"bypassWebsitesRow",()=>{var t,e;const r=null===(t=sdk.proxy)||void 0===t||null===(e=t.bypass)||void 0===e?void 0:e.get();return(null==r?void 0:r.length)?`if(${r.map(t=>`shExpMatch(host, '${t}')`).join(" || ")}) return 'DIRECT';`:""}),N(this,"whiteList",()=>`if (${["www.google-analytics.com","localhost","127.0.0.1",...R].map(t=>`shExpMatch(host, '${t}')`).join(" || ")}) return 'DIRECT';`),N(this,"securedWebsitesRow",t=>{var e,r;const n=(null===(e=sdk.proxy)||void 0===e||null===(r=e.secured)||void 0===r?void 0:r.get())||{};if(0===Object.keys(n).length)return"";const i=Object.values(n);return this.secured||(this.secured=this.servers.concat(this.servers.get("optimal",sdk.user.status.elite?"elite":"regular"))),`if(${`${JSON.stringify(i)}.indexOf(host.replace(/^www\\./, '')) !== -1`}) return '${this.secured}${t?"DIRECT;":""}';`}),N(this,"setPacScript",t=>new Promise(e=>{debug(t),debug("-----------------------------");const r={mode:"pac_script",pacScript:{data:t}};browser.proxy.settings.set({value:r,scope:"regular"},()=>{e()}),browser.extension.isAllowedIncognitoAccess(t=>{if(t)try{browser.proxy.settings.set({value:r,scope:"incognito_persistent"},()=>{})}catch(t){error(t)}})})),this.servers=new B,this.secured=void 0}};const M="Proxy.Status.status";var q=class extends D{constructor(){super(),this.status=sdk.storage.get(M)?sdk.storage.get(M):{status:"disconnected",location:"optimal"},this.createSignals(),this.watchForProxySettings(),this.watchForProxyError()}createSignals(){this.onProxyError=new T.a,this.onStatusChanged=new T.a,this.onGlobalStatusChanged=new T.a}updateStatus(t,e){return this.status.status=t,this.status.location=e||this.status.location,sdk.storage.set(M,this.status)}watchForProxySettings(){if(b)return;const t=t=>{if(!t)return;sdk.storage.get("Proxy.Status.desktopApplication")?this.updateGlobalStatus("desktop"):"not_controllable"===t.levelOfControl||"controlled_by_other_extensions"===t.levelOfControl?this.updateGlobalStatus("unavailable"):this.updateGlobalStatus("avaliable")};browser.proxy.settings.get({},t.bind(this)),browser.proxy.settings.onChange.addListener(t.bind(this))}updateGlobalStatus(t){this.globalStatus!==t&&(this.globalStatus=t,this.onGlobalStatusChanged.dispatch(t))}getGlobalStatus(){return this.globalStatus}watchForProxyError(){let t,e=0,r=!1;const n=()=>{if(!sdk.proxy.disableErrors&&!r){if(r=!0,e=t&&t<Date.now()-3e4?0:++e,t=Date.now(),50===e)return sdk.proxy.disconnect().then(()=>{this.onProxyError.dispatch("disconnect"),e=0,r=!1});this.onProxyError.dispatch("update"),this.render(!0),setTimeout(()=>{r=!1,this.render()},5e3)}};b?browser.proxy.onError.addListener(n):browser.proxy.onProxyError.addListener(n)}disableOtherProxy(){return new Promise((t,e)=>{browser.management.getAll(e=>{t(e)})}).then(t=>{const e=[],r=sdk.config.application.applicationId;for(const n in t){const i=t[n];i.id!==r&&(i.enabled&&-1!==i.permissions.indexOf("proxy")&&e.push(i.id))}return Promise.all(e.map(t=>{return e=t,new Promise((t,r)=>{browser.management.setEnabled(e,!1,()=>{t()})});var e})).then(()=>{})})}};var j=class{constructor(){this.lastProxyHost="",this.tryCounter={new:0,default:0},browser.webRequest.onAuthRequired.addListener(t=>{if(!t.isProxy)return;if(this.tryCounter.new>=1&&this.tryCounter.old>=1)return sdk.servers.disableServer(t.challenger.host),{cancel:!0};return{authCredentials:this.getAuthCredentials(t.challenger.host)}},{urls:["http://*/*","https://*/*"]},["blocking"])}getAuthCredentials(t){return this.lastProxyHost!==t&&(this.lastProxyHost=t,this.tryCounter={new:0,default:0}),this.tryCounter.new<=this.tryCounter.default?(this.tryCounter.new+=1,{username:sdk.user.credentials.prod.username,password:sdk.user.credentials.prod.password}):(this.tryCounter.default+=1,{username:sdk.user.credentials.old.username,password:sdk.user.credentials.old.password})}};const F="Proxy.BypassWebsites.list";var Y=class{constructor(){this.list=sdk.storage.get(F)?sdk.storage.get(F):[],this.onChange=new T.a}add(t){return new Promise((e,r)=>-1===this.list.indexOf(t)?(this.list.push(t),sdk.storage.set(F,this.list).then(()=>(sdk.proxy.render(),this.onChange.dispatch(this.get()),e(this.list)))):e(this.list))}get(){return this.list}remove(t){return new Promise((e,r)=>-1!==this.list.indexOf(t)?(this.list.splice(this.list.indexOf(t),1),sdk.storage.set(F,this.list).then(()=>(sdk.proxy.render(),this.onChange.dispatch(this.get()),e()))):e())}isInList(t){return-1!==this.list.indexOf(t)}};var V=class{constructor(){this.list=sdk.storage.get("Proxy.SecuredWebsites.list")?sdk.storage.get("Proxy.SecuredWebsites.list"):void 0,this.list||(this.list={},sdk.storage.set("Proxy.SecuredWebsites.list",this.list)),this.onChange=new T.a,this.lock={},sdk.tabs.onPageView.add(t=>{t&&t.domain&&this.isInList(t.domain)&&(this.list[t.domain].visited++,sdk.storage.set("Proxy.SecuredWebsites.list",this.list))})}add(t,e){return new Promise((e,r)=>(this.list[t]||(this.lock[t]=!0,this.list[t]={location:"optimal",type:"custom",visited:0},sdk.storage.set("Proxy.SecuredWebsites.list",this.list),sdk.proxy.render(),this.onChange.dispatch(this.get())),e(this.list)))}get(){return this.list}remove(t){return new Promise((e,r)=>this.list[t]?(delete this.list[t],sdk.storage.set("Proxy.SecuredWebsites.list",this.list).then(()=>(sdk.proxy.render(),this.onChange.dispatch(this.get()),e()))):e())}isInList(t){return!!this.list[t]}isLocked(t){return!!this.lock[t]}unlock(t){delete this.lock[t]}};var $=class extends q{constructor(){super(),new j,sdk.proxy={status:this.status,render:this.render.bind(this),connect:this.connect.bind(this),reconnect:this.reconnect.bind(this),disconnect:this.disconnect.bind(this),updateProxy:this.updateProxy.bind(this),getServers:this.servers.config.getServers.bind(this.servers.config),getLocations:this.servers.config.getLocations.bind(this.servers.config),getGlobalStatus:this.getGlobalStatus.bind(this),getActiveServers:this.servers.getActive.bind(this.servers),disableOtherProxy:this.disableOtherProxy.bind(this),onProxyError:this.onProxyError,onStatusChanged:this.onStatusChanged,onGlobalStatusChanged:this.onGlobalStatusChanged,disableErrors:!1};const t=new I;sdk.proxy.timer=t.get.bind(t);const e=new Y;sdk.proxy.bypass={add:e.add.bind(e),get:e.get.bind(e),remove:e.remove.bind(e),isInList:e.isInList.bind(e),onChange:e.onChange},this.SecuredWebsites();const r=new P;sdk.proxy.speed={get:r.get.bind(r),ping:r.ping.bind(r),test:r.test.bind(r)},this.initDone()}SecuredWebsites(t){const e=new V(t);sdk.proxy.secured={add:e.add.bind(e),get:e.get.bind(e),remove:e.remove.bind(e),isInList:e.isInList.bind(e),isLocked:e.isLocked.bind(e),unlock:e.unlock.bind(e),onChange:e.onChange}}initDone(){sdk.storage.get("Storage.error")?this.renderClearProxy():sdk.proxy.disconnect()}connect(t,e){return e=e||1e3*sdk.config.proxy.connecting.delay,t=t||"optimal",debug(`Connect: ${t}`),new Promise(r=>{sdk.storage.set("GDPR.Connected",!0).then(()=>{this.updateStatus("connected",t).then(()=>{this.updateProxy().then(()=>{this.onStatusChanged.dispatch({status:"connecting",location:this.status.location}),setTimeout(()=>{this.onStatusChanged.dispatch(this.status),r()},e)})})})})}reconnect(t){return t=t||"optimal",debug(`Reconnect: ${t}`),new Promise(e=>{this.updateStatus("connected",t).then(()=>{this.updateProxy().then(()=>{this.onStatusChanged.dispatch({status:"connected",location:this.status.location}),e()})})})}disconnect(t){return t=t||1e3*sdk.config.proxy.disconnecting.delay,debug("Disconnect"),new Promise(e=>{this.updateStatus("disconnected").then(()=>{this.updateProxy().then(()=>{this.onStatusChanged.dispatch({status:"disconnecting",location:this.status.location}),setTimeout(()=>{this.onStatusChanged.dispatch(this.status),e()},t)})})})}};var W=class{constructor(){this.data={}}init(){return new Promise(t=>{sdk.storage={},sdk.storage.get=this.get.bind(this),sdk.storage.set=this.set.bind(this),sdk.storage.print=()=>{log(this.data)},sdk.storage.clean=()=>{browser.storage.local.clear(),location.reload()};try{browser.storage.local.get(null,e=>{debug(e),this.data=e,this.data["Panel.loaded"]=!1,this.data["Panel.animated"]=!1,t()})}catch(e){this.data={},this.data["Panel.loaded"]=!1,this.data["Panel.animated"]=!1,this.data["Storage.error"]=!0,this.data["Panel.tooltipsShowed"]=!0,t()}})}get(t){if("object"==typeof t){const e=[];for(const r in t)e.push(this.data[t[r]]);return e}return this.data[t]}set(t,e){return this.data[t]=this.clone(e),new Promise(e?e=>{try{browser.storage.local.set({[t]:this.data[t]},()=>{e()})}catch(t){e()}}:e=>{try{browser.storage.local.remove(t,()=>{e()})}catch(t){e()}})}clone(t){return"object"!=typeof t?t:JSON.parse(JSON.stringify(t))}};const z="Reporting.Internal.queue";var H=class{constructor(){this.queue=sdk.storage.get(z)?sdk.storage.get(z):[],this.send(),setInterval(this.send.bind(this),15e4)}event(t){return t.payload.version=sdk.config.application.dotVersion,t.payload.country=sdk.user.country,t.payload.hash=sdk.user.hash,t.payload.id=sdk.config.application.id,t.payload.ts=Date.now(),this.queue.push(t),sdk.storage.set(z,this.queue).then(()=>t)}send(){if(0===this.queue.length||!sdk.storage.get("GDPR.Connected"))return;const t=this.queue;this.queue=[];const e=this.queue.length-1;let r="";for(const n in t)r+=JSON.stringify(t[n]).toLowerCase(),n!==e&&(r+="\n");s.post("https://event.shelljacket.us/api/report/chrome_ext",r).then(()=>{sdk.storage.set(z,this.queue)}).catch(e=>{this.queue=this.queue.concat(t),sdk.storage.set(z,this.queue)})}},Z=r(122),G=r.n(Z);const X={version:"v",clientId:"cid",userId:"uid",trackingId:"tid",hitType:"t",applicationName:"an",applicationId:"aid",applicationVersion:"av",contentDescription:"cd",category:"ec",action:"ea",label:"el",value:"ev",screenName:"cd",campaignName:"cn",campaignSource:"cs",campaignMedium:"cm",clientIpAddress:"uip",userAgent:"ua"},J="Reporting.Analytics.param";var K=class{init(){return sdk&&sdk.config&&sdk.config.reporting&&sdk.config.reporting.analytics&&sdk.config.reporting.analytics.id?this.restoreParams():new Promise(t=>{t()})}event(t){return new Promise(e=>{if(!(t&&t.category&&sdk&&sdk.config&&sdk.config.reporting&&sdk.config.reporting.analytics&&sdk.config.reporting.analytics.id))return e();const r=sdk.config.reporting.analytics;return Number(Date.now().toString().match(/[0-9]{2}$/))>(r.sampling[t.category]?r.sampling[t.category]:r.sampling.default)-1?e():(r.noPrefix||(t.category=`_${t.category}`),t.hitType="event",t.version="1",t.clientId=sdk.user.hash,t.applicationId=sdk.config.application.id,t.applicationName=sdk.config.application.name,t.applicationVersion=sdk.config.application.version,t=G()(t,this.params),e(this.send(t)))})}send(t){return new Promise((e,r)=>{s.post("http://www.google-analytics.com/collect",(t=>{const e={};for(const r in t){const n=t[r];void 0!==n&&null!=n&&(e[X[r]||r]=n)}const r=[];for(const t in e)r.push(`${t}=${encodeURIComponent(e[t])}`);return r.join("&")})(t)).then(()=>e()).catch(()=>e())})}restoreParams(){return this.params=sdk.storage.get(J)?sdk.storage.get(J):{},new Promise(t=>this.params.trackingId?t():this.createParams().then(()=>t()))}createParams(){const t={trackingId:sdk.config.reporting.analytics.id};return new Promise(e=>{this.updateParams(t).then(()=>{browser.tabs.query({url:`https://chrome.google.com/*${sdk.config.application.applicationId}*`},t=>{const r=t[0];if(!r)return e();const n=r.url.match(/utm_campaign=([^&]+)/),i=r.url.match(/utm_source=([^&]+)/),s=r.url.match(/utm_medium=([^&]+)/),o={campaignName:n&&n[1]?n[1]:null,campaignSource:i&&i[1]?i[1]:null,campaignMedium:s&&s[1]?s[1]:null};this.updateParams(o).then(()=>e())})})})}updateParams(t){return this.params=G()(this.params,t),sdk.storage.set(J,this.params)}};var Q=class{init(){return this.internalObj=new H,this.analyticsObj=new K,this.analyticsObj.init().then(()=>{sdk.reporting={report:this.report.bind(this),internal:this.internal.bind(this),analytics:this.analytics.bind(this)}})}report(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.internal.apply(this,e),this.analytics.apply(this,e)}internal(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(0===e.length)return new Promise(t=>{t()});const n=["event","category","action","label","value"],i={};for(const t in e)if("object"!=typeof e[t]&&n[t])i[n[t]]=e[t];else if("object"==typeof e[t])for(const r in e[t])e[t][r]&&(i[r]=e[t][r]);if(!i.event)return new Promise(t=>{t()});const s={event:i.event,payload:{}};delete i.event;for(const t in i)s.payload[t]=i[t];return this.internalObj.event(s)}analytics(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(0===e.length)return new Promise(t=>{t()});const n=["category","action","label","value"],i={};for(const t in e)if("object"!=typeof e[t]&&n[t])i[n[t]]=e[t];else if("object"==typeof e[t])for(const r in e[t])i[r]=e[t][r];return i.category?(i.value&&(i.label=`${i.label}_${i.value}`),this.analyticsObj.event({category:i.category,action:i.action,label:i.label})):new Promise(t=>{t()})}};const tt="Monitoring.lextPing";var et=class{constructor(){this.install(),this.update(),this.ping(),this.status()}status(){let t={connected:0,disconnected:0,secured:0,bypass:0};const e={bypass:["disconnected","bypass"],secured:["connected","secured"],connected:["connected","regular"],disconnected:["disconnected","regular"]};sdk.tabs.onPageView.add(e=>{e&&e.domain&&(sdk.proxy.bypass.isInList(e.domain)&&"connected"===sdk.proxy.status.status?t.bypass++:sdk.proxy.secured.isInList(e.domain)&&"connected"!==sdk.proxy.status.status?t.secured++:"connected"===sdk.proxy.status.status?t.connected++:t.disconnected++,sdk.reporting.internal("pageview",{category:Date.now(),"connection-status":sdk.proxy.status.status,"connection-country":sdk.proxy.status.location}))}),setInterval(()=>{for(const r in t)0!==t[r]&&sdk.storage.get("GDPR.Connected")&&sdk.reporting.internal("status",{connection_status:e[r][0],connection_type:e[r][1],sites_number:t[r]});t={connected:0,disconnected:0,secured:0,bypass:0}},12e4)}update(){browser.runtime.onUpdateAvailable.addListener(()=>{sdk.reporting.report("application","updated").then(()=>{browser.runtime.reload()})})}install(){sdk.config.uninstallUrl&&browser.runtime.setUninstallURL(sdk.config.uninstallUrl),sdk.storage.get("Monitoring.launched")||sdk.reporting.report("application","installed").then(()=>{sdk.storage.set("Monitoring.launched",!0).then(()=>{sdk.config.installUrl&&sdk.tabs.openPage(sdk.config.installUrl)})})}ping(){sdk.config.reporting&&sdk.config.reporting.analytics&&!sdk.config.reporting.analytics.interval&&((!sdk.storage.get(tt)||sdk.storage.get(tt)<Date.now())&&sdk.reporting.analytics("application","status",sdk.user.status.elite?"elite":"free").then(()=>{sdk.storage.set(tt,Date.now()+sdk.config.reporting.analytics.interval)}),setTimeout(()=>{this.ping()},36e5))}};const rt=["xvideos.com","pornolab.net","nudevista.com","bet365.com","youporn.com","myfreecams.com","planetromeo.com","youjizz.com","spankbang.com","txxx.com","new.livejasmin.com","xonline.vip","porntube.com","vporn.com","video-one.com","creatives.livejasmin.com","alohatube.com","4tube.com","avnori.com","porn.com","tnaflix.com","tube8.com","eporner.com","hclips.com","gotporn.com","brazzers.com","ashemaletube.com","pron.tv","fetlife.com","xpcams.com","hqporner.com","pornhd.com","cam4.es","bongacams.com","whoer.net","proxy-nl.hide.me","href.li","hiload.com","hola.org","manhunt.net","privatecams.com","manjam.com"],nt="ContentWall.timer";var it=class{constructor(){this.timer=sdk.storage.get(nt)?sdk.storage.get(nt):0,this.limit=sdk.storage.get("ContentWall.disconnected")?30:120}handleRequest(t){return new Promise(e=>{switch(t.method){case"shouldShow":return e(this.shouldShow(t));case"increase":return e(this.increase());case"disconnect":return e(this.disconnect(t));case"open":return e(this.openPopUp(t))}})}shouldShow(t){if(!t.message||!t.message.domain||-1===rt.indexOf(t.message.domain)||sdk.user.status.elite)return!1;const e=t.message.domain;return!(sdk.proxy.bypass.isInList(e)||!sdk.proxy.secured.isInList(e)&&"connected"!==sdk.proxy.status.status)&&(sdk.reporting.report("contentWall","show",e),{limit:this.limit,timer:this.timer})}disconnect(t){if(!t.message||!t.message.domain||-1===rt.indexOf(t.message.domain))return!1;const e=t.message.domain;sdk.proxy.secured.isInList(e)&&sdk.proxy.secured.remove(e),this.timer=0,this.limit=30,sdk.storage.set("ContentWall.disconnected",!0),sdk.storage.set(nt,this.timer),sdk.reporting.report("contentWall","disconnect",e),sdk.reporting.report("bypass","addCw",e).then(()=>{sdk.proxy.bypass.add(e)})}increase(){sdk.storage.set(nt,++this.timer)}openPopUp(t){sdk.reporting.report("contentWall","popup",sdk.tabs.active.domain),sdk.user.openPopUp("contentWall",t.message&&t.message.domain?t.message.domain:void 0)}};var st=class{constructor(){this.contentWall=new it,browser.runtime.onMessage.addListener((t,e,r)=>(this.handleRequest(t,r),!0))}handleRequest(t,e){t&&t.from&&t.method&&("ContentWall"===t.from?this.contentWall.handleRequest(t).then(t=>{e(t)}):"AdBlocker"===t.from&&e(sdk.adBlocker.getDomRules()))}};var ot=class{constructor(){this.setIcon(),sdk.tabs.onPageView.add(this.setIcon.bind(this)),sdk.tabs.onTabChanged.add(this.setIcon.bind(this)),sdk.proxy.onStatusChanged.add(this.setIcon.bind(this)),sdk.proxy.bypass.onChange.add(this.setIcon.bind(this)),sdk.proxy.secured.onChange.add(this.setIcon.bind(this)),sdk.proxy.onGlobalStatusChanged.add(this.setIcon.bind(this))}setIcon(){const t=sdk.tabs.active.domain,e=sdk.proxy.status.status;let r;r="unavailable"===sdk.proxy.getGlobalStatus()?"unavailable":"desktop"===sdk.proxy.getGlobalStatus()?"connected":sdk.proxy.bypass.isInList(t)&&"disconnected"!==e?"bypass":-1!==["connecting","disconnecting"].indexOf(e)?"connecting":"connected"===e?"connected":sdk.proxy.secured.isInList(t)?"secured":e,browser.browserAction.setIcon({path:{19:`/static/assets/icons/status/${r}.png`,38:`/static/assets/icons/status/${r}.png`}})}};r(127),r(115);const at=`${sdk.config.protocolPrefix}://${sdk.config.application.applicationId}/static/data/sword`;var ut=class{constructor(){this.rules={}}async loadRules(){const t=await fetch(at),e=await t.json(),r={};for(const t in e)try{if(e[t].match(/\.$/))continue;const n=e[t].split(".");n.reverse(),r[n[0]]=r[n[0]]?r[n[0]]:[],r[n[0]].push(e[t])}catch(t){error(t)}this.rules=r}isInList(t){const e=t.split(".");return!(!this.rules[e[e.length-1]]||-1===this.rules[e[e.length-1]].indexOf(t))}};var lt=class{static getDomain(t){if(!t)return"";const e="ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|be|bf|bg|bh|bi|bj|bm|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|cl|cm|cn|co|cr|cu|cv|cw|cx|cz|de|dj|dk|dm|do|dz|ec|ee|eg|es|et|eu|fi|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|im|in|io|iq|ir|is|it|je|jo|jp|kg|ki|km|kn|kp|kr|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|na|nc|ne|nf|ng|nl|no|nr|nu|nz|om|pa|pe|pf|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|yt".split("|"),r="com|edu|gov|net|mil|org|nom|sch|caa|res|off|gob|int|tur|ip6|uri|urn|asn|act|nsw|qld|tas|vic|pro|biz|adm|adv|agr|arq|art|ato|bio|bmd|cim|cng|cnt|ecn|eco|emp|eng|esp|etc|eti|far|fnd|fot|fst|g12|ggf|imb|ind|inf|jor|jus|leg|lel|mat|med|mus|not|ntr|odo|ppg|psc|psi|qsl|rec|slg|srv|teo|tmp|trd|vet|zlg|web|ltd|sld|pol|fin|k12|lib|pri|aip|fie|eun|sci|prd|cci|pvt|mod|idv|rel|sex|gen|nic|abr|bas|cal|cam|emr|fvg|laz|lig|lom|mar|mol|pmn|pug|sar|sic|taa|tos|umb|vao|vda|ven|mie|北海道|和歌山|神奈川|鹿児島|ass|rep|tra|per|ngo|soc|grp|plc|its|air|and|bus|can|ddr|jfk|mad|nrw|nyc|ski|spy|tcm|ulm|usa|war|fhs|vgs|dep|eid|fet|fla|flå|gol|hof|hol|sel|vik|cri|iwi|ing|abo|fam|gok|gon|gop|gos|aid|atm|gsm|sos|elk|waw|est|aca|bar|cpa|jur|law|sec|plo|www|bir|cbg|jar|khv|msk|nov|nsk|ptz|rnd|spb|stv|tom|tsk|udm|vrn|cmw|kms|nkz|snz|pub|fhv|red|ens|nat|rns|rnu|bbs|tel|bel|kep|nhs|dni|fed|isa|nsn|gub|e12|tec|орг|обр|упр|alt|nis|jpn|mex|ath|iki|nid|gda|inc".split("|"),n=(t=t.replace(/^(https?:)?\/\/(www.)?([^/]+).*/,"$3")).split(".");for(;n.length>3;)n.shift();return 3===n.length&&(n[1].length>2&&n[2].length>2||-1===r.indexOf(n[1])&&-1===e.indexOf(n[2]))&&n.shift(),n.join(".")}static getFullDomain(t){return t&&(t=t.replace(/^(https?:)?\/\/(www.)?([^/]+).*/,"$3"))||""}};const ct="Sword.Replace",ht="Sword.Enabled",ft=["hotspotshield.com","betternet.co","hamsterdance.com","html5zombo.com"];var dt=class{constructor(){this.tabs={},this.done=!1,this.enabled=!1,this.replace=!1,this.swordQ={},sdk.storage.get(ct)||sdk.storage.set(ct,ft),this.rules=new ut,this.rules.loadRules().then(()=>{this.done=!0,this.enabled=!!sdk.storage.get(ht)&&sdk.storage.get(ht),this.replace=sdk.storage.get(ct)&&sdk.storage.get(ct).length>0?sdk.storage.get(ct):[],0===this.replace.length&&(this.enabled=!1,sdk.storage.set(ht,this.enabled))}).catch(()=>{this.disable()})}getList(){return this.replace}removeFromList(t){return this.replace.splice(t,1),sdk.storage.set(ct,this.replace).then(()=>(this.replace=sdk.storage.get(ct)&&sdk.storage.get(ct).length>0?sdk.storage.get(ct):[],0===this.replace.length&&(this.enabled=!1,sdk.storage.set(ht,this.enabled)),this.replace))}addToList(t){let e=!1;for(const r in this.replace)this.replace[r]===t&&(e=!0);return new Promise(r=>{if(e)return r();this.replace.push(t),sdk.storage.set(ct,this.replace).then(()=>r(this.replace))})}message(t,e){switch(t.method){case"getSwordData":return this.getSwordData(e.tab.id);case"checkSwordInsertionDomain":return this.checkSwordInsertionDomain(t.message.url,e.tab.id)}}getSwordData(t){return this.done&&this.enabled&&this.tabs[t]?this.tabs[t]:{disabled:!0}}checkSwordInsertionDomain(t,e){if(!this.done||!this.enabled||!this.tabs[e])return{isInList:!1};const r=lt.getDomain(t),n=lt.getFullDomain(t);return r===this.tabs[e].domain?{isInList:!1}:this.rules.isInList(n)||this.rules.isInList(r)?{isInList:!0}:{isInList:!1}}onBeforeRequest(t){if(!this.done||!this.enabled)return!1;if("main_frame"===t.type){const e=this.replace[Math.floor(Math.random()*this.replace.length)];return this.tabs[t.tabId]={id:t.tabId,url:t.url,domain:lt.getDomain(t.url),fullDomain:lt.getFullDomain(t.url),aliasDomain:e},!1}const e=this.getRequestInfo(t);if(!e||-1===e.request.url.indexOf(e.tab.domain))return!1;if(!this.rules.isInList(e.request.fullDomain)&&!this.rules.isInList(e.request.domain))return!1;const r=e.request.url.replace(new RegExp(e.tab.domain,"g"),e.aliasDomain);return this.swordQ[r]="replace",r}onBeforeSendHeaders(t){if(!this.done||!this.enabled)return!1;const e=this.getRequestInfo(t);if(!e)return!1;if(!this.rules.isInList(e.request.fullDomain)&&!this.rules.isInList(e.request.domain))return!1;const r=[];let n=!1;for(const t in e.headers){const i=e.headers[t];-1!==i.value.indexOf(e.tab.domain)&&(n=!0,i.value=i.value.replace(new RegExp(e.tab.domain,"g"),e.aliasDomain)),r.push(i)}return!!n&&(t.url&&(this.swordQ[t.url]="update"),r)}onHeadersReceived(t){if(!this.done||!this.enabled)return!1;const e=this.getRequestInfo(t);if(!e||e.request.domain===e.request.initiatorDomain)return!1;delete this.swordQ[t.url];const r=[];let n=!1,i=!1;for(const t in e.headers){const s=e.headers[t];"access-control-allow-origin"===s.name.toLowerCase()&&(n=!0),-1!==s.value.indexOf(e.aliasDomain)&&(i=!0,s.value=s.value.replace(new RegExp(e.aliasDomain,"g"),e.tab.domain)),r.push(s)}return n||(i=!0,r.push({name:"Access-Control-Allow-Origin",value:e.request.initiator})),!!i&&r}getStatus(){return this.enabled?"on":"off"}setStatus(t){if(-1!==["on","off","disabled"].indexOf(t))return this.enabled="on"===t,0===this.replace.length&&(this.enabled=!1),sdk.storage.set(ht,this.enabled)}getRequestInfo(t){if(!t||!t.tabId||!this.tabs[t.tabId])return!1;const e={tab:{url:this.tabs[t.tabId].url,domain:this.tabs[t.tabId].domain,fullDomain:this.tabs[t.tabId].fullDomain},request:{url:t.url,domain:lt.getDomain(t.url),initiator:t.initiator,initiatorDomain:lt.getDomain(t.initiator),fullDomain:lt.getFullDomain(t.url)},headers:t.requestHeaders?t.requestHeaders:t.responseHeaders?t.responseHeaders:[],aliasDomain:this.tabs[t.tabId].aliasDomain};return e.tab.domain!==e.request.domain&&e}};var pt=class{constructor(){browser.privacy.network.webRTCIPHandlingPolicy.get({},t=>{t&&"disable_non_proxied_udp"===t.value?this.status="on":this.status="off"})}getStatus(){return this.status}setStatus(t){if(-1!==["on","off","disabled"].indexOf(t))return this.status=t,"on"===this.status?this.enable():this.disable()}enable(){return new Promise(t=>{browser.privacy.network.webRTCIPHandlingPolicy.set({value:"disable_non_proxied_udp"},()=>t())})}disable(){return new Promise(t=>{browser.privacy.network.webRTCIPHandlingPolicy.set({value:"default_public_and_private_interfaces"},()=>t())})}};var gt=class{static step1(t){const e={none:[]};for(const r in t){const n=t[r];let[i,s,o]=n.match(/([^#]*)##(.*)/);if(s=s.match(/[^,]+/g),s)for(const t in s){const r=s[t];e[r]||(e[r]=[]),e[r].push(o)}else e.none.push(o)}for(const t in e)e[t]=e[t].join(", ");return e}};class vt{static step1(t){for(const e in t){const[r,n]=t[e].match(/[^$]+/g),i=r.replace(/https?:\/\//,"").match(/[a-z0-9]{4,}/g);t[e]={origin:t[e],filter:vt.parseFilter(r),options:vt.parseOptions(n),keywords:i||[""],exception:/^@@/.test(r)}}return t}static step2(t){const e=[],r={white:{},black:{}};let n=0;for(const i in t){const s=t[i],o={filter:new RegExp(s.filter),origin:s.origin};s.options&&(s.options.isType&&(o.isType=new RegExp(s.options.isType)),s.options.notType&&(o.notType=new RegExp(s.options.notType)),s.options.isDomain&&(o.isDomain=new RegExp(s.options.isDomain)),s.options.notDomain&&(o.notDomain=new RegExp(s.options.notDomain)),s.options.thirdParty&&(o.thirdParty=s.options.thirdParty)),e[n]=o;for(const t in s.keywords){const e=s.keywords[t],i=s.exception?"white":"black";r[i][e]||(r[i][e]=[]),r[i][e].push(n)}n++}return{filters:e,keywords:r}}static parseFilter(t){return t.replace(/(^@@)|(\|$)/g,"").replace(/([-\[\]/{}()+?.$])/g,"\\$1").replace(/^[|]{1}([^|])/,"$1").replace(/\^(.)/g,"(\\/|\\?)$1").replace(/\^/g,"((\\/|\\?)|$)").replace(/^[|]{2}/,"https?://([^/]+)?").replace(/\*/g,".*").replace(/\|/g,"\\|")}static parseOptions(t){if(!t)return!1;if(/^(websocket|popup|elemhide|generichide|genericblock|object\-subrequest)$/.test(t))return-1;const e={},r=[],n=[],i=[],s=[];t=t.match(/[^,]+/g);for(const o in t){const a=t[o];if(!/^(websocket|popup|elemhide|generichide|genericblock|object\-subrequest)$/.test(a))if(/^~third\-party/.test(a))e.thirdParty=-1;else if(/^third\-party/.test(a))e.thirdParty=1;else if(/^domain=/.test(a)){const t=a.replace(/([.-])/g,"\\$1").match(/domain=(.*)/)[1].match(/[^|]+/g);for(const e in t){const i=t[e];/^~/.test(i)?n.push(`^.*${i.replace(/~/,"")}$`):r.push(`^.*${i}$`)}}else/~/.test(a)?s.push(a):i.push(a)}let o=0;return r.length>0&&(o++,e.isDomain=r.join("|")),n.length>0&&(o++,e.notDomain=n.join("|")),i.length>0&&(o++,e.isType=i.join("|")),s.length>0&&(o++,e.notType=s.join("|")),!(0===o&&!e.thirdParty)&&e}}var yt=vt;const mt=`${sdk.config.protocolPrefix}://${sdk.config.application.applicationId}/static/data/adblock`;var bt=class{getRules(){return new Promise(t=>{const e=sdk.storage.get("AdBlocker.Rules.savedRules");if(e)return e[0]=yt.step2(e[0]),t(e);this.loadRules().then(e=>{let[r,n]=this.splitRulesByType(e);n=gt.step1(n),r=yt.step1(r),sdk.storage.set("AdBlocker.Rules.savedRules",[r,n]).then(()=>(r=yt.step2(r),t([r,n])))})})}splitRulesByType(t){t=t.replace(/[ ]/g,"").match(/[^\r\n]+/g);const e=[],r=[];for(const n in t){const i=t[n];""===i||/^\/.*\/(\$|$)/.test(i)||/^!|\[|#@#/.test(i)||(/##/.test(i)?e.push(i):r.push(i))}return[r,e]}async loadRules(){try{return(await fetch(mt)).text()}catch(t){return""}}};var wt=class{constructor(t){this.rules=t}getRules(t){return this.rules[t]?this.rules[t]:this.rules.none}};var Et=class{constructor(t){this.rules=t}check(t){let e=t.url.replace(/^https?:\/\//,"").match(/[a-z0-9]{4,}/g);e?e.push(""):e=[""];for(const r in e){const n=e[r];if(this.rules.keywords.white[n]&&this.checkRules(t,this.rules.keywords.white[n],"whitelist"))return!1}for(const r in e){const n=e[r];if(this.rules.keywords.black[n]&&this.checkRules(t,this.rules.keywords.black[n],"blacklist"))return!0}return!1}checkRules(t,e,r){for(const n in e){const i=this.rules.filters[e[n]];if((!i.thirdParty||t.thirdParty===i.thirdParty)&&(i.filter.test(t.url)&&(!i.isDomain||i.isDomain.test(t.referer))&&(!i.notDomain||!i.notDomain.test(t.referer))&&(!i.isType||i.isType.test(t.type))&&(!i.notType||!i.notType.test(t.type))))return debug(`${t.url} ${r}`),debug(t),debug(i),debug("---------------------------------"),!0}return!1}};var kt=class{constructor(){this.rules=new bt,this.rules.getRules().then(t=>{const[e,r]=t,n=[];for(const t in e.filters){const r=e.filters[t];Object.keys(r).length>2||n.push(r.filter.toString())}window.tempFilters=n,this.status=sdk.storage.get("AdBlocker.status")?sdk.storage.get("AdBlocker.status"):"off",this.counter=sdk.storage.get("AdBlocker.counter")?sdk.storage.get("AdBlocker.counter"):0,this.domMatcher=new wt(r),this.requestMatcher=new Et(e)})}check(t){if("on"!==this.status||"main_frame"===t.type)return!1;"sub_frame"===t.type&&(t.type="subdocument");const e={url:t.url,type:t.type.toLowerCase(),referer:t.url.match(/https?:\/\/([^/]+)/)[1],thirdParty:-1};for(const r in t.requestHeaders){const n=t.requestHeaders[r];"referer"===n.name.toLowerCase()&&(e.referer=n.value.match(/https?:\/\/([^/]+)/)[1])}const r=sdk.tabs.getByTabId(t.tabId);r&&r.domain!==e.referer&&(e.thirdParty=1),e.tab=r;const n=this.requestMatcher.check(e);return n&&this.counter++,n}getCounter(){return this.counter}getStatus(){return this.status}getDomRules(t){return!("on"!==this.status||!this.isConnected(t))&&this.domMatcher.getRules()}isConnected(t){if(!t)return!1;const e=sdk.tabs.getByTabId(t);return!!e&&(!sdk.proxy.bypass.isInList(e.domain)&&(!!sdk.proxy.secured.isInList(e.domain)||"connected"===sdk.proxy.status.status))}setStatus(t){if(-1!==["on","off","disabled"].indexOf(t))return this.status=t,sdk.storage.set("AdBlocker.status",t)}};var St=class{constructor(){let t="";t="connected"===sdk.proxy.status.status?"enable":"disable",this[t]().then(()=>{sdk.proxy.onStatusChanged.add(this.proxyStatusChanged.bind(this))})}proxyStatusChanged(){"connected"===sdk.proxy.status.status&&"off"===this.status?this.enable():"disconnected"===sdk.proxy.status.status&&"on"===this.status&&this.disable()}init(){browser.privacy.network.networkPredictionEnabled.get({},t=>{t&&t.value?this.status="on":this.status="off"})}enable(){return new Promise(t=>{browser.privacy.network.networkPredictionEnabled.set({value:!1},()=>(this.status="on",t()))})}disable(){return new Promise(t=>{browser.privacy.network.networkPredictionEnabled.set({value:!0},()=>(this.status="off",t()))})}};var Tt=class{constructor(){this.counter=sdk.storage.get("Connection.Sites.counter")?sdk.storage.get("Connection.Sites.counter"):0,this.save(),sdk.tabs.onPageView.add(()=>{"connected"===sdk.proxy.status.status&&this.counter++})}getCounter(){return this.counter}save(){this.saveInterval?sdk.storage.set("Connection.Sites.counter",this.counter):this.saveInterval=setInterval(this.save.bind(this),3e4)}},xt=r(131),It=r.n(xt);const Pt=(t,e)=>t>e?1:t<e?-1:0,Rt=(t,e)=>It()(t,e,Pt)>=0,Lt="Connection.MalwareBlocker.whiteList",_t=`${sdk.config.protocolPrefix}://${sdk.config.application.applicationId}/static/data/malware`;var Ot=class{constructor(){this.status=sdk.storage.get("Connection.MalwareBlocker.status")?sdk.storage.get("Connection.MalwareBlocker.status"):"off",this.counter=sdk.storage.get("Connection.MalwareBlocker.counter")?sdk.storage.get("Connection.MalwareBlocker.counter"):0,this.whiteList=sdk.storage.get(Lt)?sdk.storage.get(Lt):[],this.loadRules().then(()=>{setInterval(()=>{sdk.storage.set("Connection.MalwareBlocker.counter",this.counter)},3e4)})}getCounter(){return this.counter}getStatus(){return this.status}setStatus(t){if(-1!==["on","off","disabled"].indexOf(t))return this.status=t,sdk.storage.set("Connection.MalwareBlocker.status",t)}async loadRules(){try{const t=await fetch(_t),e=await t.text();this.rules=e.split(" ")}catch(t){error(t)}}check(t){return!("on"!==this.status||!t||-1!==this.whiteList.indexOf(t))&&(!!Rt(this.rules,t)&&(debug(`${t} is malware`),this.counter++,!0))}proceed(t){return new Promise(e=>{const r=sdk.tabs.getDomain(t);if(!r||-1!==this.whiteList.indexOf(r))return e();sdk.reporting.report("malware","proceed",r),this.whiteList.push(r),sdk.storage.set(Lt,this.whiteList).then(()=>e())})}};const At=`${sdk.config.protocolPrefix}://${sdk.config.application.applicationId}/static/data/trackers`;var Ct=class{constructor(){this.status=sdk.storage.get("Connection.Tracker.status")?sdk.storage.get("Connection.Tracker.status"):"off",this.counter=sdk.storage.get("Connection.Tracker.counter")?sdk.storage.get("Connection.Tracker.counter"):0,this.loadRules().then(()=>{setInterval(()=>{sdk.storage.set("Connection.Tracker.counter",this.counter)},3e4)})}getCounter(){return this.counter}getStatus(){return this.status}setStatus(t){if(-1!==["on","off","disabled"].indexOf(t))return this.status=t,sdk.storage.set("Connection.Tracker.status",t)}async loadRules(){try{const t=await fetch(At),e=await t.text();this.rules=e.split(" ")}catch(t){error(t)}}check(t){return!("on"!==this.status||!t)&&(!!Rt(this.rules,t)&&(this.counter++,!0))}};var Ut=class{constructor(){this.status=sdk.storage.get("Connection.Cookie.status")?sdk.storage.get("Connection.Cookie.status"):"off",this.counter=sdk.storage.get("Connection.Cookie.counter")?sdk.storage.get("Connection.Cookie.counter"):0,setInterval(()=>{sdk.storage.set("Connection.Cookie.counter",this.counter)},3e4)}getCounter(){return this.counter}getStatus(){return this.status}setStatus(t){if(-1!==["on","off","disabled"].indexOf(t))return this.status=t,sdk.storage.set("Connection.Cookie.status",t)}check(t){if("on"!==this.status)return t;for(const e in t){let r={};if(r=t[e].name.toLowerCase(),"cookie"===r){Number(Date.now().toString().match(/[0-9]{2}$/))<10&&this.counter++,t.splice(e,1);break}}return t}};r(117);var Bt=class{constructor(){this.restore(),this.save()}getCounter(){return this.counter}save(){this.saveInterval?sdk.storage.set("Connection.Bandwidth.counter",this.counter):this.saveInterval=setInterval(this.save.bind(this),6e4)}count(t){if(this.counter)for(const e in t){const r=t[e];if(r.name=r.name.toLowerCase(),r.value=r.value.toLowerCase(),"content-length"===r.name)return this.update(r.value),{cancel:!1}}}update(t){t=Number((Number(t)/1048576).toFixed(4));const e=Math.round(Date.now()/1e3),r=this.counter;e<r.day.end?r.day.bandwidth+=t:r.day={bandwidth:0,end:e+86400},e<r.week.end?r.week.bandwidth+=t:r.week={bandwidth:0,end:e+604800},e<r.month.end?r.month.bandwidth+=t:r.month={bandwidth:0,end:e+2592e3},r.total.bandwidth+=t,this.counter=r}restore(){let t=sdk.storage.get("Connection.Bandwidth.counter");if(!t){const e=Math.round(Date.now()/1e3),r=86400;t={total:{bandwidth:0},month:{bandwidth:0,end:e+30*r},week:{bandwidth:0,end:e+7*r},day:{bandwidth:0,end:e+r}},sdk.storage.set("Connection.Bandwidth.counter",t)}this.counter=t}};var Nt=class{constructor(){this.sword=new dt,this.webRTC=new pt,this.adBlocker=new kt,this.dnsPrefetch=new St,this.sitesCounter=new Tt,this.malwareBlocker=new Ot,this.trackerBlocker=new Ct,this.cookiesBlocker=new Ut,this.bandwidthCounter=new Bt,sdk.sitesCounter=this.sitesCounter.getCounter.bind(this.sitesCounter),sdk.bandwidthCounter=this.bandwidthCounter.getCounter.bind(this.bandwidthCounter),sdk.cookiesBlocker={getStatus:this.cookiesBlocker.getStatus.bind(this.cookiesBlocker),setStatus:this.cookiesBlocker.setStatus.bind(this.cookiesBlocker),getCounter:this.cookiesBlocker.getCounter.bind(this.cookiesBlocker)},sdk.adBlocker={setStatus:this.adBlocker.setStatus.bind(this.adBlocker),getStatus:this.adBlocker.getStatus.bind(this.adBlocker),getCounter:this.adBlocker.getCounter.bind(this.adBlocker),getDomRules:this.adBlocker.getDomRules.bind(this.adBlocker)},sdk.trackerBlocker={setStatus:this.trackerBlocker.setStatus.bind(this.trackerBlocker),getStatus:this.trackerBlocker.getStatus.bind(this.trackerBlocker),getCounter:this.trackerBlocker.getCounter.bind(this.trackerBlocker)},sdk.malwareBlocker={setStatus:this.malwareBlocker.setStatus.bind(this.malwareBlocker),getStatus:this.malwareBlocker.getStatus.bind(this.malwareBlocker),getCounter:this.malwareBlocker.getCounter.bind(this.malwareBlocker),proceed:this.malwareBlocker.proceed.bind(this.malwareBlocker)},sdk.webRTC={setStatus:this.webRTC.setStatus.bind(this.webRTC),getStatus:this.webRTC.getStatus.bind(this.webRTC)},sdk.sword={message:this.sword.message.bind(this.sword),getList:this.sword.getList.bind(this.sword),setStatus:this.sword.setStatus.bind(this.sword),getStatus:this.sword.getStatus.bind(this.sword),addToList:this.sword.addToList.bind(this.sword),removeFromList:this.sword.removeFromList.bind(this.sword)},this.onBeforeRequest(),this.onHeadersRecived(),this.onBeforeSendHeaders()}onBeforeRequest(){browser.webRequest.onBeforeRequest.addListener(t=>{if(-1===t.tabId||!this.isConnected(t.tabId))return;let e=Date.now();const r=this.sword.onBeforeRequest(t);if(r)return debug(`Sword redirect: ${Date.now()-e} ${r}`),{redirectUrl:r};e=Date.now();const n=sdk.tabs.getDomain(t.url);return this.malwareBlocker.check(n)?"main_frame"===t.type?(debug(`malwareBlocker redirect: ${Date.now()-e} ${t.url}`),sdk.reporting.report("malware","blocked",n),{redirectUrl:`${sdk.config.protocolPrefix}://${sdk.config.application.applicationId}/pages/blocked.html?url=${escape(t.url)}`}):(sdk.reporting.report("malware","canceled",n),debug(`malwareBlocker cancel: ${Date.now()-e} ${t.url}`),{cancel:!0}):(e=Date.now(),this.trackerBlocker.check(n)?(debug(`trackerBlocker: ${Date.now()-e} ${t.url}`),{cancel:!0}):void 0)},{urls:["http://*/*","https://*/*"]},["blocking","requestBody"])}onBeforeSendHeaders(){browser.webRequest.onBeforeSendHeaders.addListener(t=>{if(-1===t.tabId||!this.isConnected(t.tabId))return;let e=Date.now();if(this.adBlocker.check(t))return debug(`AdBlocker: ${Date.now()-e} ${t.url}`),{cancel:!0};return e=Date.now(),this.sword.onBeforeSendHeaders(t)&&debug(`Sword modify headers: ${Date.now()-e} ${t.url}`),{requestHeaders:this.cookiesBlocker.check(t.requestHeaders)}},{urls:["http://*/*","https://*/*"]},["blocking","requestHeaders"])}onHeadersRecived(){browser.webRequest.onHeadersReceived.addListener(t=>{if(-1===t.tabId||!this.isConnected(t.tabId))return;this.bandwidthCounter.count(t.responseHeaders);const e=this.sword.onHeadersReceived(t);return e?{responseHeaders:e}:void 0},{urls:["<all_urls>"]},["blocking","responseHeaders"])}isConnected(t){if(!t)return!1;const e=sdk.tabs.getByTabId(t);return!!e&&(!sdk.proxy.bypass.isInList(e.domain)&&(!!sdk.proxy.secured.isInList(e.domain)||"connected"===sdk.proxy.status.status))}};const Dt="DesktopMessages.nextPromoMessage",Mt="DesktopMessages.whatConnect";var qt=class{constructor(){sdk.proxy.onProxyError.add(this.proxyError.bind(this)),sdk.proxy.onStatusChanged.add(this.proxyStatusChanged.bind(this)),browser.notifications.onClosed.addListener(t=>{const e=this.checkType(t);e&&sdk.reporting.report("message",e,"closed")}),browser.notifications.onButtonClicked.addListener((t,e)=>{const r=this.checkType(t);r&&(1===e?browser.notifications.clear(t,()=>{sdk.reporting.report("message",r,"buttonClose")}):0===e&&"error"===r||0===e&&"promo"===r?browser.notifications.clear(t,()=>{sdk.reporting.report("message",r,"buttonDownload"),-1!==navigator.platform.indexOf("Mac")?window.open("https://control.kochava.com/v1/cpi/click?campaign_id=kohotspot-shield-e1z5meb8bd0bc517b5d1&network_id=7450&site_id=1&device_id=device_id"):window.open("https://control.kochava.com/v1/cpi/click?campaign_id=kohotspot-shield-2oo5a539acac1e6b0f&network_id=7450&site_id=1&device_id=device_id")}):0===e&&"update"===r&&browser.notifications.clear(t,()=>{}))})}proxyStatusChanged(t){if(!t||!t.status||"connected"!==t.status)return;let e=sdk.storage.get(Mt)?sdk.storage.get(Mt):0;e++,sdk.storage.set(Mt,e),e<2||setTimeout(()=>{this.showProxyStatusMessage()},15e3)}showProxyStatusMessage(){(sdk.storage.get(Dt)?sdk.storage.get(Dt):0)>=Date.now()||browser.notifications.create(`promoMessage${Date.now()}`,{type:"image",title:"Try our Desktop VPN Client",iconUrl:"/static/assets/messages/logo.svg",imageUrl:"/static/assets/messages/block.png",message:"Protect your entire internet connection, not just browser",requireInteraction:!0,buttons:[{title:"Start Free Download"},{title:"Next time"}]},()=>{sdk.reporting.report("message","promo","showed"),sdk.storage.set(Dt,Date.now()+6048e5)})}proxyError(t){"disconnect"===t&&browser.notifications.create(`errorMessage${Date.now()}`,{type:"basic",title:"Connection alert",iconUrl:"/static/assets/messages/warning.png",message:"We are having troubles. Download Hotspot Shield to get secure and unrestricted access",requireInteraction:!0,buttons:[{title:"Fix Connection"},{title:"Close"}]},()=>{sdk.reporting.report("message","error","showed")})}checkType(t){const e=t.match(/^([a-z]+)Message/);if(e&&e[1])switch(e[1]){case"error":return"error";case"promo":return"promo";case"update":return"update";default:return}}};class jt{constructor(){this.init()}init(){new n.a,(new W).init().then(()=>{(new x).init().then(()=>{(new S).init().then(()=>{(new Q).init().then(()=>{new $,new st,new et,new ot,new qt,new Nt,sdk.loading.loaded=!0})})})})}}try{new jt}catch(t){console.log("CRITICAL ERROR"),console.log(t)}}]);